function sendDeprecationNotification(e){return function(){console.log("[AdFuel - DEPRECATION NOTICE] AMPTManager is DEPRECATED and will be removed in the next version of AdFuel.  Please update your code to reference AdFuel instead of AMPTManager."),window.AdFuel[e].apply(this,arguments)}}function nativoComplete(){"use strict";jQuery(".zn.zn-staggered").each(function(){$staggeredZone=jQuery(this),layoutSize=($staggeredZone.attr("data-eq-state")||"").replace(/^(\S+\s+)*/,""),$staggeredZone.find(".zn__containers .column").each(function(){$staggeredColumn=jQuery(this),void 0!==$staggeredColumn.attr("class")&&$staggeredColumn.attr("class").indexOf("ntv")>-1&&($nativeContainer=$staggeredColumn.find(".cn").addClass("nativeSponsor").clone(),$staggeredColumn.remove(),$staggeredNativo=$staggeredZone.find(".column"),$staggeredNativo="xsmall"===layoutSize?$staggeredNativo.eq(0).find(".cn").eq(1):$staggeredNativo.eq(1).find(".cn").eq(0),$staggeredNativo.before($nativeContainer))})}),jQuery(".pg-wrapper").find("section.nativeSponsor").addClass("zn-loaded"),jQuery(window).load(function(){$nativeHubCarousel=jQuery(document.getElementById("ntv-videoZone")).find(".js-owl-carousel"),$nativeHubCarousel.length>0&&!isGalleryRendered&&(CNN.Carousel.restore($nativeHubCarousel.parent()),isGalleryRendered=!0)})}function onNativoRenderAd(e){"use strict";nativo.fbFeed=e.facebook_feed,nativo.twFeed=e.twitter_feed,nativo.twitterImage=e.twitter_image,nativo.authorName=e.author_name,nativo.epicAdName=e.native_adv,$nativeEmbedVideo=jQuery(document.getElementById("prx_full_ad_video")),$nativeEmbedVideo.length>0&&$nativeEmbedVideo.parent().addClass("ntv_video_p"),$bigPicture=jQuery(document.getElementById("bigPicture")),$bigPicture.length>0&&!isGalleryRendered&&(nativo.renderGallery(),isGalleryRendered=!0),jQuery(window).load(function(){nativo.renderAuthor(),nativo.renderFacebook(),nativo.renderTwitter(),nativo.renderEpic()})}function changeOwlCarousalWidth(){"use strict";var e=jQuery(".js-pg-sponsor .owl-stage-outer .owl-stage"),t=e.find(".owl-item").length;e.css("width",70*t)}Modernizr.addTest("ios",function(){"use strict";return!!navigator.userAgent.match(/(iPod|iPhone|iPad)/i)}),Modernizr.addTest("android",function(){"use strict";return!!navigator.userAgent.match(/android/i)}),Modernizr.addTest("iospre10",function(){"use strict";return-1!==navigator.userAgent.search(/(iPod|iPhone|iPad).*OS [3-9]/i)}),Modernizr.addTest("iemobile",function(){"use strict";return!!navigator.userAgent.match(/iemobile/i)}),Modernizr.addTest("ieunsupported",function(){"use strict";return navigator.userAgent.search(/MSIE ([2-9]|10)\./i)>=0}),Modernizr.addTest("ie11unsupported",function(){"use strict";return navigator.userAgent.search(/Trident\/7\.0;(.*)rv:11\./i)>=0}),Modernizr.addTest("ie",function(){"use strict";return navigator.userAgent.search(/\s+(MSIE|rv:11|Edge\/\d+\.)/)>=0}),Modernizr.addTest("edge",function(){"use strict";return navigator.userAgent.search(/\s+(Edge\/\d+\.)/)>=0}),function(e){var t=navigator.userAgent;e.HTMLPictureElement&&/ecko/.test(t)&&t.match(/rv\:(\d+)/)&&RegExp.$1<45&&addEventListener("resize",function(){var t,n=document.createElement("source"),i=function(e){var t,i,a=e.parentNode;"PICTURE"===a.nodeName.toUpperCase()?(t=n.cloneNode(),a.insertBefore(t,a.firstElementChild),setTimeout(function(){a.removeChild(t)})):(!e._pfLastSize||e.offsetWidth>e._pfLastSize)&&(e._pfLastSize=e.offsetWidth,i=e.sizes,e.sizes+=",100vw",setTimeout(function(){e.sizes=i}))},a=function(){var e,t=document.querySelectorAll("picture > img, img[srcset][sizes]");for(e=0;e<t.length;e++)i(t[e])},r=function(){clearTimeout(t),t=setTimeout(a,99)},o=e.matchMedia&&matchMedia("(orientation: landscape)"),s=function(){r(),o&&o.addListener&&o.addListener(r)};return n.srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",/^[c|i]|d$/.test(document.readyState||"")?s():document.addEventListener("DOMContentLoaded",s),r}())}(window),function(e,t,n){"use strict";function i(e){return" "===e||"\t"===e||"\n"===e||"\f"===e||"\r"===e}function a(){R=!1,D=e.devicePixelRatio,O={},M={},g.DPR=D||1,j.width=Math.max(e.innerWidth||0,x.clientWidth),j.height=Math.max(e.innerHeight||0,x.clientHeight),j.vw=j.width/100,j.vh=j.height/100,m=[j.height,j.width,D].join("-"),j.em=g.getEmValue(),j.rem=j.em}function r(e,t,n,i){var a,r,o,s;return"saveData"===A.algorithm?e>2.7?s=n+1:(r=t-n,a=Math.pow(e-.6,1.5),o=r*a,i&&(o+=.1*a),s=e+o):s=n>1?Math.sqrt(e*t):e,s>n}function o(e){var t,n=g.getSet(e),i=!1;"pending"!==n&&(i=m,n&&(t=g.setRes(n),g.applySetCandidate(t,e))),e[g.ns].evaled=i}function s(e,t){return e.res-t.res}function l(e,t,n){var i;return!n&&t&&(n=e[g.ns].sets,n=n&&n[n.length-1]),i=d(t,n),i&&(t=g.makeUrl(t),e[g.ns].curSrc=t,e[g.ns].curCan=i,i.res||K(i,i.set.sizes)),i}function d(e,t){var n,i,a;if(e&&t)for(a=g.parseSet(t),e=g.makeUrl(e),n=0;n<a.length;n++)if(e===g.makeUrl(a[n].url)){i=a[n];break}return i}function c(e,t){var n,i,a,r,o=e.getElementsByTagName("source");for(n=0,i=o.length;n<i;n++)a=o[n],a[g.ns]=!0,(r=a.getAttribute("srcset"))&&t.push({srcset:r,media:a.getAttribute("media"),type:a.getAttribute("type"),sizes:a.getAttribute("sizes")})}function u(e,t){function n(t){var n,i=t.exec(e.substring(u));if(i)return n=i[0],u+=n.length,n}function a(){var e,n,i,a,s,l,d,c,u,f=!1,h={};for(a=0;a<o.length;a++)s=o[a],l=s[s.length-1],d=s.substring(0,s.length-1),c=parseInt(d,10),u=parseFloat(d),H.test(d)&&"w"===l?((e||n)&&(f=!0),0===c?f=!0:e=c):W.test(d)&&"x"===l?((e||n||i)&&(f=!0),u<0?f=!0:n=u):H.test(d)&&"h"===l?((i||n)&&(f=!0),0===c?f=!0:i=c):f=!0;f||(h.url=r,e&&(h.w=e),n&&(h.d=n),i&&(h.h=i),i||n||e||(h.d=1),1===h.d&&(t.has1x=!0),h.set=t,p.push(h))}for(var r,o,s,l,d,c=e.length,u=0,p=[];;){if(n(q),u>=c)return p;r=n(z),o=[],","===r.slice(-1)?(r=r.replace(U,""),a()):function(){for(n(L),s="",l="in descriptor";;){if(d=e.charAt(u),"in descriptor"===l)if(i(d))s&&(o.push(s),s="",l="after descriptor");else{if(","===d)return u+=1,s&&o.push(s),void a();if("("===d)s+=d,l="in parens";else{if(""===d)return s&&o.push(s),void a();s+=d}}else if("in parens"===l)if(")"===d)s+=d,l="in descriptor";else{if(""===d)return o.push(s),void a();s+=d}else if("after descriptor"===l)if(i(d));else{if(""===d)return void a();l="in descriptor",u-=1}u+=1}}()}}function p(e){var t,n,a,r,o,s,l=/^(?:[+-]?[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?(?:ch|cm|em|ex|in|mm|pc|pt|px|rem|vh|vmin|vmax|vw)$/i,d=/^calc\((?:[0-9a-z \.\+\-\*\/\(\)]+)\)$/i;for(n=function(e){function t(){r&&(o.push(r),r="")}function n(){o[0]&&(s.push(o),o=[])}for(var a,r="",o=[],s=[],l=0,d=0,c=!1;;){if(""===(a=e.charAt(d)))return t(),n(),s;if(c){if("*"===a&&"/"===e[d+1]){c=!1,d+=2,t();continue}d+=1}else{if(i(a)){if(e.charAt(d-1)&&i(e.charAt(d-1))||!r){d+=1;continue}if(0===l){t(),d+=1;continue}a=" "}else if("("===a)l+=1;else if(")"===a)l-=1;else{if(","===a){t(),n(),d+=1;continue}if("/"===a&&"*"===e.charAt(d+1)){c=!0,d+=2;continue}}r+=a,d+=1}}}(e),a=n.length,t=0;t<a;t++)if(r=n[t],o=r[r.length-1],function(e){return!!(l.test(e)&&parseFloat(e)>=0)||(!!d.test(e)||("0"===e||"-0"===e||"+0"===e))}(o)){if(s=o,r.pop(),0===r.length)return s;if(r=r.join(" "),g.matchesMedia(r))return s}return"100vw"}t.createElement("picture");var f,h,m,g={},v=!1,y=function(){},w=t.createElement("img"),b=w.getAttribute,_=w.setAttribute,C=w.removeAttribute,x=t.documentElement,E={},A={algorithm:""},S=navigator.userAgent,T=/rident/.test(S)||/ecko/.test(S)&&S.match(/rv\:(\d+)/)&&RegExp.$1>35,N="currentSrc",k=/\s+\+?\d+(e\d+)?w/,I=e.picturefillCFG,F="font-size:100%!important;",R=!0,O={},M={},D=e.devicePixelRatio,j={px:1,in:96},B=t.createElement("a"),P=!1,L=/^[ \t\n\r\u000c]+/,q=/^[, \t\n\r\u000c]+/,z=/^[^ \t\n\r\u000c]+/,U=/[,]+$/,H=/^\d+$/,W=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,Q=function(e,t,n,i){e.addEventListener?e.addEventListener(t,n,i||!1):e.attachEvent&&e.attachEvent("on"+t,n)},V=function(e){var t={};return function(n){return n in t||(t[n]=e(n)),t[n]}},$=function(){var e=function(){for(var e=arguments,t=0,n=e[0];++t in e;)n=n.replace(e[t],e[++t]);return n},t=V(function(t){return"return "+e((t||"").toLowerCase(),/\band\b/g,"&&",/,/g,"||",/min-([a-z-\s]+):/g,"e.$1>=",/max-([a-z-\s]+):/g,"e.$1<=",/calc([^)]+)/g,"($1)",/(\d+[\.]*[\d]*)([a-z]+)/g,"($1 * e.$2)",/^(?!(e.[a-z]|[0-9\.&=|><\+\-\*\(\)\/])).*/gi,"")+";"});return function(e,n){var i;if(!(e in O))if(O[e]=!1,n&&(i=e.match(/^([\d\.]+)(em|vw|px)$/)))O[e]=i[1]*j[i[2]];else try{O[e]=new Function("e",t(e))(j)}catch(e){}return O[e]}}(),K=function(e,t){return e.w?(e.cWidth=g.calcListLength(t||"100vw"),e.res=e.w/e.cWidth):e.res=e.d,e},J=function(e){if(v){var n,i,a,r=e||{};if(r.elements&&1===r.elements.nodeType&&("IMG"===r.elements.nodeName.toUpperCase()?r.elements=[r.elements]:(r.context=r.elements,r.elements=null)),n=r.elements||g.qsa(r.context||t,r.reevaluate||r.reselect?g.sel:g.selShort),a=n.length){for(g.setupRun(r),P=!0,i=0;i<a;i++)g.fillImg(n[i],r);g.teardownRun(r)}}};e.console&&console.warn,N in w||(N="src"),E["image/jpeg"]=!0,E["image/gif"]=!0,E["image/png"]=!0,E["image/svg+xml"]=t.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),g.ns=("pf"+(new Date).getTime()).substr(0,9),g.supSrcset="srcset"in w,g.supSizes="sizes"in w,g.supPicture=!!e.HTMLPictureElement,g.supSrcset&&g.supPicture&&!g.supSizes&&function(e){w.srcset="data:,a",e.src="data:,a",g.supSrcset=w.complete===e.complete,g.supPicture=g.supSrcset&&g.supPicture}(t.createElement("img")),g.supSrcset&&!g.supSizes?function(){var e="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",n=t.createElement("img"),i=function(){2===n.width&&(g.supSizes=!0),h=g.supSrcset&&!g.supSizes,v=!0,setTimeout(J)};n.onload=i,n.onerror=i,n.setAttribute("sizes","9px"),n.srcset=e+" 1w,data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw== 9w",n.src=e}():v=!0,g.selShort="picture>img,img[srcset]",g.sel=g.selShort,g.cfg=A,g.DPR=D||1,g.u=j,g.types=E,g.setSize=y,g.makeUrl=V(function(e){return B.href=e,B.href}),g.qsa=function(e,t){return"querySelector"in e?e.querySelectorAll(t):[]},g.matchesMedia=function(){return e.matchMedia&&(matchMedia("(min-width: 0.1em)")||{}).matches?g.matchesMedia=function(e){return!e||matchMedia(e).matches}:g.matchesMedia=g.mMQ,g.matchesMedia.apply(this,arguments)},g.mMQ=function(e){return!e||$(e)},g.calcLength=function(e){var t=$(e,!0)||!1;return t<0&&(t=!1),t},g.supportsType=function(e){return!e||E[e]},g.parseSize=V(function(e){var t=(e||"").match(/(\([^)]+\))?\s*(.+)/);return{media:t&&t[1],length:t&&t[2]}}),g.parseSet=function(e){return e.cands||(e.cands=u(e.srcset,e)),e.cands},g.getEmValue=function(){var e;if(!f&&(e=t.body)){var n=t.createElement("div"),i=x.style.cssText,a=e.style.cssText;n.style.cssText="position:absolute;left:0;visibility:hidden;display:block;padding:0;border:none;font-size:1em;width:1em;overflow:hidden;clip:rect(0px, 0px, 0px, 0px)",x.style.cssText=F,e.style.cssText=F,e.appendChild(n),f=n.offsetWidth,e.removeChild(n),f=parseFloat(f,10),x.style.cssText=i,e.style.cssText=a}return f||16},g.calcListLength=function(e){if(!(e in M)||A.uT){var t=g.calcLength(p(e));M[e]=t||j.width}return M[e]},g.setRes=function(e){var t;if(e){t=g.parseSet(e);for(var n=0,i=t.length;n<i;n++)K(t[n],e.sizes)}return t},g.setRes.res=K,g.applySetCandidate=function(e,t){if(e.length){var n,i,a,o,d,c,u,p,f,h=t[g.ns],m=g.DPR;if(c=h.curSrc||t[N],u=h.curCan||l(t,c,e[0].set),u&&u.set===e[0].set&&((f=T&&!t.complete&&u.res-.1>m)||(u.cached=!0,u.res>=m&&(d=u))),!d)for(e.sort(s),o=e.length,d=e[o-1],i=0;i<o;i++)if(n=e[i],n.res>=m){a=i-1,d=e[a]&&(f||c!==g.makeUrl(n.url))&&r(e[a].res,n.res,m,e[a].cached)?e[a]:n;break}d&&(p=g.makeUrl(d.url),h.curSrc=p,h.curCan=d,p!==c&&g.setSrc(t,d),g.setSize(t))}},g.setSrc=function(e,t){var n;e.src=t.url,"image/svg+xml"===t.set.type&&(n=e.style.width,e.style.width=e.offsetWidth+1+"px",e.offsetWidth+1&&(e.style.width=n))},g.getSet=function(e){var t,n,i,a=!1,r=e[g.ns].sets;for(t=0;t<r.length&&!a;t++)if(n=r[t],n.srcset&&g.matchesMedia(n.media)&&(i=g.supportsType(n.type))){"pending"===i&&(n=i),a=n;break}return a},g.parseSets=function(e,t,n){var i,a,r,o,s=t&&"PICTURE"===t.nodeName.toUpperCase(),l=e[g.ns];(void 0===l.src||n.src)&&(l.src=b.call(e,"src"),l.src?_.call(e,"data-pfsrc",l.src):C.call(e,"data-pfsrc")),(void 0===l.srcset||n.srcset||!g.supSrcset||e.srcset)&&(i=b.call(e,"srcset"),l.srcset=i,o=!0),l.sets=[],s&&(l.pic=!0,c(t,l.sets)),l.srcset?(a={srcset:l.srcset,sizes:b.call(e,"sizes")},l.sets.push(a),(r=(h||l.src)&&k.test(l.srcset||""))||!l.src||d(l.src,a)||a.has1x||(a.srcset+=", "+l.src,a.cands.push({url:l.src,d:1,set:a}))):l.src&&l.sets.push({srcset:l.src,sizes:null}),l.curCan=null,l.curSrc=void 0,l.supported=!(s||a&&!g.supSrcset||r&&!g.supSizes),o&&g.supSrcset&&!l.supported&&(i?(_.call(e,"data-pfsrcset",i),e.srcset=""):C.call(e,"data-pfsrcset")),l.supported&&!l.srcset&&(!l.src&&e.src||e.src!==g.makeUrl(l.src))&&(null===l.src?e.removeAttribute("src"):e.src=l.src),l.parsed=!0},g.fillImg=function(e,t){var n,i=t.reselect||t.reevaluate;e[g.ns]||(e[g.ns]={}),n=e[g.ns],(i||n.evaled!==m)&&(n.parsed&&!t.reevaluate||g.parseSets(e,e.parentNode,t),n.supported?n.evaled=m:o(e))},g.setupRun=function(){P&&!R&&D===e.devicePixelRatio||a()},g.supPicture?(J=y,g.fillImg=y):function(){var n,i=e.attachEvent?/d$|^c/:/d$|^c|^i/,a=function(){var e=t.readyState||"";r=setTimeout(a,"loading"===e?200:999),t.body&&(g.fillImgs(),(n=n||i.test(e))&&clearTimeout(r))},r=setTimeout(a,t.body?9:99),o=x.clientHeight,s=function(){R=Math.max(e.innerWidth||0,x.clientWidth)!==j.width||x.clientHeight!==o,o=x.clientHeight,R&&g.fillImgs()};Q(e,"resize",function(e,t){var n,i,a=function(){var r=new Date-i;r<t?n=setTimeout(a,t-r):(n=null,e())};return function(){i=new Date,n||(n=setTimeout(a,t))}}(s,99)),Q(t,"readystatechange",a)}(),g.picturefill=J,g.fillImgs=J,g.teardownRun=y,J._=g,e.picturefillCFG={pf:g,push:function(e){var t=e.shift();"function"==typeof g[t]?g[t].apply(g,e):(A[t]=e[0],P&&g.fillImgs({reselect:!0}))}};for(;I&&I.length;)e.picturefillCFG.push(I.shift());e.picturefill=J,"object"==typeof module&&"object"==typeof module.exports?module.exports=J:"function"==typeof define&&define.amd&&define("picturefill",function(){return J}),g.supPicture||(E["image/webp"]=function(t,n){var i=new e.Image;return i.onerror=function(){E[t]=!1,J()},i.onload=function(){E[t]=1===i.width,J()},i.src=n,"pending"}("image/webp","data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA=="))}(window,document),Date.now||(Date.now=function(){"use strict";return(new Date).getTime()}),function(e){"use strict";var t,n=function(){},i=[];e.console=e.console||{},t=e.console,t.log||(t.log=n),t.debug||(t.debug=t.log),t.error||(t.error=t.log),t.info||(t.info=t.log),t.warn||(t.warn=t.log),t.trace||(t.trace=n),t.group||(t.group=function(e){"string"!=typeof e&&(e=Number(i.length+1).toString()),i.push(e),t.log("---- START GROUP: "+e)},t.groupCollapsed=t.group,t.groupEnd=function(){t.log("---- END GROUP: "+(i.length>0?i.pop():"???"))})}(window),function(e){"use strict";var t,n,i,a,r,o,s,l,d,c=[],u=[],p=null,f=function(){},h=function(){},m=[],g=!1,v=!1;if(void 0===e.performance&&(e.performance={}),e._perfRefForUserTimingPolyfill=e.performance,e.performance.userTimingJsNow=!1,e.performance.userTimingJsNowPrefixed=!1,e.performance.userTimingJsUserTiming=!1,e.performance.userTimingJsUserTimingPrefixed=!1,e.performance.userTimingJsPerformanceTimeline=!1,e.performance.userTimingJsPerformanceTimelinePrefixed=!1,"function"!=typeof e.performance.now){for(e.performance.userTimingJsNow=!0,u=["webkitNow","msNow","mozNow"],s=0;s<u.length;s++)if("function"==typeof e.performance[u[s]]){e.performance.now=e.performance[u[s]],e.performance.userTimingJsNowPrefixed=!0;break}t=+new Date,e.performance.timing&&e.performance.timing.navigationStart?t=e.performance.timing.navigationStart:"undefined"!=typeof process&&"function"==typeof process.hrtime&&(t=process.hrtime(),e.performance.now=function(){var e=process.hrtime(t);return 1e3*e[0]+1e-6*e[1]}),"function"!=typeof e.performance.now&&(Date.now?e.performance.now=function(){return Date.now()-t}:e.performance.now=function(){return+new Date-t})}if(d=e.performance.now(),"function"!=typeof e.performance.getEntries||"function"!=typeof e.performance.mark){for("function"==typeof e.performance.getEntries&&"function"!=typeof e.performance.mark&&(v=!0),e.performance.userTimingJsPerformanceTimeline=!0,c=["webkit","moz"],u=["getEntries","getEntriesByName","getEntriesByType"],s=0;s<u.length;s++)for(l=0;l<c.length;l++)p=c[l]+u[s].substr(0,1).toUpperCase()+u[s].substr(1),"function"==typeof e.performance[p]&&(e.performance[u[s]]=e.performance[p],e.performance.userTimingJsPerformanceTimelinePrefixed=!0);f=function(e){m.push(e),"measure"===e.entryType&&(g=!0)},r=function(){g&&(m.sort(function(e,t){return e.startTime-t.startTime}),g=!1)},h=function(e,t){for(s=0;s<m.length;)m[s].entryType!==e?s++:void 0!==t&&m[s].name!==t?s++:m.splice(s,1)},("function"!=typeof e.performance.getEntries||v)&&(n=e.performance.getEntries,e.performance.getEntries=function(){var t;return r(),t=m.slice(0),v&&n&&(Array.prototype.push.apply(t,n.call(e.performance)),t.sort(function(e,t){return e.startTime-t.startTime})),t}),("function"!=typeof e.performance.getEntriesByType||v)&&(a=e.performance.getEntriesByType,e.performance.getEntriesByType=function(t){var n;if(void 0===t||"mark"!==t&&"measure"!==t)return v&&a?a.call(e.performance,t):[];for("measure"===t&&r(),n=[],s=0;s<m.length;s++)m[s].entryType===t&&n.push(m[s]);return n}),("function"!=typeof e.performance.getEntriesByName||v)&&(i=e.performance.getEntriesByName,e.performance.getEntriesByName=function(t,n){var a;if(n&&"mark"!==n&&"measure"!==n)return v&&i?i.call(e.performance,t,n):[];for(void 0!==n&&"measure"===n&&r(),a=[],s=0;s<m.length;s++)void 0!==n&&m[s].entryType!==n||m[s].name===t&&a.push(m[s]);return v&&i&&(Array.prototype.push.apply(a,i.call(e.performance,t,n)),a.sort(function(e,t){return e.startTime-t.startTime})),a})}if("function"!=typeof e.performance.mark){for(e.performance.userTimingJsUserTiming=!0,c=["webkit","moz","ms"],u=["mark","measure","clearMarks","clearMeasures"],s=0;s<u.length;s++)for(l=0;l<c.length;l++)p=c[l]+u[s].substr(0,1).toUpperCase()+u[s].substr(1),"function"==typeof e.performance[p]&&(e.performance[u[s]]=e.performance[p],e.performance.userTimingJsUserTimingPrefixed=!0);o={},e.performance.timing&&e.performance.timing.responseEnd||(o.responseEnd=[d]),"function"!=typeof e.performance.mark&&(e.performance.mark=function(t){var n=e.performance.now();if(void 0===t)throw new SyntaxError("Mark name must be specified");if(e.performance.timing&&t in e.performance.timing)throw new SyntaxError("Mark name is not allowed");o[t]||(o[t]=[]),o[t].push(n),f({entryType:"mark",name:t,startTime:n,duration:0})}),"function"!=typeof e.performance.clearMarks&&(e.performance.clearMarks=function(e){e?o[e]=[]:o={},h("mark",e)}),"function"!=typeof e.performance.measure&&(e.performance.measure=function(t,n,i){var a,r=e.performance.now(),s=0;if(void 0===t)throw new SyntaxError("Measure must be specified");if(!n)return void f({entryType:"measure",name:t,startTime:0,duration:r});if(e.performance.timing&&n in e.performance.timing){if("navigationStart"!==n&&0===e.performance.timing[n])throw new Error(n+" has a timing of 0");s=e.performance.timing[n]-e.performance.timing.navigationStart}else{if(!(n in o))throw new Error(n+" mark not found");s=o[n][o[n].length-1]}if(a=r,i)if(a=0,e.performance.timing&&i in e.performance.timing){if("navigationStart"!==i&&0===e.performance.timing[i])throw new Error(i+" has a timing of 0");a=e.performance.timing[i]-e.performance.timing.navigationStart}else{if(!(i in o))throw new Error(i+" mark not found");a=o[i][o[i].length-1]}f({entryType:"measure",name:t,startTime:s,duration:a-s})}),"function"!=typeof e.performance.clearMeasures&&(e.performance.clearMeasures=function(e){h("measure",e)})}}(window),Array.prototype.find||(Array.prototype.find=function(e){"use strict";var t,n,i,a,r;if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(n=Object(this),i=n.length>>>0,a=arguments[1],t=0;t<i;t++)if(r=n[t],e.call(a,r,t,n))return r}),"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))?function(){"use strict";var e,t,n=document.createElement("_");n.classList.add("c1","c2"),n.classList.contains("c2")||(t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var n,i=arguments.length;for(n=0;n<i;n++)e=arguments[n],t.call(this,e)}},t("add"),t("remove")),n.classList.toggle("c3",!1),n.classList.contains("c3")&&(e=DOMTokenList.prototype.toggle,DOMTokenList.prototype.toggle=function(t,n){return 1 in arguments&&!this.contains(t)==!n?n:e.call(this,t)}),n=null}():function(e){"use strict";if("Element"in e){var t,n=e.Element.prototype,i=Object,a=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},r=Array.prototype.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},o=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},s=function(e,t){if(""===t)throw new o("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new o("INVALID_CHARACTER_ERR","String contains an invalid character");return r.call(e,t)},l=function(e){for(var t=a.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],i=0,r=n.length;i<r;i++)this.push(n[i]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},d=l.prototype=[],c=function(){return new l(this)};if(o.prototype=Error.prototype,d.item=function(e){return this[e]||null},d.contains=function(e){return e+="",-1!==s(this,e)},d.add=function(){var e,t=arguments,n=0,i=t.length,a=!1;do{e=t[n]+"",-1===s(this,e)&&(this.push(e),a=!0)}while(++n<i);a&&this._updateClassName()},d.remove=function(){var e,t,n=arguments,i=0,a=n.length,r=!1;do{for(e=n[i]+"",t=s(this,e);-1!==t;)this.splice(t,1),r=!0,t=s(this,e)}while(++i<a);r&&this._updateClassName()},d.toggle=function(e,t){e+="";var n=this.contains(e),i=n?!0!==t&&"remove":!1!==t&&"add";return i&&this[i](e),!0===t||!1===t?t:!n},d.toString=function(){return this.join(" ")},i.defineProperty){t={get:c,enumerable:!0,configurable:!0};try{i.defineProperty(n,"classList",t)}catch(e){-2146823252===e.number&&(t.enumerable=!1,i.defineProperty(n,"classList",t))}}else i.prototype.__defineGetter__&&n.__defineGetter__("classList",c)}}(self)),function(){"use strict";var e=null;window.CNN=window.CNN||{},window.CNN.eventListenerWithOptions=window.CNN.passiveEventListeners||{browserSupportsCaptureOption:!1,addListener:function(e,t,n,i){var a=i;window.CNN.eventListenerWithOptions.browserSupportsCaptureOption||(a=i.capture||!1),e.addEventListener(t,n,a)}};try{e=Object.defineProperty({},"capture",{get:function(){window.CNN.eventListenerWithOptions.browserSupportsCaptureOption=!0}}),window.addEventListener("test",null,e)}catch(e){}}();var CNN=window.CNN||{};CNN.Utils=CNN.Utils||function(e,t,n,i){"use strict";function a(e){var t=null;return"string"==typeof e&&Date.parse(e)?t=e:"number"==typeof e&&(t=new Date(Date.now()+e*E).toGMTString()),t}function r(e){var t,n=!0;for(t=0;t<arguments.length;t++)if(!function(e){return e!==i&&null!==e}(arguments[t])){n=!1;break}return n}function o(e){var t,n=!0;for(t=0;t<arguments.length;t++)if(!function(e){return"object"==typeof e&&null!==e}(arguments[t])){n=!1;break}return n}function s(e){var t,n=!0;for(t=0;t<arguments.length;t++)if(!function(e){return"string"==typeof e&&e.length>0}(arguments[t])){n=!1;break}return n}function l(){var e,t,i={},a=0;if(n.cookie)for(e=n.cookie.split("; ");a<e.length;a++)t=e[a].split("="),i[t[0]]=decodeURIComponent(t[1])||null;return i}function d(e){return null!==c(e)}function c(e){var t=new RegExp("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)"),i=n.cookie.match(t);return i?i.pop():null}function u(e,t,i,o,s,l){var d="";r(e)&&r(t)&&(i=a(i),o=r(o)?o:"/",s=r(s)?s:"",l=!!r(l)&&l,d+=e+"="+encodeURIComponent(t),r(i)&&(d+=";expires="+i),o&&(d+=";path="+o),s&&(d+=";domain="+s),l&&(d+="; secure"),n.cookie=d)}function p(e,t,n,i){u(e,t,n,"/",".cnn.com",i)}function f(e,t,i){var a="";r(e)&&(t=r(t)?t:"/",i=r(i)?i:"",a+=e+"=;expires="+A,t&&(a+=";path="+t),i&&(a+=";domain="+i),n.cookie=a)}function h(e){f(e,"/",".cnn.com")}function m(e,n,i){var a;if("string"==typeof e&&e.length>0&&"string"==typeof n)if(!1===CNN.hasLocalStorage)u(e,n,"session"===i?null:i,"/",".cnn.com",!1);else try{"session"===i?t.sessionStorage.setItem(e,n):(t.localStorage.setItem(e,n),"number"==typeof i?(a=new Date(Date.now()+i*E),t.localStorage.setItem(e+"__expires",a.getTime().toString(10))):"string"==typeof i&&"session"!==i&&(a=new Date(i),a.getTime()>Date.now()&&t.localStorage.setItem(e+"__expires",a.getTime().toString(10))))}catch(e){}}function g(e){if("string"==typeof e&&e.length>0){if(!1===CNN.hasLocalStorage)return d(e);try{if(r(t.sessionStorage.getItem(e))||r(t.localStorage.getItem(e+"__expires")))return!0}catch(e){}}return!1}function v(e){if("string"==typeof e&&e.length>0)if(!1===CNN.hasLocalStorage)f(e);else{try{t.localStorage.removeItem(e),t.localStorage.removeItem(e+"__expires")}catch(e){}try{t.sessionStorage.removeItem(e)}catch(e){}}}function y(e){var n,i=null;if("string"==typeof e&&e.length>0)try{!1===CNN.hasLocalStorage?i=c(e):null!==(n=t.localStorage.getItem(e+"__expires"))?parseInt(n,10)>Date.now()?i=t.localStorage.getItem(e):v(e):(i=t.sessionStorage.getItem(e),r(i)||(i=t.localStorage.getItem(e)))}catch(e){}return i}function w(e){var n,i,a,r,o,s,l=e;if("function"==typeof t.btoa)try{n=t.btoa(l)}catch(i){n=t.btoa(e.replace(/[^\w\s\!\@\#\$\%\^\&\*\(\)\-\=\+\.\,\\\;\:\'\"\?]/,"-"))}else{if(i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),a="",r="",(o=l.length%3)>0)for(;o<3;o++)r+="=",l+="\0";for(o=0;o<l.length;o+=3)o>0&&o/3*4%76==0&&(a+="\r\n"),s=(l.charCodeAt(o)<<16)+(l.charCodeAt(o+1)<<8)+l.charCodeAt(o+2),s=[s>>>18&63,s>>>12&63,s>>>6&63,63&s],a+=i[s[0]]+i[s[1]]+i[s[2]]+i[s[3]];n=a.substring(0,a.length-r.length)+r}return n}function b(e){var n,i,a,r,o,s,l,d,c=e;if("function"==typeof t.atob)try{n=t.atob(c)}catch(e){console.log(e.message,"\nString to decode: "+c)}else{for(i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),a={},d=0;d<i.length;d++)a[i[d]]=d;for(c=c.replace(new RegExp("[^"+i.join("")+"=]","g"),""),o="="===c.charAt(c.length-1)?"="===c.charAt(c.length-2)?"AA":"A":"",r="",c=c.substr(0,c.length-o.length)+o,s=0;s<c.length;s+=4)l=(a[c.charAt(s)]<<18)+(a[c.charAt(s+1)]<<12)+(a[c.charAt(s+2)]<<6)+a[c.charAt(s+3)],r+=String.fromCharCode(l>>>16&255,l>>>8&255,255&l);n=r.substring(0,r.length-o.length)}return n}function _(e){return e.replace("#","")}function C(){return t.Modernizr.phone}function x(){return/(Windows 7|Windows NT 6.1)/.test(navigator.userAgent)}var E=36e5,A="Thu, 01 Jan 1970 00:00:00 UTC";return CNN.hasLocalStorage=function(){var e="__test_it";try{return t.localStorage.setItem(e,e),t.localStorage.removeItem(e),t.sessionStorage.setItem(e,e),t.sessionStorage.removeItem(e),!0}catch(e){return!1}}(),{exists:r,existsObject:o,existsString:s,getCookies:l,getCookie:c,cookieExists:d,setCookie:u,deleteCookie:f,setCNNCookie:p,deleteCNNCookie:h,storeLocalValue:m,hasLocalValue:g,deleteLocalValue:v,getLocalValue:y,b64Encode:w,b64Decode:b,stripHash:_,isPhone:C,isWindows7:x}}(jQuery,window,document),CNN.Features=CNN.Features||{},CNN.VideoConfig=CNN.VideoConfig||{},CNN.VideoConfig.liveStream=CNN.VideoConfig.liveStream||{},CNN.GeoCheck=function(e,t){"use strict";function n(){return r}function i(e){var t,n,i,a,o,s=!0;if(null!==r&&!0===Array.isArray(e)&&e.length>0)for(i=r.country+":"+r.region,a=i+":"+r.city.toLowerCase(),t=0;t<e.length;t++)o=e[t],"-"===o.charAt(0)?(o=o.slice(1),n=!1):n=!0,"*"===o?s=n:"#"===o.charAt(0)?r.continent===o.slice(1)&&(s=n):(2===o.length&&r.country===o||5===o.length&&i===o||o.length>6&&a===o)&&(s=n);return s}function a(){return CNN._geoCheckReadyEvent}var r=null;return CNN._geoCheckReadyEvent=!1,e.fn.extend({onGeoCheckReady:function(n){"function"==typeof n&&(!0===CNN._geoCheckReadyEvent?n(e):e(t).on("geoCheckReady",{handler:n},function(t){t=t||{},"object"==typeof t.data&&null!==t.data&&"function"==typeof t.data.handler&&t.data.handler(e)}))},triggerGeoCheckReady:function(){CNN._geoCheckReadyEvent=!0,e(t).trigger("geoCheckReady")}}),function(){var n,i;i=CNN.Utils.getCookie("geoData"),null!==i&&(n=i.split("|"),n.length>4&&(r={city:n[0],region:n[1],postCode:n[2],country:n[3],continent:n[4]})),e(t).triggerGeoCheckReady()}(),{getData:n,inTarget:i,isReady:a}}(jQuery,document),CNN=window.CNN||{},CNN.AdsConfig=CNN.AdsConfig||{},CNN.AdsConfig.aisOverride?function(e,t){"use strict";var n=e.createElement("script"),i=e.getElementsByTagName("script")[0];n.type="text/javascript",n.src=("https:"===e.location.protocol?"https:":"http:")+t.AdsConfig.aisOverride,i.parentNode.insertBefore(n,i)}(document,window.CNN):(CNN.AdsConfig.amazon=CNN.AdsConfig.amazon||{},CNN.Features=CNN.Features||{},function(){var e=function(){return!1},t={addMetric:e,getMetricById:e,getMetricsByType:e,getMetricTypes:e};window.cnnad_haveCookie=function(e){return document.cookie&&(document.cookie.indexOf("; "+e+"=")>=0||0==document.cookie.indexOf(e+"="))},window.cnnad_readCookie=function(e){if(document.cookie){for(var t=document.cookie.split(";"),n=e+"=",i=0;i<t.length;i++){for(var a=t[i];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(n))return a.substring(n.length,a.length)}return null}},window.turner_getGuid=function(){return window.cnnad_readCookie("ug")},function(){function e(){function e(){var e=window.turner_getGuid();t=window.AdFuel.registerModule("GUID",{}),a("setting guid targeting",{guid:e}),t.addMetric({type:"modules",id:"GUID",data:{targeting:{guid:e}}}),window.AdFuel.addPageLevelTarget("guid",e)}window.AdFuel?e():document.addEventListener?document.addEventListener("AdFuelCreated",e,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",e)}var n=Object.prototype,i=n.toString,a=function(){};if(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e}(window.console)&&function(e){return"[object Function]"===i.call(e)}(window.console.log)&&"true"==function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}("debug")&&(a=function(){var e=["[AdFuelModule - Guid]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)}),window.cnnad_haveCookie("ugs"))e();else{var r=document,o=r.createElement("script"),s=r.getElementsByTagName("script")[0],l=/^(complete|loaded)$/,d=!1;o.type="text/javascript",o.async=!0,o.src="//www.ugdturner.com/xd.sjs",o.onload=o.onreadystatechange=function(){d||"readyState"in o&&l.test(o.readyState)||(o.onload=o.onreadystatechange=null,d=!0,e())},s.parentNode.insertBefore(o,s)}}()}(),function(){var e=function(){return!1},t={addMetric:e,getMetricById:e,getMetricsByType:e,getMetricTypes:e};window.cnnad_transactionID=null,window.cnnad_getTransactionID=function(){return window.cnnad_transactionID||(window.cnnad_transactionID=Math.round((new Date).getTime()/1e3)+""+Math.floor(9007199254740992*Math.random())),window.cnnad_transactionID},window.turner_getTransactionId=window.cnnad_getTransactionID,window.turner_getTransactionId(),function(){function e(){var e=window.turner_getTransactionId();t=AdFuel.registerModule("Transaction Id",{}),t.addMetric({type:"modules",id:"Transaction Id",data:{targeting:{transId:e}}}),window.AdFuel.addPageLevelTarget("transId",e)}var n=Object.prototype,i=n.toString;(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e})(window.console)&&function(e){return"[object Function]"===i.call(e)}(window.console.log)&&function(e){
e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);i&&i[1]}}("debug"),window.AdFuel?e():document.addEventListener?document.addEventListener("AdFuelCreated",e,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",e)}()}(),!0===CNN.Features.enableAdsConsole&&function(){function e(){location.hash.indexOf("doh")>=0?(G=!1,W&&u(),u()):location.hash.indexOf("afc")>=0?(G=!0,W&&u(),u()):W&&u()}function t(e,t,n){return e.addEventListener?e.addEventListener(t,n,!0):e.attachEvent?e.attachEvent("on"+t,n):void 0}function n(e,t,n){var i=document.createElement("div");i.style.width="48%",i.style.float="left",i.style.display="inline-block";var a=document.createElement("input");a.type="checkbox",a.name=e,a.id=e+"_"+t,a.style.float="left",a.style["margin-right"]="2px",a.style.position="relative",a.style.top="3px",a.value=t;var r=document.createElement("div");return r.style.width="calc(100% - 18px)",r.appendChild(document.createTextNode(n)),i.appendChild(a),i.appendChild(r),i}function a(e,t){var n=document.createElement(e);return n.appendChild(document.createTextNode(t)),n}function r(e){var t=document.createElement("button");return t.onclick=e.action,t.id=e.name,t.appendChild(document.createTextNode(e.value)),t.className="btn btn-sm btn-primary",t}function o(e,t){return e.data[2]<t.data[2]?-1:e.data[2]>t.data[2]?1:0}function s(e){return!!new RegExp(/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_]*)?\??(?:[\-\+=&;%@\.\w_]*)#?(?:[\.\!\/\\\w]*))?)/).test(e)}function l(){ae("Getting Viewport Dimensions");var e,t;return void 0!==window.innerWidth?(e=window.innerWidth,t=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!=document.documentElement.clientWidth?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):(e=document.getElementsByTagName("body")[0].clientWidth,t=document.getElementsByTagName("body")[0].clientHeight),re("Getting Viewport Dimensions"),[e,t]}function d(){ae("Getting Browser Information");var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],"IE "+(e[1]||"")):"Chrome"===n[1]&&null!=(e=t.match(/\b(OPR|Edge)\/(\d+)/))?e.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),re("Getting Browser Information"),n.join(" "))}function c(){if(null!==he)return he;ae("Getting Device Information"),oe=fe();var e=l();return he={availHeight:screen.availHeight,availLeft:screen.availLeft,availTop:screen.availTop,availWidth:screen.availWidth,colorDepth:screen.colorDepth,height:screen.height,orientation:{angle:screen.orientation?screen.orientation.angle:0,onchange:screen.orientation?screen.orientation.onchange:null,type:screen.orientation?screen.orientation.type:null},pixelDepth:screen.pixelDepth,width:screen.width,os:window.navigator.platform?window.navigator.platform:"Unknown",browser:d(),class:"Desktop",viewport:e.join("x")},oe.amazon.device&&(he.os="Amazon",oe.amazon.phone&&(he.class="Phone"),oe.amazon.tablet&&(he.class="Tablet")),oe.android.device&&(he.os="Android",oe.android.phone&&(he.class="Phone"),oe.android.tablet&&(he.class="Tablet")),oe.apple.device&&(he.os="iOS",oe.apple.ipod&&(he.class="iPod"),oe.apple.phone&&(he.class="Phone"),oe.apple.tablet&&(he.class="Tablet")),oe.windows.device&&(he.os="Windows",oe.windows.phone&&(he.class="Phone"),oe.windows.tablet&&(he.class="Tablet")),oe.other.blackberry&&(he.os="Blackberry",he.class="Phone"),oe.other.blackberry10&&(he.os="Blackberry10",he.class="Phone"),oe.other.chrome&&(he.os="Chrome",he.class="Phone"),oe.other.firefox&&(he.os="Firefox",he.class="Phone"),oe.other.opera&&(he.os="Opera",he.class="Phone"),U.addMetric({type:"modules",id:"User Sciences",data:he}),re("Getting Device Information"),he}function u(){if(W){var e=document.getElementsByTagName("head")[0],n=document.getElementsByTagName("body")[0],i=document.getElementById("material-icons-font"),a=document.getElementById("adfuel-console-stylesheet"),r=document.querySelector("div.adfuel-console-button-container"),o=document.querySelector("div.adfuel-console-filler"),s=document.querySelector("div.adfuel-console");e.removeChild(i),e.removeChild(a),n.removeChild(r),n.removeChild(o),n.removeChild(s),W=!1}else{var e=document.getElementsByTagName("head")[0],n=document.getElementsByTagName("body")[0],l="https:"===document.location.protocol,i=document.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=(l?"https:":"http:")+"//fonts.googleapis.com/icon?family=Material+Icons",i.id="material-icons-font";var a=document.createElement("link");a.rel="stylesheet",a.href=(l?"https:":"http:")+"//ssl.cdn.turner.com/ads/adfuel/modules/consoleTool-2.1.css",a.id="adfuel-console-stylesheet";var d=document.createElement("link");d.rel="stylesheet",d.href=(l?"https:":"http:")+"//ssl.cdn.turner.com/ads/adfuel/modules/dhtmlxgrid.css",d.id="adfuel-console-table-stylesheet";var r=document.createElement("div");r.className="adfuel-console-button-container adfuel-open-console-button-container";var c=document.createElement("a");c.className="adfuel-console-button";var u=document.createElement("i");u.className="adfuel-console-button-icon material-icons",u.innerHTML="view_module",u.innerText="view_module";var o=document.createElement("div");o.className="adfuel-console-filler";var s=document.createElement("div");s.className="adfuel-console",c.appendChild(u),r.appendChild(c),e.appendChild(i),e.appendChild(a),e.appendChild(d),n.appendChild(r),n.appendChild(o),n.appendChild(s),function(e){"use strict";var t=document,n=t.createElement("script"),i=t.getElementsByTagName("script")[0],a=/^(complete|loaded)$/,r=!1,o="https:"===document.location.protocol;n.type="text/javascript",n.async=!0,n.src=(o?"https:":"http:")+"//www.geoplugin.net/javascript.gp",n.onload=n.onreadystatechange=function(){r||"readyState"in n&&a.test(n.readyState)||(n.onload=n.onreadystatechange=null,r=!0,e())},i.parentNode.insertBefore(n,i)}(function(){var e,t,n,i,a,r=!1;window.geoplugin_countryCode&&(e=window.geoplugin_countryCode(),r=!0),window.geoplugin_city&&(t=window.geoplugin_city(),r=!0),window.geoplugin_region&&(n=window.geoplugin_region(),r=!0),window.geoplugin_latitude&&(i=window.geoplugin_latitude(),r=!0),window.geoplugin_longitude&&(a=window.geoplugin_longitude(),r=!0),1==r&&U.addMetric({type:"configuration",id:"actual_user_location",data:{city:t,region:n,country:e,latitude:i,longitude:a}})}),v(s),Q=t(c,"click",p),W=!0}}function p(){Q=null;var e=(document.getElementsByTagName("head")[0],document.getElementsByTagName("body")[0],document.querySelector("div.adfuel-console-filler")),t=document.querySelector("div.adfuel-console"),n=document.querySelector("div.adfuel-console-button-container"),i=document.querySelector("div#adfuel-close-console-button-container");n.style.display="none",i.style.display="inline-block",e.style.display="block",e.className=e.className+" resizable",t.style.display="inline-block",t.style.resize="both",t.className=t.className+" resizable",ne("Opening AdFuel Console."),g(document.getElementsByClassName("adfuel-console-tab-link-container")[0]),b(t),ne("Full Console: ",G),w(G?"configuration":"creative review")}function f(){window.open("http://docs.turner.com/display/DAD/AdFuel+Console+Documentation","ConsoleHelp")}function h(){if(J){var e=document.querySelectorAll(".adfuel-rendered"),t=e.length;for(i=0;i<t;i++){var n=e[i].id,a=document.getElementById(n);a.style.position="relative";var r=a.firstElementChild.firstElementChild?a.firstElementChild.firstElementChild.width:a.firstElementChild.width,o=a.firstElementChild.firstElementChild?a.firstElementChild.firstElementChild.height:a.firstElementChild.height;a.style.width=r+"px",a.style.height=o+"px";var s=n.substring(n.indexOf("_")+1),l=document.createElement("div"),d=document.createElement("p");d.innerHTML="Pos: "+s+"<br />Width: "+r+"<br />Height: "+o,l.className="pos_overlay",l.style.position="absolute",l.style.top="0",l.style.left="0",l.style.right="0",l.style.bottom="0",l.style.textAlign="left",l.style.padding="3px",l.style.fontFamily="Verdana",l.style.fontSize="12px",l.style.fontWeight="normal",l.style.lineHeight="12px",l.style.background="rgba(0,100,0,0.7)",l.style.color="#ffffff",l.style.zIndex="1000",l.appendChild(d),a.appendChild(l)}J=!1}else{var c=document.querySelectorAll(".pos_overlay"),t=c.length;for(i=0;i<t;i++)c[i].parentNode.removeChild(c[i]);J=!0}}function m(e){e=e.toString();var t=e.split(" "),n="";if(t.length>1){for(var i=0;i<t.length;i++){var a=t[i].charAt(0).toUpperCase()+t[i].slice(1);t[i]=a}n=t.join(" ")}else n=e.charAt(0).toUpperCase()+e.slice(1);return n}function g(e){function n(e){w(e.srcElement?e.srcElement.rel:e.target.rel)}if(ne("Building Console Tabs...",e),e||(e=document.getElementsByClassName("adfuel-console-tab-link-container")[0]),!e)return ne("Error: No tab link container."),!1;var i=document.getElementsByClassName("adfuel-console-tab-list")[0];if(i){i.parentNode.removeChild(i)}var a=document.createElement("ul");a.className="adfuel-console-tab-list",ge=U.getMetricTypes(),ge.sort();for(var r=0;r<ge.length;r++)if(0!=ge[r].indexOf("_")&&"watchers"!==ge[r]){var o=document.createElement("li");ne("Full Console: ",G),o.style.display=G?"inline-block":"none","creative review"==ge[r]&&(o.style.display="none"),o.style.marginLeft="15px",o.style.marginRight="auto",o.style.fontSize=".8em",o.style.paddingBottom="10px";var s=document.createElement("a");s.className="afcTab",0==r&&(s.className="activeAFCTab afcTab"),s.rel=ge[r],t(s,"click",n),s.appendChild(document.createTextNode(m(ge[r]))),o.appendChild(s),a.appendChild(o)}e.appendChild(a)}function v(e){var n=document.createElement("div");n.className="adfuel-console-button-container",n.id="adfuel-close-console-button-container";var i=document.createElement("a");i.className="adfuel-console-button-plain",i.id="adfuel-close-console-button";var a=document.createElement("i");a.className="adfuel-console-button-icon material-icons",a.innerHTML=a.innerText="close";var r=document.createElement("a");r.className="adfuel-console-button-plain",r.id="adfuel-resize-console-button";var o=document.createElement("i");o.className="adfuel-console-button-icon material-icons",o.innerHTML=o.innerText="help_outline";var s=document.createElement("a");s.className="adfuel-console-button-plain",s.id="adfuel-show-overlay-button";var l=document.createElement("i");l.className="adfuel-console-button-icon material-icons",l.innerHTML=l.innerText="vignette";var d=document.createElement("div");d.id="adfuel-console-banner";var c=document.createElement("div");c.className="adfuel-console-tab-link-container",s.appendChild(l),r.appendChild(o),i.appendChild(a),n.appendChild(s),n.appendChild(r),n.appendChild(i),V=t(i,"click",M),_consoleHelpButtonHandler=t(r,"click",f),$=t(s,"click",h),d.appendChild(n);var u=document.createElement("div");u.className="adfuel-console-banner-title",ne("Full Console: ",G);var p=G?"AdFuel Console Tool":"AdFuel Creative Review";u.appendChild(document.createTextNode(p)),d.appendChild(u),d.appendChild(c),e.appendChild(d)}function y(e,t){if(e.type){K.indexOf(e.type)<0&&(g(),K.push(e.type));var n=document.getElementById("adfuel-console-panel-"+e.type.replace(/ /g,"-"));if("counts"==e.type)x(n);else if("creative review"==e.type){var i=parseInt(he.viewport.split("x")[0]);i>800&&i<1250?N(n):i<800?T(n):S("Desktop"==he.class?n:n)}else"timeline"==e.type?_(n):O(n,!0);t&&t()}}function w(e){var t,n=document.getElementsByClassName("afcTab"),i=document.querySelector("li > a[rel='"+e+"']");for(t=0;t<n.length;t++)n[t].className=n[t].className.replace("activeAFCTab","");i&&(i.className=i.className+" activeAFCTab");var a=document.getElementById("adfuel-console-panel-"+e.replace(/ /g,"-"));if(!a){var r=e,o=document.createElement("div"),s=document.getElementsByClassName("adfuel-console")[0];o.id="adfuel-console-panel-"+r.replace(/ /g,"-"),o.style.display="none",o.className="adfuel-console-panel adfuel-console-content",o.style.width="100%",o.style.padding="0",o.style.margin="0",o.style.height="80%",o.style.minHeight="250px",o.style.overflowY="auto",s.appendChild(o),a=o}if("timeline"==e){_(a,E())}var l=document.getElementsByClassName("adfuel-console-panel");for(t=0;t<l.length;t++)l[t].style.display="none";a.style.display="block",ne("Full Console: ",G),G&&"configuration"==e&&C({target:{dataset:{panel:a.id,tab:"adfuel_initialization_options",content:"adfuel-console-panel-configuration-tabContent-adfuel_initialization_options"}}})}function b(e){if(e||(e=document.getElementsByClassName("adfuel-console")[0]),!e)return ne("Error: No AdFuel-Console container."),!1;for(var t=0;t<ge.length;t++)if(0!=ge[t].indexOf("_")){var n=ge[t],i=document.createElement("div");if(i.id="adfuel-console-panel-"+n.replace(/ /g,"-"),i.style.display="none",i.className="adfuel-console-panel adfuel-console-content",i.style.width="100%",i.style.padding="0",i.style.margin="0",i.style.height="80%",i.style.minHeight="250px",e.appendChild(i),ne("Full Console: ",G),ne("Panel Name: ",n),!G&&"creative review"!=n)continue;switch(n){case"creative review":var a=parseInt(he.viewport.split("x")[0]);a>800&&a<1250?N(i):a<800?T(i):S("Desktop"==he.class?i:i);break;case"counts":x(i);break;case"configuration":case"modules":case"page":case"registries":case"requests":case"slots":i.style.display="block",O(i,!0);break;case"timeline":var r=E();_(i,r);break;default:O(i,!0)}}}function _(e,t){if(e&&t){var n=document.createElement("div");n.id="gridbox",n.style.width="100%",n.style.height="95%",n.style.backgroundColor="#ABABAB",n.style.margin="0",n.style.padding="0",n.style.position="relative",n.style.top="-12px";try{e.removeChild(n)}catch(e){}e.style.height="90%",e.appendChild(n);try{q=new dhtmlXGridObject("gridbox"),q.setImagePath(("https:"===document.location.protocol?"https:":"http:")+"//ssl.cdn.turner.com/ads/adfuel/modules/"),n.style.position="relative",n.style.top="-12px",n.style.left="2px",q.setHeader("Name, Type, Timestamp, Start, End, Time From Previous, Time From Initial, Duration,"),q.setInitWidths("350,100,200,200,200,150,150,100"),q.setColAlign("left, left, left, left, left, left, left, left"),q.setColTypes("ro,ro,ro,ro,ro,ro,ro,ro"),q.enableColumnAutoSize(!0),q.enableDragAndDrop(!1),q.init(),q.clearAll(),q.parse(t,"json")}catch(e){}}}function C(e){var t=e.target,n=t.dataset,i=n.panel,a=(n.tab,n.content),r=document.querySelectorAll("div#"+i+" .adfuel-console-panel-tab-content"),o=document.querySelectorAll("div#"+i+" ul.nav-stacked li"),s=document.querySelector("div#"+i+" ul.nav-stacked li#"+n.tab.replace(/ /g,"_")),l=0;for(l=0;l<r.length;l++)r[l].style.display="none";for(l=0;l<o.length;l++)o[l].className="";return s&&(s.className=s.className+" active"),document.getElementById(a).style.display="block",!1}function x(e){if(e){e.innerHTML="";var t=document.createElement("div");t.style.width="100%",t.style.height="100%",t.style.display="inline-block",t.style.padding="5px",t.style.margin="0";var n=document.createElement("ul");n.className="nav nav-pills nav-stacked flex-column",n.style.listStyleType="none",n.style.margin="0",n.style.padding="5px",n.style.height="100%",n.style.minHeight="250px",n.style.overflow="auto";var i=[];U.metrics&&U.metrics.counts&&(i=Object.getOwnPropertyNames(U.metrics.counts));for(var a=0;a<i.length;a++){var r=document.createElement("li");r.style.margin="5px",r.style.padding="5px",r.style.fontSize="14px",r.style.width="15%",r.style.display="inline-block",r.style.float="left",r.style.borderRight="solid 1px #BCBCBC",r.id=i[a].replace(/ /g,"_"),r.innerHTML=m(i[a].replace(/_/g," "));var o=document.createElement("span");o.style.float="right",o.className="badge badge-pill badge-primary",o.style.width="15%",o.innerHTML=U.metrics.counts[i[a]],r.appendChild(o),n.appendChild(r)}t.appendChild(n),e.appendChild(t)}}function E(){var e=["connection_start","document_request_start","domContentLoaded","dom_load_start","domain_lookup_start","fetch_start","navigation_start","window_load"],t=["_rendered","adfuel_initialized","building_gpt_slots","dispatch_queue"],n=["request_to_dfp"],i=["_preQueue","_postQueue","_preDispatch","_postDispatch","_preRefresh","_postRefresh"],a=U.metrics.timeline,r="",s={rows:[]};for(var l in a)if(a.hasOwnProperty(l)){if(e.indexOf(l)>=0)r="Browser";else if(t.indexOf(l)>=0||l.indexOf("_rendered")>0||l.indexOf("building_gpt_slot_")>=0)r="AdFuel";else if(n.indexOf(l)>=0)r="DFP";else{for(var d=0;d<i.length;d++)l.indexOf(i[d])>0&&(r="Module");""==r&&(r="UNKNOWN")}for(var c=0;c<a[l].length;c++){var u,p,f=a[l][c];if(f.timestamp){var h=new Date;h.setTime(f.timestamp),u=h.toISOString().split("T"),u[0],p=u[1].replace("Z",""),h=p;for(var g=l.split("_"),c=0;c<g.length;c++)g[c]=m(g[c]);var v=g.join(" "),y={id:l+"_"+c,data:[v,r,a[l][0].timestamp,h,"","","",0]};s.rows.push(y)}else if(f.start&&f.end){var w=new Date;w.setTime(f.start),u=w.toISOString().split("T"),u[0],p=u[1].replace("Z",""),w=p;var b=new Date;b.setTime(f.end),u=b.toISOString().split("T"),u[0],p=u[1].replace("Z",""),b=p;for(var _=parseInt(f.end)-parseInt(f.start)+"ms",g=l.split("_"),c=0;c<g.length;c++)g[c]=m(g[c]);var v=g.join(" "),y={id:l+"_"+c,data:[v,r,a[l][0].start,w,b,"","",_],endStamp:f.end};s.rows.push(y)}else if(f.start){var w=new Date;w.setTime(f.start),u=w.toISOString().split("T"),u[0],p=u[1].replace("Z",""),w=p;for(var g=l.split("_"),c=0;c<g.length;c++)g[c]=m(g[c]);var v=g.join(" "),y={id:l+"_"+c,data:[v,r,a[l][0].start,w,"","","",""]};s.rows.push(y)}}}if(s.rows.length>0){s.rows.sort(o);for(var C=s.rows[0].data[2],x=1;x<s.rows.length;x++){var E=s.rows[x],A=s.rows[x-1].data[2];E.data[5]=E.data[2]-A+"ms",E.data[6]=E.data[2]-C+"ms"}var S=s.rows[s.rows.length-1],T=S.endStamp?S.endStamp:S.data[2],N=T-C+"ms",y={id:"elapsed_time",data:["Total Elapsed Time","","","","","","",N]};s.rows.push(y)}return s}function A(e,n){var i=document.createElement("div");i.style.width="27%",i.style.maxWidth="400px",i.style.height="100%",i.style.display="inline-block",i.style.margin="0",i.style.float="left",i.style.borderRight="solid 1px #0052e7",e.appendChild(i);var a=document.createElement("ul");a.className="nav nav-pills nav-stacked flex-column",a.style.listStyleType="none",a.style.margin="0",a.style.padding="5px",a.style.height="100%",a.style.minHeight="250px",a.style.overflow="auto";for(var r=0;r<n.length;r++){isNaN(parseInt(n[r]))||(n[r]="request_"+n[r]);var o=document.createElement("div");o.id=e.id+"-tabContent-"+n[r].replace(/ /g,"_"),o.className="adfuel-console-panel-tab-content",o.style.width="72%",o.style.height="100%",o.style.display="inline-block",o.style.padding="0",o.style.margin="5px",o.style.float="left",0!=r&&(o.style.display="none");var s=document.createElement("li");0==r&&(s.className=s.className+" active"),s.id=n[r].replace(/ /g,"_");var l=document.createElement("a");l.rel=n[r],l.dataset.panel=e.id,l.dataset.tab=n[r],l.dataset.content=o.id,l.innerHTML=m(n[r].replace(/_/g," ")),s.appendChild(l),a.appendChild(s),R(o,n[r]),t(l,"click",C),e.appendChild(o)}i.appendChild(a)}function S(e,t){function i(e,t,i){for(var o=0;o<i.length;o++){var s=i[o];switch(s.type){case"textarea":var l=a("div",s.label+":"+(!0===s.required?" *":""));l.style.fontWeight="bolder",e.appendChild(l),e.appendChild(s.element=document.createElement("textarea")),s.element.name=s.name||"",!0===s.required&&(s.element.attributes.required="required"),s.element.width="95%",s.element.cols="60",s.element.rows="5";break;case"input":var d=a("div",s.label+": "+(!0===s.required?" *":""));d.className=d.className+" fixed",d.style.fontWeight="bolder",d.style.marginRight="5px",e.appendChild(d),s.element=document.createElement("input"),s.element.name=s.name||"",!0===s.required&&s.element.setAttribute("required","required"),e.appendChild(s.element);var c=document.createElement("div");c.style.clear="both",e.appendChild(c),e.appendChild(document.createElement("br"));break;case"listLabel":var u=a("div",s.label+":"+(!0===s.required?" *":""));u.style.fontWeight="bolder",e.appendChild(u);break;case"list":for(var p=document.createElement("div"),f=0;f<s.items.length;f++){var h=s.items[f],m=n(h.name,h.value,h.label),g=m.firstChild;s.items[f].element=g,p.appendChild(m)}e.appendChild(p);var c=document.createElement("div");c.style.clear="both",e.appendChild(c),e.appendChild(document.createElement("br"));break;case"select":console.debug("Building Select Element",s);var v=a("div",s.label+": "+(!0===s.required?" *":""));v.style.fontWeight="bolder",e.appendChild(v),s.element=document.createElement("select"),s.element.name=s.name;for(var y=0;y<s.options.length;y++){console.debug("Building Select Option Element",s.options[y]);var w=a("option",s.options[y].text);w.value=s.options[y].value,s.element.appendChild(w)}e.appendChild(s.element);break;case"button":e.appendChild(r(s));break;case"fileUpload":if(Y){var d=a("div",s.label+": "+(!0===s.required?" *":""));d.className=d.className+" fixed",d.style.fontWeight="bolder",d.style.marginRight="5px",e.appendChild(d),s.element=document.createElement("input"),s.element.name=s.name||"",s.element.type="file",s.element.accept="image/*",e.appendChild(s.element);var c=document.createElement("div");c.style.clear="both",e.appendChild(c),e.appendChild(document.createElement("br"))}}}t.appendChild(e)}function o(e){""!==e?(_.style.display="inline-block",_.innerHTML=e):_.style.display="none",window.setTimeout(function(){_.style.display="none"},3e3)}function s(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}if(ne("Building Desktop Creative Review Form"),t=t||1,e){var l=[{type:"input",name:"Name",value:"",label:"Your Name",required:!0},{type:"input",name:"Email",value:"",label:"Your Email",required:!0},{type:"fileUpload",name:"Screenshot",value:"",label:"Upload Screenshot",required:!1}],d=[{type:"listLabel",name:"Reason",label:"What is the issue you are reporting?",required:!1},{type:"list",name:"Issue(s)",required:!1,items:[{type:"checkbox",name:"Issue",value:"block list violation",label:"Ad violates site block list",required:!1},{type:"checkbox",name:"Issue",value:"video plays in display ad",label:"Video plays in display ad",required:!1},{type:"checkbox",name:"Issue",value:"ad disrupts content",label:"Ad disrupts content",required:!1},{type:"checkbox",name:"Issue",value:"ad incorrectly sized",label:"Ad incorrectly sized",required:!1},{type:"checkbox",name:"Issue",value:"download initiated",label:"Ad attempts to initiate download",required:!1},{type:"checkbox",name:"Issue",value:"blank ad",label:"Blank ad",required:!1},{type:"checkbox",name:"Issue",value:"low quality",label:"Low-quality ad",required:!1},{type:"checkbox",name:"Issue",value:"audio autostarts",label:"Audio starts automatically",required:!1},{type:"checkbox",name:"Issue",value:"broken ad",label:"Broken ad",required:!1}]},{type:"select",name:"Brand",label:"What is brand is affected by the issue you are reporting?",required:!0,options:[{text:"",value:"placeholder"},{text:"Adult Swim",value:"Adult Swim"},{text:"Bleacher Report",value:"Bleacher"},{text:"Cartoon Network",value:"Cartoon Network"},{text:"CNN",value:"CNN"},{text:"CNN Arabic",value:"CNN Arabic"},{text:"CNN Espanol",value:"CNN Espanol"},{text:"CNN International",value:"CNN International"},{text:"CNN Money",value:"CNN Money"},{text:"E-League",value:"ELEAGUE"},{text:"Great Big Story",value:"Great Big Story"},{text:"HLN",value:"HLN"},{text:"NBA",value:"NBA"},{text:"NBA International",value:"NBA International"},{text:"NCAA",value:"NCAA"},{text:"PGA",value:"PGA"},{text:"TBS",value:"TBS"},{text:"TCM",value:"TCM"},{text:"Team Coco",value:"Team Coco"},{text:"TNT",value:"TNT"},{text:"TruTV",value:"truTV"}]}],c=[{type:"textarea",name:"Comments",label:"Please describe the issue you are reporting",required:!0}];e.innerHTML="",e.style.padding="0";var u=document.createElement("div");u.style.width="100%",u.style.height="100%",u.style.display="inline-block",u.style.padding="5px",u.style.margin="0";var p=document.createElement("div");p.style.width="99%",p.style.borderBottom="solid 1px black";var f=document.createElement("p");f.style.padding="0",f.style.fontWeight="bolder",f.style.margin="auto",f.innerHTML="You can report an issue on this page by submitting the information below. A copy of the report will be sent to the email address specified.<br /><span style='color: red'>* Denotes required fields.</span>",p.appendChild(f),u.appendChild(p);var h=document.createElement("form");h.style.padding="0",h.style.margin="0",u.appendChild(h);var m=document.createElement("div");switch(t){case 1:m.style.width="25%",m.style.height="60%",m.style.display="inline-block",m.style.padding="5px 5px",m.style.margin="0",m.style.float="left";break;case 2:m.style.width="50%",m.style.height="100%",m.style.minHeight="160px",m.style.display="inline-block",m.style.padding="5px 5px",m.style.margin="0",m.style.float="left",m.style.fontSize="12px",m.id="cr_panel_1";break;case 3:m.style.width="100%",m.style.height="100%",m.style.minHeight="160px",m.style.display="inline-block",m.style.padding="5px 5px",m.style.margin="0",m.style.float="left",m.style.fontSize="12px",m.id="cr_panel_1"}i(m,h,l);var g=document.createElement("div");switch(t){case 1:g.style.width="39%",g.style.height="60%",g.style.display="inline-block",g.style.padding="5px 5px",g.style.margin="0",g.style.float="left";break;case 2:g.style.width="50%",g.style.height="100%",g.style.minHeight="160px",g.style.padding="5px 5px",g.style.margin="0",g.style.float="left",g.style.fontSize="12px",g.style.display="inline-block",g.id="cr_panel_2";break;case 3:g.style.width="100%",g.style.height="100%",g.style.minHeight="160px",g.style.padding="5px 5px",g.style.margin="0",g.style.float="left",g.style.fontSize="12px",g.style.display="none",g.id="cr_panel_2"}i(g,h,d);var v=document.createElement("div");switch(t){case 1:v.style.width="32%",v.style.height="60%",v.style.display="inline-block",v.style.padding="5px 5px",v.style.margin="0",v.style.float="left";break;case 2:case 3:v.style.width="100%",v.style.height="100%",v.style.minHeight="160px",v.style.padding="5px 5px",v.style.margin="0",v.style.float="left",v.style.fontSize="12px",v.style.display="none",v.id="cr_panel_3"}i(v,h,c);var y=document.createElement("div");y.style.clear="both",u.appendChild(y);var w=document.createElement("div");w.style.width="99%",w.style.height="10%",w.style.padding="0",w.style.margin="0";var b=document.createElement("div");b.style.display="inline-block",b.style.float="right";var _=document.createElement("div");_.style.cssText="display: none; margin-right: 14px; margin-top: 7px; color: #FFFFFF; font-style: italic; font-weight: bold; font-size: 12px; padding: 5px; margin-bottom: 5px; border: solid 1px black; background-color: red;";var C=document.createElement("div");C.className="cr-confirm-alert",C.style.visibility="hidden";var x=document.createElement("div");x.className="cr-confirm-alert-text";var E=new Date,A=E.getDay(),S=E.getHours(),T=0==A||6==A||S<8||S>17,N=T?"2 hours outside of":"1 hour during";x.innerHTML="Your report has been successfully submitted to Ad Operations. If you do not get a response within "+N+" normal business hours (8am - 6pm Eastern), further contact information can be found in the confirmation email that has been sent to you.",C.appendChild(x),C.appendChild(document.createElement("br"));var k=document.createElement("button");k.className="btn btn-primary btn-sm",k.innerHTML="OK",k.onclick=function(e){e.preventDefault(),M(),C.style.visibility="hidden",h.reset()},C.appendChild(k),e.appendChild(C);var I=document.createElement("input");I.type="submit",I.className="btn btn-primary btn-sm cr-confirm-alert-btn",I.onclick=function(e){return e.preventDefault(),""==h.elements.Name.value||""==h.elements.Comments.value||""==h.elements.Email.value?void o("Please fill out all required fields."):s(h.elements.Email.value)?void F(h,function(){C.style.visibility="visible"}):void o("Email address is not valid.")};var R=document.createElement("button");R.type="button",R.className="btn btn-primary btn-sn cr-confirm-alert-btn",R.onclick=function(e){switch(t){case 2:if(""==h.elements.Name.value||""==h.elements.Email.value||""==h.elements.Brand.value||"placeholder"==formElements.elements.Brand.value)return void o("Please fill out all required fields.");if(!s(h.elements.Email.value))return void o("Email address is not valid.");if(""==h.elements.Brand.value||"placeholder"==h.elements.Brand.value)return void o("Please select the brand affected by this issue.");document.getElementById("cr_panel_1").style.display="none",document.getElementById("cr_panel_2").style.display="none",document.getElementById("cr_panel_3").style.display="inline-block",b.removeChild(R),b.appendChild(O),b.appendChild(I);break;case 3:switch(me){case 1:if(""==h.elements.Name.value||""==h.elements.Email.value)return void o("Please fill out all required fields.");if(!s(h.elements.Email.value))return void o("Email address is not valid.");document.getElementById("cr_panel_1").style.display="none",document.getElementById("cr_panel_2").style.display="inline-block",b.insertBefore(O,R),me++;break;case 2:if(""==h.elements.Brand.value||"placeholder"==h.elements.Brand.value)return void o("Please select the brand affected by this issue.");document.getElementById("cr_panel_2").style.display="none",document.getElementById("cr_panel_3").style.display="inline-block",b.removeChild(R),b.appendChild(I),me++}}},R.style.padding="5px 10px",R.style.fontSize="12px",R.style.lineHeight="1.5",R.style.borderRadius="3px",R.innerHTML="Next >>";var O=document.createElement("button");O.type="button",O.className="btn btn-primary btn-sn cr-confirm-alert-btn",O.onclick=function(e){switch(t){case 2:o(""),document.getElementById("cr_panel_1").style.display="inline-block",document.getElementById("cr_panel_2").style.display="inline-block",document.getElementById("cr_panel_3").style.display="none",b.appendChild(R),b.removeChild(I);case 3:switch(me){case 2:o(""),document.getElementById("cr_panel_1").style.display="inline-block",document.getElementById("cr_panel_2").style.display="none",b.removeChild(O);break;case 3:o(""),document.getElementById("cr_panel_2").style.display="inline-block",document.getElementById("cr_panel_3").style.display="none",b.appendChild(R),b.removeChild(I)}me--}},O.style.padding="5px 10px",O.style.fontSize="12px",O.style.lineHeight="1.5",O.style.borderRadius="3px",O.style.marginRight="10px",O.innerHTML="<< Back",b.appendChild(_),1==t?b.appendChild(I):b.appendChild(R),w.appendChild(b),u.appendChild(w),e.insertBefore(u,C)}}function T(e){function t(e,t,i){for(var o=0;o<i.length;o++){var s=i[o];switch(s.type){case"textarea":var l=a("div",s.label+":"+(!0===s.required?" *":""));l.style.fontWeight="bolder",e.appendChild(l),e.appendChild(s.element=document.createElement("textarea")),s.element.name=s.name||"",!0===s.required&&(s.element.attributes.required="required"),s.element.width="95%",s.element.cols="60",s.element.rows="5";break;case"input":var d=a("div",s.label+": "+(!0===s.required?" *":""));d.className=d.className+" fixed",d.style.fontWeight="bolder",d.style.marginRight="5px",e.appendChild(d),s.element=document.createElement("input"),s.element.name=s.name||"",!0===s.required&&s.element.setAttribute("required","required"),e.appendChild(s.element);var c=document.createElement("div");c.style.clear="both",e.appendChild(c),e.appendChild(document.createElement("br"));break;case"listLabel":var u=a("div",s.label+":"+(!0===s.required?" *":""));u.style.fontWeight="bolder",e.appendChild(u);break;case"list":for(var p=document.createElement("div"),f=0;f<s.items.length;f++){
var h=s.items[f],m=n(h.name,h.value,h.label),g=m.firstChild;s.items[f].element=g,p.appendChild(m)}e.appendChild(p);var c=document.createElement("div");c.style.clear="both",e.appendChild(c),e.appendChild(document.createElement("br"));break;case"select":var v=a("div",s.label+": "+(!0===s.required?" *":""));v.style.fontWeight="bolder",e.appendChild(v),s.element=document.createElement("select"),s.element.name=s.name;for(var y=0;y<s.options.length;y++){var w=a("option",s.options[y].text);w.value=s.options[y].value,s.element.appendChild(w)}e.appendChild(s.element);break;case"button":e.appendChild(r(s));break;case"fileUpload":if(Y){var d=a("div",s.label+": "+(!0===s.required?" *":""));d.className=d.className+" fixed",d.style.fontWeight="bolder",d.style.marginRight="5px",e.appendChild(d),s.element=document.createElement("input"),s.element.name=s.name||"",s.element.type="file",s.element.accept="image/*",e.appendChild(s.element);var c=document.createElement("div");c.style.clear="both",e.appendChild(c),e.appendChild(document.createElement("br"))}}}t.appendChild(e)}function i(e){""!==e?(b.style.display="inline-block",b.innerHTML=e):b.style.display="none",window.setTimeout(function(){b.style.display="none"},3e3)}function o(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}if(ne("Building Mobile Creative Review Form"),e){var s=[{type:"input",name:"Name",value:"",label:"Your Name",required:!0},{type:"input",name:"Email",value:"",label:"Your Email",required:!0},{type:"fileUpload",name:"Screenshot",value:"",label:"Upload Screenshot",required:!1}],l=[{type:"listLabel",name:"Reason",label:"What is the issue you are reporting?",required:!1},{type:"list",name:"Issue(s)",required:!1,items:[{type:"checkbox",name:"Issue",value:"block list violation",label:"Ad violates site block list",required:!1},{type:"checkbox",name:"Issue",value:"video plays in display ad",label:"Video plays in display ad",required:!1},{type:"checkbox",name:"Issue",value:"ad disrupts content",label:"Ad disrupts content",required:!1},{type:"checkbox",name:"Issue",value:"ad incorrectly sized",label:"Ad incorrectly sized",required:!1},{type:"checkbox",name:"Issue",value:"download initiated",label:"Ad attempts to initiate download",required:!1},{type:"checkbox",name:"Issue",value:"blank ad",label:"Blank ad",required:!1},{type:"checkbox",name:"Issue",value:"low quality",label:"Low-quality ad",required:!1},{type:"checkbox",name:"Issue",value:"audio autostarts",label:"Audio starts automatically",required:!1},{type:"checkbox",name:"Issue",value:"broken ad",label:"Broken ad",required:!1}]},{type:"select",name:"Brand",label:"What is brand is affected by the issue you are reporting?",required:!0,options:[{text:"",value:"placeholder"},{text:"Adult Swim",value:"Adult Swim"},{text:"Bleacher Report",value:"Bleacher"},{text:"Cartoon Network",value:"Cartoon Network"},{text:"CNN",value:"CNN"},{text:"CNN Arabic",value:"CNN Arabic"},{text:"CNN Espanol",value:"CNN Espanol"},{text:"CNN International",value:"CNN International"},{text:"CNN Money",value:"CNN Money"},{text:"E-League",value:"ELEAGUE"},{text:"Great Big Story",value:"Great Big Story"},{text:"HLN",value:"HLN"},{text:"NBA",value:"NBA"},{text:"NBA International",value:"NBA International"},{text:"NCAA",value:"NCAA"},{text:"TBS",value:"TBS"},{text:"TCM",value:"TCM"},{text:"Team Coco",value:"Team Coco"},{text:"TNT",value:"TNT"},{text:"TruTV",value:"truTV"}]}],d=[{type:"textarea",name:"Comments",label:"Please describe the issue you are reporting",required:!0}];e.innerHTML="",e.style.padding="0";var c=document.createElement("div");c.style.width="100%",c.style.height="100%",c.style.display="inline-block",c.style.padding="5px",c.style.margin="0",c.style.border="solid 2px purple";var u=document.createElement("div");u.style.width="99%",u.style.borderBottom="solid 1px black",u.style.fontSize="12px";var p=document.createElement("p");p.style.padding="0",p.style.fontWeight="bolder",p.style.margin="auto",p.innerHTML="You can report an issue on this page by submitting the information below. A copy of the report will be sent to the email address specified.<br /><span style='color: red'>* Denotes required fields.</span>",u.appendChild(p),c.appendChild(u);var f=document.createElement("form");f.style.padding="0",f.style.margin="0",c.appendChild(f);var h=document.createElement("div");h.style.width="100%",h.style.height="100%",h.style.minHeight="160px",h.style.display="inline-block",h.style.padding="5px 5px",h.style.margin="0",h.style.float="left",h.style.fontSize="12px",h.id="cr_panel_1",t(h,f,s);var m=document.createElement("div");m.style.width="100%",m.style.height="100%",m.style.minHeight="160px",m.style.padding="5px 5px",m.style.margin="0",m.style.float="left",m.style.fontSize="12px",m.style.display="none",m.id="cr_panel_2",t(m,f,l);var g=document.createElement("div");g.style.width="100%",g.style.height="100%",g.style.minHeight="160px",g.style.padding="5px 5px",g.style.margin="0",g.style.float="left",g.style.fontSize="12px",g.style.display="none",g.id="cr_panel_3",t(g,f,d);var v=document.createElement("div");v.style.clear="both",c.appendChild(v);var y=document.createElement("div");y.style.width="99%",y.style.height="10%",y.style.padding="0",y.style.margin="0";var w=document.createElement("div");w.style.display="inline-block",w.style.float="right",w.style.height="10%";var b=document.createElement("div");b.style.cssText="display: none; margin-right: 14px; margin-top: 7px; color: #FFFFFF; font-style: italic; font-weight: bold; font-size: 12px; padding: 5px; margin-bottom: 5px; border: solid 1px black; background-color: red;";var _=document.createElement("div");_.className="cr-confirm-alert",_.style.visibility="hidden";var C=document.createElement("div");C.className="cr-confirm-alert-text";var x=new Date,E=x.getDay(),A=x.getHours(),S=0==E||6==E||A<8||A>17,T=S?"2 hours outside of":"1 hour during";C.innerHTML="Your report has been successfully submitted to Ad Operations. If you do not get a response within "+T+" normal business hours (8am - 6pm Eastern), further contact information can be found in the confirmation email that has been sent to you.",_.appendChild(C),_.appendChild(document.createElement("br"));var N=document.createElement("button");N.className="btn btn-primary btn-sm",N.innerHTML="OK",N.onclick=function(e){e.preventDefault(),M(),_.style.visibility="hidden",f.reset()},_.appendChild(N),e.appendChild(_);var k=document.createElement("input");k.type="submit",k.className="btn btn-primary btn-sm cr-confirm-alert-btn",k.onclick=function(e){if(e.preventDefault(),""==f.elements.Comments.value)return void i("Please describe the issue you are reporting.");F(f,function(){_.style.visibility="visible"})};var I=document.createElement("button");I.type="button",I.className="btn btn-primary btn-sn cr-confirm-alert-btn",I.onclick=function(e){switch(me){case 1:if(""==f.elements.Name.value||""==f.elements.Email.value)return void i("Please fill out all required fields.");if(!o(f.elements.Email.value))return void i("Email address is not valid.");document.getElementById("cr_panel_1").style.display="none",document.getElementById("cr_panel_2").style.display="inline-block",w.insertBefore(R,I),me++;break;case 2:if(""==f.elements.Brand.value||"placeholder"==f.elements.Brand.value)return void i("Please select the brand affected by this issue.");document.getElementById("cr_panel_2").style.display="none",document.getElementById("cr_panel_3").style.display="inline-block",w.removeChild(I),w.appendChild(k),me++}},I.style.padding="5px 10px",I.style.fontSize="12px",I.style.lineHeight="1.5",I.style.borderRadius="3px",I.innerHTML="Next >>";var R=document.createElement("button");R.type="button",R.className="btn btn-primary btn-sn cr-confirm-alert-btn",R.onclick=function(e){switch(me){case 2:i(""),document.getElementById("cr_panel_1").style.display="inline-block",document.getElementById("cr_panel_2").style.display="none",w.removeChild(R);break;case 3:i(""),document.getElementById("cr_panel_2").style.display="inline-block",document.getElementById("cr_panel_3").style.display="none",w.appendChild(I),w.removeChild(k)}me--},R.style.padding="5px 10px",R.style.fontSize="12px",R.style.lineHeight="1.5",R.style.borderRadius="3px",R.style.marginRight="10px",R.innerHTML="<< Back",w.appendChild(b),w.appendChild(I),y.appendChild(w),c.appendChild(y),e.insertBefore(c,_)}}function N(e){function t(e,t,i){for(var o=0;o<i.length;o++){var s=i[o];switch(s.type){case"textarea":var l=a("div",s.label+":"+(!0===s.required?" *":""));l.style.fontWeight="bolder",e.appendChild(l),e.appendChild(s.element=document.createElement("textarea")),s.element.name=s.name||"",!0===s.required&&(s.element.attributes.required="required"),s.element.width="95%",s.element.cols="60",s.element.rows="5";break;case"input":var d=a("div",s.label+": "+(!0===s.required?" *":""));d.className=d.className+" fixed",d.style.fontWeight="bolder",d.style.marginRight="5px",e.appendChild(d),s.element=document.createElement("input"),s.element.name=s.name||"",!0===s.required&&s.element.setAttribute("required","required"),e.appendChild(s.element);var c=document.createElement("div");c.style.clear="both",e.appendChild(c),e.appendChild(document.createElement("br"));break;case"listLabel":var u=a("div",s.label+":"+(!0===s.required?" *":""));u.style.fontWeight="bolder",e.appendChild(u);break;case"list":for(var p=document.createElement("div"),f=0;f<s.items.length;f++){var h=s.items[f],m=n(h.name,h.value,h.label),g=m.firstChild;s.items[f].element=g,p.appendChild(m)}e.appendChild(p);var c=document.createElement("div");c.style.clear="both",e.appendChild(c),e.appendChild(document.createElement("br"));break;case"select":var v=a("div",s.label+": "+(!0===s.required?" *":""));v.style.fontWeight="bolder",e.appendChild(v),s.element=document.createElement("select"),s.element.name=s.name;for(var y=0;y<s.options.length;y++){var w=a("option",s.options[y].text);w.value=s.options[y].value,s.element.appendChild(w)}e.appendChild(s.element);break;case"button":e.appendChild(r(s));break;case"fileUpload":if(Y){var d=a("div",s.label+": "+(!0===s.required?" *":""));d.className=d.className+" fixed",d.style.fontWeight="bolder",d.style.marginRight="5px",e.appendChild(d),s.element=document.createElement("input"),s.element.name=s.name||"",s.element.type="file",s.element.accept="image/*",e.appendChild(s.element);var c=document.createElement("div");c.style.clear="both",e.appendChild(c),e.appendChild(document.createElement("br"))}}}t.appendChild(e)}function i(e){""!==e?(b.style.display="inline-block",b.innerHTML=e):b.style.display="none",window.setTimeout(function(){b.style.display="none"},3e3)}function o(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}if(ne("Building Mobile Creative Review Form"),e){var s=[{type:"input",name:"Name",value:"",label:"Your Name",required:!0},{type:"input",name:"Email",value:"",label:"Your Email",required:!0},{type:"fileUpload",name:"Screenshot",value:"",label:"Upload Screenshot",required:!1}],l=[{type:"listLabel",name:"Reason",label:"What is the issue you are reporting?",required:!1},{type:"list",name:"Issue(s)",required:!1,items:[{type:"checkbox",name:"Issue",value:"block list violation",label:"Ad violates site block list",required:!1},{type:"checkbox",name:"Issue",value:"video plays in display ad",label:"Video plays in display ad",required:!1},{type:"checkbox",name:"Issue",value:"ad disrupts content",label:"Ad disrupts content",required:!1},{type:"checkbox",name:"Issue",value:"ad incorrectly sized",label:"Ad incorrectly sized",required:!1},{type:"checkbox",name:"Issue",value:"download initiated",label:"Ad attempts to initiate download",required:!1},{type:"checkbox",name:"Issue",value:"blank ad",label:"Blank ad",required:!1},{type:"checkbox",name:"Issue",value:"low quality",label:"Low-quality ad",required:!1},{type:"checkbox",name:"Issue",value:"audio autostarts",label:"Audio starts automatically",required:!1},{type:"checkbox",name:"Issue",value:"broken ad",label:"Broken ad",required:!1}]},{type:"select",name:"Brand",label:"What is brand is affected by the issue you are reporting?",required:!0,options:[{text:"",value:"placeholder"},{text:"Adult Swim",value:"Adult Swim"},{text:"Bleacher Report",value:"Bleacher"},{text:"Cartoon Network",value:"Cartoon Network"},{text:"CNN",value:"CNN"},{text:"CNN Arabic",value:"CNN Arabic"},{text:"CNN Espanol",value:"CNN Espanol"},{text:"CNN International",value:"CNN International"},{text:"CNN Money",value:"CNN Money"},{text:"E-League",value:"ELEAGUE"},{text:"Great Big Story",value:"Great Big Story"},{text:"HLN",value:"HLN"},{text:"NBA",value:"NBA"},{text:"NBA International",value:"NBA International"},{text:"NCAA",value:"NCAA"},{text:"TBS",value:"TBS"},{text:"TCM",value:"TCM"},{text:"Team Coco",value:"Team Coco"},{text:"TNT",value:"TNT"},{text:"TruTV",value:"truTV"}]}],d=[{type:"textarea",name:"Comments",label:"Please describe the issue you are reporting",required:!0}];e.innerHTML="",e.style.padding="0";var c=document.createElement("div");c.style.width="100%",c.style.height="100%",c.style.display="inline-block",c.style.padding="5px",c.style.margin="0",c.style.border="solid 2px purple";var u=document.createElement("div");u.style.width="99%",u.style.borderBottom="solid 1px black",u.style.fontSize="12px";var p=document.createElement("p");p.style.padding="0",p.style.fontWeight="bolder",p.style.margin="auto",p.innerHTML="You can report an issue on this page by submitting the information below. A copy of the report will be sent to the email address specified.<br /><span style='color: red'>* Denotes required fields.</span>",u.appendChild(p),c.appendChild(u);var f=document.createElement("form");f.style.padding="0",f.style.margin="0",c.appendChild(f);var h=document.createElement("div");h.style.width="50%",h.style.height="100%",h.style.minHeight="160px",h.style.display="inline-block",h.style.padding="5px 5px",h.style.margin="0",h.style.float="left",h.style.fontSize="12px",h.id="cr_panel_1",t(h,f,s);var m=document.createElement("div");m.style.width="50%",m.style.height="100%",m.style.minHeight="160px",m.style.padding="5px 5px",m.style.margin="0",m.style.float="left",m.style.fontSize="12px",m.style.display="inline-block",m.id="cr_panel_2",t(m,f,l);var g=document.createElement("div");g.style.width="100%",g.style.height="100%",g.style.minHeight="160px",g.style.padding="5px 5px",g.style.margin="0",g.style.float="left",g.style.fontSize="12px",g.style.display="none",g.id="cr_panel_3",t(g,f,d);var v=document.createElement("div");v.style.clear="both",c.appendChild(v);var y=document.createElement("div");y.style.width="99%",y.style.height="10%",y.style.padding="0",y.style.margin="0";var w=document.createElement("div");w.style.display="inline-block",w.style.float="right",w.style.height="10%";var b=document.createElement("div");b.style.cssText="display: none; margin-right: 14px; margin-top: 7px; color: #FFFFFF; font-style: italic; font-weight: bold; font-size: 12px; padding: 5px; margin-bottom: 5px; border: solid 1px black; background-color: red;";var _=document.createElement("div");_.className="cr-confirm-alert",_.style.visibility="hidden";var C=document.createElement("div");C.className="cr-confirm-alert-text";var x=new Date,E=x.getDay(),A=x.getHours(),S=0==E||6==E||A<8||A>17,T=S?"2 hours outside of":"1 hour during";C.innerHTML="Your report has been successfully submitted to Ad Operations. If you do not get a response within "+T+" normal business hours (8am - 6pm Eastern), further contact information can be found in the confirmation email that has been sent to you.",_.appendChild(C),_.appendChild(document.createElement("br"));var N=document.createElement("button");N.className="btn btn-primary btn-sm",N.innerHTML="OK",N.onclick=function(e){e.preventDefault(),M(),_.style.visibility="hidden",f.reset()},_.appendChild(N),e.appendChild(_);var k=document.createElement("input");k.type="submit",k.className="btn btn-primary btn-sm cr-confirm-alert-btn",k.onclick=function(e){if(e.preventDefault(),""==f.elements.Comments.value)return void i("Please describe the issue you are reporting.");F(f,function(){_.style.visibility="visible"})};var I=document.createElement("button");I.type="button",I.className="btn btn-primary btn-sn cr-confirm-alert-btn",I.onclick=function(e){return""==f.elements.Name.value||""==f.elements.Email.value||"placeholder"==f.elements.Brand.value||""==f.elements.Brand.value?void i("Please fill out all required fields."):o(f.elements.Email.value)?(document.getElementById("cr_panel_1").style.display="none",document.getElementById("cr_panel_2").style.display="none",document.getElementById("cr_panel_3").style.display="inline-block",ne("Appending Back and Submit Buttons.  Removing Next Button."),w.removeChild(I),w.appendChild(R),w.appendChild(k),void 0):void i("Email address is not valid.")},I.style.padding="5px 10px",I.style.fontSize="12px",I.style.lineHeight="1.5",I.style.borderRadius="3px",I.innerHTML="Next >>";var R=document.createElement("button");R.type="button",R.className="btn btn-primary btn-sn cr-confirm-alert-btn",R.onclick=function(e){i(""),document.getElementById("cr_panel_1").style.display="inline-block",document.getElementById("cr_panel_2").style.display="inline-block",document.getElementById("cr_panel_3").style.display="none",ne("Adding Next Button. Removing Submit and Back Buttons."),w.appendChild(I),w.removeChild(R),w.removeChild(k)},R.style.padding="5px 10px",R.style.fontSize="12px",R.style.lineHeight="1.5",R.style.borderRadius="3px",R.style.marginRight="10px",R.innerHTML="<< Back",w.appendChild(b),w.appendChild(I),y.appendChild(w),c.appendChild(y),e.insertBefore(c,_)}}function k(e){var t={};if(e.data&&"function"==typeof e.data.indexOf&&0==e.data.indexOf("{")&&e.data.indexOf("googMsgType")<0)try{t=JSON.parse(e.data),t.pos}catch(e){return}if(t.divId){if(Array.isArray(t.divId)&&t.divId.length>1&&(t.divId=t.divId[0]),t.filteredSources.length>0)for(var n=0;n<t.filteredSources.length;n++){var i=t.filteredSources[n];if(i.indexOf("javascript:")<0){var a=function(){var e=i,n=document.createElement("img"),a=document.getElementById(t.divId),r=document.querySelectorAll("div[id='"+t.divId+"'] div[id^='google_ads_iframe']");if(n.className="adfuel-temp-image",n.src=e,0==e.indexOf("http://")||0==e.indexOf("https://")||0==e.indexOf("//")){a.appendChild(n);for(var o=0;o<r.length;o++){r[o].style.display="none"}}},r=function(){for(var e=document.getElementById(t.divId),n=document.querySelectorAll("div[id='"+t.divId+"'] img.adfuel-temp-image"),i=document.querySelectorAll("div[id='"+t.divId+"'] div[id^='google_ads_iframe']"),a=0;a<n.length;a++){var r=n[a];try{e.removeChild(r)}catch(e){}}for(var o=0;o<i.length;o++){i[o].style.display="block"}};Z.push(a),X.push(r)}}U.addMetric({type:"creatives",id:t.divId,data:t})}}function I(e){if(e&&"FORM"===e.nodeName){var t,n,i=[],a={};for(t=e.elements.length-1;t>=0;t-=1)if(""!==e.elements[t].name)switch(e.elements[t].nodeName){case"INPUT":switch(e.elements[t].type){case"text":case"hidden":case"password":case"button":case"reset":case"submit":i.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value)),a[e.elements[t].name]=e.elements[t].value;break;case"file":e.elements[t].files.length>0&&(i.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value)),a[e.elements[t].name]=e.elements[t].files[0],a[e.elements[t].name+"FileName"]=a[e.elements[t].name].name);break;case"checkbox":e.elements[t].checked&&(i.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value)),a[e.elements[t].name]?a[e.elements[t].name].push(e.elements[t].value):a[e.elements[t].name]=[e.elements[t].value]);break;case"radio":e.elements[t].checked&&(i.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value)),a[e.elements[t].name]=e.elements[t].value)}break;case"TEXTAREA":i.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value)),a[e.elements[t].name]=e.elements[t].value;break;case"SELECT":switch(e.elements[t].type){case"select-one":i.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value)),a[e.elements[t].name]=e.elements[t].value;break;case"select-multiple":for(n=e.elements[t].options.length-1;n>=0;n-=1)e.elements[t].options[n].selected&&(i.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].options[n].value)),a[e.elements[t].name]=e.elements[t].options[n].value)}break;case"BUTTON":switch(e.elements[t].type){case"reset":case"submit":case"button":i.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value)),a[e.elements[t].name]=e.elements[t].value}}return a}}function F(e,t){var n=I(e),i=function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){4==e.readyState&&t(200===e.status)};var i=new Blob([JSON.stringify(n,null,2)],{type:"application/json"}),a=new Blob([JSON.stringify(window.AdFuel.requestScriptText,null,2)],{type:"application/json"}),r=new Blob([JSON.stringify(window.AdFuel.registry,null,2)],{type:"application/json"}),o={availHeight:screen.availHeight,availLeft:screen.availLeft,availTop:screen.availTop,availWidth:screen.availWidth,colorDepth:screen.colorDepth,height:screen.height,orientation:{angle:screen.orientation.angle,onchange:screen.orientation.onchange,type:screen.orientation.type},pixelDepth:screen.pixelDepth,width:screen.width},s=JSON.parse(JSON.stringify(window.AdFuel.metrics.slots));for(var l in s)s.hasOwnProperty(l)&&(delete s[l].build_end,delete s[l].build_start,delete s[l].display,delete s[l].queued,delete s[l].render_start,delete s[l].render_end);var d=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),c=new Blob([JSON.stringify(document.cookie,null,2)],{type:"application/json"}),u=new Blob([JSON.stringify(o,null,2)],{type:"application/json"}),p=new Blob([JSON.stringify(window.AdFuel.metrics.timeline,null,2)],{type:"application/json"}),f=new Blob([JSON.stringify(window.location.href,null,2)],{type:"application/json"}),h=new FormData;h.append("formData",i),h.append("request",a),h.append("registry",r),h.append("slots",d),h.append("cookies",c),h.append("browser",u),h.append("timeline",p),h.append("url",f);var m="http://{{adfuel-services-host}}/api/email";-1!=m.indexOf("adfuel-services-host")&&(m="http://localhost:3050/api/email"),e.open("POST",m,!0),e.send(h),U.addMetric({type:"modules",id:"Creative Review",data:{reported_information:n[0]}})};if(n.Screenshot){n.Screenshot.type.match("image.*")||i();var a=new FileReader;a.onload=function(e){return function(e){n.Screenshot=e.target.result,i()}}(n.Screenshot),a.readAsDataURL(n.Screenshot)}else i()}function R(e,t,n){var i=document.createElement("div");0==t.indexOf("request_")&&(t=t.replace("request_",""));var a=e.id.split("-")[3],r=U.metrics[a][t],o=document.createElement("ul");o.id="adfuel_console_"+a+"_items",o.style.listStyleType="none",o.style.padding="0",o.style.margin="0";for(var l in r)if(r.hasOwnProperty(l)){var d=r[l];isNaN(parseInt(l))||(l="request_"+(parseInt(l)+1));var c=document.createElement("li");c.id="adfuel-console-"+a+"-"+l,c.style.display="block";var u=document.createElement("div"),p=document.createElement("span");p.style.display="inline-block",p.style.width="25%",p.style.minWidth="150px",p.style.textAlign="left",p.style.margin="0",p.style.padding="0",p.style.paddingRight="10px",p.style.float="left",p.style.fontWeight="bolder",p.style.borderBottom="solid 1px #BCBCBC",p.innerHTML=m(l.replace(/_/g," ")+": "),u.appendChild(p),null==d?d="N/A":d||(d="False");var f=Object.getOwnPropertyNames(d),h=typeof d;if("string"==h||"boolean"==h||"number"==h||Array.isArray(d)&&1==d.length){var g="",v=!1;Array.isArray(d)?(v=s(d[0]),g=v?d[0]:m(d[0]),d[0]):(v=s(d),g=v?d:m(d),d);var y=document.createElement("div");if(y.style.margin="0",y.style.padding="0",y.style.display="block",y.style.width="65%",y.style.maxWidth="800px",y.style.float="left",y.style.borderBottom="solid 1px #BCBCBC",y.style.textOverflow="ellipsis",y.style.whiteSpace="nowrap",y.style.overflow="hidden",v){var w=document.createElement("a");w.href=g,w.target="_blank",w.title=g,w.appendChild(document.createTextNode(g)),y.appendChild(w)}else y.appendChild(document.createTextNode(g));u.appendChild(y);var b=document.createElement("div");b.style.clear="both",u.appendChild(b)}else if(Array.isArray(d)){var _=document.createElement("div");_.style.width="65%",_.style.margin="0",_.style.position="relative",_.style.float="left",_.style.textOverflow="ellipsis",_.style.whiteSpace="nowrap",_.style.overflowX="hidden";var C=document.createElement("ul");C.style.listStyleType="none",C.style.margin="0",C.style.padding="0";for(var x=0;x<d.length;x++){var E=document.createElement("li");E.style.marginLeft="0",E.style.paddingLeft="0",E.style.borderBottom="solid 1px #BCBCBC",E.style.margin="0",E.style.padding="0",E.style.display="block",E.style.width="100%",E.style.maxWidth="800px",E.style.float="left",E.style.borderBottom="solid 1px #BCBCBC",E.style.textOverflow="ellipsis",E.style.whiteSpace="nowrap",E.style.overflow="hidden";var v=s(d[x]),g="";if(v){g=d[x];var w=document.createElement("a");w.href=g,w.target="_blank",w.title=g,w.appendChild(document.createTextNode(g)),E.appendChild(w)}else g=m(d[x]),E.appendChild(document.createTextNode(g));C.appendChild(E)}_.appendChild(C),u.appendChild(_);var b=document.createElement("div");b.style.clear="both",u.appendChild(b)}else{var _=document.createElement("div");_.style.width="65%",_.style.maxWidth="800px",_.style.margin="0",_.style.position="relative",_.style.left="5px",_.style.borderBottom="solid 1px #BCBCBC",_.style.textOverflow="ellipsis",_.style.whiteSpace="nowrap",_.style.overflowX="hidden";var C=document.createElement("ul");C.style.listStyleType="none",C.style.margin="0",C.style.padding="0";for(var x=0;x<f.length;x++){var E=document.createElement("li");E.style.padding="0",E.style.margin="0";var v=s(f[x]),g="";g=v?f[x]:m(f[x]);var A=d[f[x]];if(void 0!==A){var S=document.createElement("label");S.style.width="25%",S.appendChild(document.createTextNode(g+": ")),E.appendChild(S);var T=typeof A;"object"==T&&(A=Array.isArray(A)?A.join(", "):JSON.stringify(A));var y=document.createElement("span");y.title=A,y.appendChild(document.createTextNode(A)),E.appendChild(y)}else E.appendChild(document.createTextNode(g));C.appendChild(E)}_.appendChild(C),u.appendChild(_)}c.appendChild(u),o.appendChild(c)}i.style.overflowY="auto",i.style.height="80%",i.style.minHeight="250px",i.appendChild(o),e.appendChild(i)}function O(e,t){function n(e){return e.indexOf("_")<0||e.indexOf("_")>0}function i(e,t){var a=document.createElement("ul");a.className="adfuel-console-collection-list-item-detail-list";for(var r=Object.getOwnPropertyNames(e).filter(n),o=0;o<r.length;o++){var s=document.createElement("li");s.className="adfuel-console-collection-list-item-detail-list-item";document.createElement("div").className="adfuel-console-collection-list-item-detail-list-item-container";var l=document.createElement("label");l.className="adfuel-console-collection-list-item-detail-list-item-label";var d=r[o],c=m(d.replace(/_/g," "));l.appendChild(document.createTextNode(c)),s.appendChild(l),Array.isArray(e[d])&&e[d].length>1&&(e[d]=e[d].join("<br>"),e[d]=e[d]+"<br><br>");var u=document.createElement("div");u.style.clear="both";var p=document.createElement("div");if(Array.isArray(e[d])||"object"!=typeof e[d]||null===e[d])p.className="truncate",p.innerText=e[d],p.innerHTML=e[d],p.title=e[d];else{var f=i(e[d],!0),h=document.createElement("div");h.style.clear="both",p.appendChild(h),p.appendChild(f)}t&&s.appendChild(u),s.appendChild(p),s.appendChild(u),a.appendChild(s)}return a}if(e){e.innerHTML="";var a=e.id.replace("adfuel-console-panel-",""),r=U.metrics[a];if(t)tabNames=Object.getOwnPropertyNames(r),A(e,tabNames);else{var o=document.createElement("div");o.className="adfuel-console-collection-container";var s=document.createElement("ul");s.id="adfuel_console_"+a+"_items",s.className="adfuel-console-collection-list",s.style.listStyleType="none",s.style.padding="0",s.style.margin="0";for(var l in r)if(r.hasOwnProperty(l)){var d=r[l],c=document.createElement("li");c.id="adfuel-console-"+a+"-"+l,c.className="adfuel-console-collection-list-items";var u=document.createElement("div");u.className="adfuel-console-collection-list-item-container";var p=document.createElement("label");p.className="adfuel-console-collection-list-item-label";var f=document.createElement("span");p.appendChild(f),p.appendChild(document.createTextNode(m(l.replace(/_/g," ")))),u.appendChild(p);var h=document.createElement("hr");h.className="adfuel-console-separator",u.appendChild(h);var g;if(Array.isArray(d))for(var v=0;v<d.length;v++)d=d[v],g=i(d),u.appendChild(g);else g=i(d),u.appendChild(g);c.appendChild(u),s.appendChild(c)}o.appendChild(s),e.appendChild(o)}}}function M(){V=null;var e=(document.getElementsByTagName("body")[0],document.querySelector("div.adfuel-console-button-container")),n=(document.querySelector("div#adfuel-close-console-button-container"),document.querySelector("body > div.adfuel-console-button-container > a")),i=document.querySelector("div.adfuel-console-filler"),a=document.querySelector("div.adfuel-console");document.querySelector("div#adfuel-console-banner");i.style.display="none",a.style.display="none",e&&n&&(e.style.display="inline-block",Q=t(n,"click",p),window.AdFuel.openConsole=p)}function D(){window.googletag.cmd.push(function(){window.googletag.pubads().addEventListener("slotRenderEnded",function(e){try{var t={};e.slot&&(t.asset=e.slot),e.slot.getTargeting("pos")&&(t.pos=e.slot.getTargeting("pos")),e.isEmpty?t.empty=!0:t.empty=!1,e.size&&(t.renderedSize=e.size),e.creativeId&&(t.creativeId=e.creativeId),e.lineItemId&&(t.lineItemId=e.lineItemId),e.serviceName&&(t.serviceName=e.serviceName),e.slot.getSlotElementId()&&(t.divId=e.slot.getSlotElementId(),document.getElementById(t.divId));var n=window.AdFuel.pageSlots[t.divId].getResponseInformation();t.campaignId=n.campaignId,t.advertiserId=n.advertiserId,U.addMetric({type:"slots",id:t.divId,data:{advertiserId:t.advertiserId,campaignId:t.campaignId,creativeId:t.creativeId,lineItemId:t.lineItemId}})}catch(e){ie("error reading slotRenderEnded event",{error:e})}})})}function j(e,t){for(var n=1;n<e.length;n++){var i=e[n];ve.indexOf(i.rktr_slot_id)<0&&(window.AdFuel.addSlotLevelTarget(i.rktr_slot_id,"elemId",i.rktr_slot_id),ve.push(i.rktr_slot_id))}window.AdFuel.addEvent(document,"SlotIdChange",function(e){e.detail.newId!=e.detail.originalId&&ve.indexOf(e.detail.newId)<0&&(window.AdFuel.addSlotLevelTarget(e.detail.newId,"elemId",e.detail.newId),ve.push(e.detail.newId))}),t()}function B(){U=window.AdFuel.registerModule("AdFuel Console Tool",{preQueueCallback:j,metricUpdateCallback:y}),U.addMetric({type:"creative review",id:"Form",data:{}}),window.AdFuel.addEvent(window,"message",k),P(),L(),D(),y({}),e(),window.addEventListener("hashchange",e,!1)}function P(){var e=function(){G=!0,u()},t=function(){G=!1,u()},n=function(){var n={prevent_default:!1,prevent_repeat:!1,is_sequence:!1,is_exclusive:!0,is_solitary:!0},i={keys:"ctrl shift z",on_keydown:e};new window.keypress.Listener(window,n).register_combo(i),n={prevent_default:!1,prevent_repeat:!1,is_sequence:!0,is_exclusive:!0,is_solitary:!0},i={keys:"^ d o h $",on_keydown:t},new window.keypress.Listener(window,n).register_combo(i)};if(window.keypress)n();else{var i=document,a=i.createElement("script"),r=i.getElementsByTagName("script")[0],o=/^(complete|loaded)$/,s=!1,l="https:"===document.location.protocol;a.type="text/javascript",a.async=!0,a.src=(l?"https:":"http:")+"//ssl.cdn.turner.com/ads/adfuel/modules/keypress.js",a.onload=a.onreadystatechange=function(){s||"readyState"in a&&o.test(a.readyState)||(a.onload=a.onreadystatechange=null,s=!0,n())},r.parentNode.insertBefore(a,r)}}function L(){
var e=document,t=e.createElement("script"),n=e.getElementsByTagName("script")[0],i="https:"===document.location.protocol;t.type="text/javascript",t.async=!0,t.src=(i?"https:":"http:")+"//ssl.cdn.turner.com/ads/adfuel/modules/dhtmlxgrid.min.js",n.parentNode.insertBefore(t,n)}var q,z=function(){return!1},U={metrics:{},addMetric:z,getMetricById:z,getMetricsByType:z,getMetricTypes:z},H="Console Tool/Creative Review",W=!1,Q=null,V=null,$=null,K=[],J=!0,G=!1,Y=window.File&&window.FileReader&&window.FileList&&window.Blob,Z=[],X=[],ee=Object.prototype,te=ee.toString,ne=z,ie=z,ae=z,re=z;(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e})(window.console)&&function(e){return"[object Function]"===te.call(e)}(window.console.log)&&"true"==function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}("debug")&&(ne=function(){var e=["[AdFuelModule - "+H+"]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)},function(){var e=["[AdFuelModule - "+H+"]"];e.push.apply(e,arguments),window.console.warn.apply(window.console,e)},ie=function(){var e=["[AdFuelModule - "+H+" ERROR]"];e.push.apply(e,arguments),window.console.error.apply(window.console,e)},ae=function(){var e=["[AdFuelModule - "+H+" TIMER] "];e.push.apply(e,arguments);var t=e.join("");window.console.time(t)},re=function(){var e=["[AdFuelModule - "+H+" TIMER] "];e.push.apply(e,arguments);var t=e.join("");window.console.timeEnd(t)});var oe=!1,se=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,le=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,de=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,ce=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),ue=function(e,t){return e.test(t)},pe=function(e){var t=e||navigator.userAgent,n=t.split("[FBAN");if(void 0!==n[1]&&(t=n[0]),n=t.split("Twitter"),void 0!==n[1]&&(t=n[0]),this.apple={phone:ue(/iPhone/i,t),ipod:ue(/iPod/i,t),tablet:!ue(/iPhone/i,t)&&ue(/iPad/i,t),device:ue(/iPhone/i,t)||ue(/iPod/i,t)||ue(/iPad/i,t)},this.amazon={phone:ue(le,t),tablet:!ue(le,t)&&ue(de,t),device:ue(le,t)||ue(de,t)},this.android={phone:ue(le,t)||ue(se,t),tablet:!ue(le,t)&&!ue(se,t)&&(ue(de,t)||ue(/Android/i,t)),device:ue(le,t)||ue(de,t)||ue(se,t)||ue(/Android/i,t)},this.windows={phone:ue(/Windows Phone/i,t),tablet:ue(/(?=.*\bWindows\b)(?=.*\bARM\b)/i,t),device:ue(/Windows Phone/i,t)||ue(/(?=.*\bWindows\b)(?=.*\bARM\b)/i,t)},this.other={blackberry:ue(/BlackBerry/i,t),blackberry10:ue(/BB10/i,t),opera:ue(/Opera Mini/i,t),firefox:ue(/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,t),chrome:ue(/(CriOS|Chrome)(?=.*\bMobile\b)/i,t),device:ue(/BlackBerry/i,t)||ue(/BB10/i,t)||ue(/Opera Mini/i,t)||ue(/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,t)||ue(/(CriOS|Chrome)(?=.*\bMobile\b)/i,t)},this.seven_inch=ue(ce,t),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},fe=function(){var e=new pe;return e.Class=pe,e},he=null,me=1,ge=U.getMetricTypes()||{},ve=[];!function(){c(),window.AdFuel&&window.AdFuel.cmd?window.AdFuel.cmd.push(B):window.AdFuel?B():document.addEventListener?document.addEventListener("AdFuelCreated",B,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",B)}()}(),!0===CNN.Features.enableAmazonDisplayAds&&function(){function e(e){var t=!1,n=null;if(localStorage&&(t=!0),"undefined"==typeof value){t&&(n=localStorage.getItem(e)),t&&null!==n||(n=function(e){if(document.cookie){for(var t=document.cookie.split(";"),n=e+"=",i=0;i<t.length;i++){for(var a=t[i];" "==a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(n))return a.substring(n.length,a.length)}return null}return null}(e));try{n=JSON.parse(n)}catch(e){n=n}return n}}function t(){var e,t;return void 0!==window.innerWidth?(e=window.innerWidth,t=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!=document.documentElement.clientWidth?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):(e=document.getElementsByTagName("body")[0].clientWidth,t=document.getElementsByTagName("body")[0].clientHeight),[e,t]}function n(e,t,n){w("Creating timeoutPromise: ",{ms:e,callback:t,data:n});var i,a=function(n){i=setTimeout(function(){clearTimeout(i),n("[AF2] Callback ["+t.name+"] Timed out in "+e+"ms.")},e)},r=function(e){var a=function(){clearTimeout(i),e()},r=JSON.parse(JSON.stringify(n));t(r,a)},o=new Promise(r),s=new Promise(a);return Promise.race([s,o])}function i(e){w("Storing Video Bids: ",e),k=e}function a(e){return w("Setting Targeting: ",e,k),k.length>0&&(vastTagUrl+=k[0].qsParams),vastTagUrl}function r(e){return k=[],w("Refreshing Targeting..."),n(750,function(){window.apstag.fetchBids({slots:[{slotID:"videoSlotName1",mediaType:"video"}]},i)}).then(a)}function o(e){return e.reduce(function(e,t){return e[t.getSlotElementId()]=t,e},{})}function s(e,t,n){w("Handling A9 Bids:",e,t),b("Handling A9 Bids"),window.googletag.cmd.push(function(){function n(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}var i=o(t);e.forEach(function(e){var t=i[e.slotID]||null;if(null!==t){var a={};window.apstag.targetingKeys("display").forEach(function(i){"true"==n("debug")&&console.log("[AdFuelModule - Amazon A9] Setting A9 Targeting: ",{key:i,value:e[i]}),a[i]=e[i],t.setTargeting(i,e[i])}),v.addMetric({type:"vendor",id:"Amazon A9",data:{targeting:a}})}}),window.googletag.pubads().addEventListener("slotRenderEnded",function(e){var t=o(window.googletag.pubads().getSlots()),n=t[e.slot.getSlotElementId()];window.apstag.targetingKeys("display").forEach(function(e){n.setTargeting(e,"")})})}),_("Handling A9 Bids"),n()}function l(e,n){function i(e){A=e,N=[],n()}b("A9 Slot Building");var a=["160x600","300x250","300x600","320x50","728x90","970x90","970x250"],r=["_ns_","_nfs_"],o=["super-ad-zone","super_ad_zone"],s=t();w("Browser Dimensions: ",s);for(var l=1;l<e.length;l++){var d=e[l].originalElementId||e[l].rktr_slot_id,c=d.split("_");c.splice(0,1),d=c.join("_"),w("Checking slot and sizes for validity: ",d);for(var u=[],p=!0,f=!1,h=0;h<e[l].responsive.length;h++){var m=e[l].responsive[h];f||w("Checking For Responsive Viewport: ",m[0].join("x")),!f&&m[0][0]<s[0]&&m[0][1]<s[1]&&(w("Match found."),f=!0,u=m[1],"suppress"!=m[1][0]&&"suppress"!=u||(w("Slot is responsive and being suppressed.  Filtering slot."),p=!1))}if(u.length>0&&p&&(w("Slot is responsive and not being suppressed.  Using responsive sizes: ",u),e[l].sizes=u),p){for(var g=0;g<e[l].sizes.length;g++){var v=e[l].sizes[g].join("x");a.indexOf(v)<0&&(w("Filtering out Invalid Size: ",v),e[l].sizes.splice(g,1),g-=1)}0==e[l].sizes.length&&(w("No Valid Sizes: ",e[l].sizes),p=!1);for(var y in r)e[l].rktr_slot_id.indexOf(r[y])>=0&&(w("Filtering out invalid slot type: ",r[y],e[l]),p=!1);for(var C in o)e[l].rktr_ad_id.indexOf(o[C])>=0&&(w("Filtering out invalid ad unit segment: ",o[C],e[l]),p=!1);if(p){w("Valid Slot: ",e[l]);var x={slotID:e[l].rktr_slot_id,sizes:e[l].sizes};N.push(x)}}}_("A9 Slot Building"),N.length>0?window.apstag.fetchBids({slots:N},i):w("No valid slots.")}function d(e,t){window.googletag.cmd.push(function(){var e=window.googletag.pubads().getSlots();A&&s(A,e,t),A||(w("No Bids."),t())})}function c(e,t){A=null,b("Refreshing A9 Bids"),window.apstag.fetchBids({slots:N},function(e){A=e,_("Refreshing A9 Bids");var n=window.googletag.pubads().getSlots();s(A,n,t)})}function u(){y||(w("Registering "+g+" module with AdFuel"),window.AdFuel.setOptions({queueCallbackTimeoutInMilliseconds:1e3,dispatchCallbackTimeoutInMilliseconds:1e3,refreshCallbackTimeoutInMilliseconds:2e3}),v=window.AdFuel.registerModule(g,{preQueueCallback:l,preDispatchCallback:d,preRefreshCallback:c})||v)}function p(){var e="3159";w("Defaulting to Domestic PubId."),w("Country Code: ",C),w("Hostname: ",S),w("Pathname: ",T),w("Selected Edition: ",x),S.search(/^(.*)?(edition|arabic)\./)>=0?(w("Full international site. Using International PubId."),e="3288"):S.search(/^(.*)?money/)>=0&&"/"===T&&"edition"===x?(w("International CNN Money Homepage. Using International PubId."),e="3288"):""==C||null==C?S.search(/^(.*)?(cnnespanol|cnne\-test)\./)>=0&&(w("No country code. Using International PubId."),e="3288"):"US"!==C&&"CA"!==C&&S.search(/^(.*)?(money|cnnespanol|cnne\-test|www\.cnn)\./)>=0&&(w("International country code. Using International PubId."),e="3288"),function(e,t,n,i,a,r,o){function s(n,i){t[e]._Q.push([n,i])}t[e]||(t[e]={init:function(){s("i",arguments)},fetchBids:function(){s("f",arguments)},_Q:[]},r=n.createElement(i),r.async=!0,r.src="//c.amazon-adsystem.com/aax2/apstag.js",o=n.getElementsByTagName(i)[0],o.parentNode.insertBefore(r,o))}("apstag",window,document,"script"),w("Final Pub ID: ",e),window.apstag.init({pubID:e,adServer:"googletag",videoAdServer:"freeWheel",bidTimeout:750}),window.apstag.fetchBids({slots:[{slotID:"videoSlotName1",mediaType:"video"}]},i)}var f=Object.prototype,h=f.toString,m=function(){},g="Amazon A9",v={metrics:{},addMetric:m,getMetricById:m,getMetricsByType:m,getMetricTypes:m},y=!1,w=m,b=m,_=m;(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e})(window.console)&&function(e){return"[object Function]"===h.call(e)}(window.console.log)&&"true"==function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}("debug")&&(w=function(){var e=["[AdFuelModule - "+g+" v1.3.6]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)},b=function(){var e=["[AdFuelModule - "+g+" v1.3.6 TIMER] "];e.push.apply(e,arguments);var t=e.join("");window.console.time(t)},_=function(){var e=["[AdFuelModule - "+g+" v1.3.6 TIMER] "];e.push.apply(e,arguments);var t=e.join("");window.console.timeEnd(t)});var C=(e("CG")?e("CG").substr(0,2):"")||e("countryCode"),x=e("SelectedEdition")?e("SelectedEdition"):"www",E=document.createElement("a");E.href=document.location.href;var A,S=E.hostname,T=E.pathname,N=[],k=[];w("Initializing "+g+" Module..."),function(){p(),window.AdFuel&&window.AdFuel.cmd?window.AdFuel.cmd.push(u):window.AdFuel?u():document.addEventListener?document.addEventListener("AdFuelCreated",u,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",u),window.A9VideoAPI={setTargeting:a,refreshTargeting:r}}()}(),window.AmazonDirectMatchBuy=function(){function e(e,t){return null!=e&&m.call(e,t)}function t(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function n(e){return function(){e&&(e.apply(this,arguments),e=null)}}function i(e){var t=!1,n=null;if(localStorage&&(t=!0),"undefined"==typeof value){t&&(n=localStorage.getItem(e)),t&&null!==n||(n=function(t){if(document.cookie){for(var n=document.cookie.split(";"),i=e+"=",a=0;a<n.length;a++){for(var r=n[a];" "==r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(i))return r.substring(i.length,r.length)}return""}return""}(e));try{n=JSON.parse(n)}catch(e){n=n}return n}}function a(){return!!window.amznads}function r(){var e={};return a()&&(e=window.amznads.getTargeting(),t(e)||(e={})),e}function o(e){var t=e.getId();if(E.has(t)){var n=E.getKeys(t);if(n.length){y("clearing previous ad key-values: "+n.join(", "));for(var i=0,a=n.length;i<a;++i)e.setAdKeyValue(n[i],null);E.clearKeys(t)}}}function s(e,t,n){y("setting ad key-value: "+t+' = "'+n+'"'),E.addKey(e.getId(),t),e.setAdKeyValue(t,n)}function l(t){var n=r();o(t);for(var i in n)if(e(n,i)){var a=n[i];if(a instanceof Array)for(var l=0,d=a.length;l<d;++l)s(t,a[l],"1");else s(t,i,a)}}function d(e){e.getPlayerType()===CVP.FLASH&&(y("setAdKeyValuePairs",e),l(e))}function c(e){if(!a())return!e||e();var t=n(function(){window.amznads.getTargeting();return!e||e()});try{window.amznads.getAdsCallback(_,t,C)}catch(e){y("Exception thrown while requesting Amazon ads:",e),t()}}function u(e){y("initializing",e),e&&(_=e.amznkey||_,C=e.timeout||C),x=!0}function p(e){return function(){if(!x)return void y("ERROR: init() must be called first!");e.apply(this,arguments)}}var f=Array.prototype,h=Object.prototype,m=h.hasOwnProperty,g=f.slice,v=h.toString,y=function(){};t(window.console)&&function(e){return"[object Function]"===v.call(e)}(window.console.log)&&"true"==function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}("debug")&&(y=function(){var e=["[AdFuelModule - Amazon Video]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)});var w=(i("CG")?i("CG").substr(0,2):"")||i("countryCode");y("Country Code: ",w);var b=window.location.hostname.toLowerCase(),_="3159";""==w||null==w?b.search(/^(edition|arabic|cnnespanol|cnne\-test)\./)>=0&&(_="3288"):"US"!==w&&"CA"!==w&&b.search(/^(money|edition|arabic|cnnespanol|cnne\-test|www\.cnn)\./)>=0&&(_="3288");var C=1e3,x=!1,E=function(){function e(e){return e in a}function t(t,n){e(t)||(a[t]=[]),a[t].push(n)}function n(t){return e(t)?g.call(a[t]):[]}function i(t){return!!e(t)&&(a[t].length=0,!0)}var a={};return{has:e,clearKeys:i,getKeys:n,addKey:t}}();return{requestAdRefresh:p(c),getTargetingData:p(r),setAdKeyValuePairs:p(d),isAmazonApiAvailable:a,init:u}}(),!0===CNN.Features.enableAmazonDisplayAds&&function(e){var t=document,n=t.createElement("script"),i=t.getElementsByTagName("script")[0],a=/^(complete|loaded)$/,r=!1;n.type="text/javascript",n.async=!0,n.src=("https:"===document.location.protocol?"https:":"http:")+(CNN.AdsConfig.amazonOverride||"//c.amazon-adsystem.com/aax2/amzn_ads.js"),n.onload=n.onreadystatechange=function(){r||"readyState"in n&&a.test(n.readyState)||(n.onload=n.onreadystatechange=null,r=!0,e())},window.AmazonDirectMatchBuy?e():i.parentNode.insertBefore(n,i)}(function(){CNN.AdsConfig.amazon.amznkey?window.AmazonDirectMatchBuy.init(CNN.AdsConfig.amazon):window.AmazonDirectMatchBuy.init()}),!0===CNN.Features.enableCriteoAds&&function(){function e(){if(!d){v("Including Criteo Library..."),d=!0;var e=document,t=e.createElement("script"),n=e.getElementsByTagName("script")[0];t.type="text/javascript",t.async=!0,t.src="//static.criteo.net/js/ld/publishertag.js",n.parentNode.insertBefore(t,n)}}function t(){var e,t;return void 0!==window.innerWidth?(e=window.innerWidth,t=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!=document.documentElement.clientWidth?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):(e=document.getElementsByTagName("body")[0].clientWidth,t=document.getElementsByTagName("body")[0].clientHeight),[e,t]}function n(e,n){function i(){v("Setting LineItem Ranges..."),window.Criteo.SetLineItemRanges("0..5:0.01;5..30:0.05;30..100:1.00"),v("Previously Requested: ",S),v("Requesting Bids...",a),o.addMetric({type:"vendor",id:"Criteo",data:E}),S.placements=S.placements.concat(a.placements),window.Criteo.RequestBids(a,n,1100)}for(var a={placements:[]},r=0;r<e.length;r++){var s=e[r];if("page"!==s.rktr_slot_id){for(var l=[],d=t(),c=!1,u=!0,p=0;p<s.responsive.length;p++){var f=s.responsive[p];!c&&f[0][0]<d[0]&&f[0][1]<d[1]&&(c=!0,l=f[1],"suppress"!=f[1][0]&&"suppress"!=l||(u=!1))}u&&l.length>0?(v("Setting Sizes To Responsive Sizes: ",l),s.sizes=l):u||(s.sizes=[]);var h=s.sizes,m=s.rktr_slot_id,y=s.rktr_ad_id;E[m]=[],A[m]=0;var N=["super-ad-zone","super_ad_zone"];for(var k in N)s.rktr_ad_id.indexOf(N[k])>=0&&(v("Filtering out invalid ad unit segment: ",N[k],e[x]),u=!1);if(u)for(var I in T)if(T.hasOwnProperty(I)&&0===y.indexOf(I)&&y.search(/(super-ad-zone|super_ad_zone)/)){for(var F=0;F<h.length;F++){var R=h[F],O=R[0]||null,M=R[1]||null,D=null!==O?O*M:0,j=null!==O?O+"x"+M:R.join("x"),B=T[I][j]?T[I][j]:T[I]["ROS_"+j]?T[I]["ROS_"+j]:null;if("CNN"===I&&y.indexOf("homepage")>0&&(B=T[I]["HP_"+j]||B),["300x250","320x50"].indexOf(j)>=0&&g.any&&(v("Using Mobile zoneId for size: ",j),B=T.MOBILE[I][j]||null),null!==B){A[m]=D>A[m]?D:A[m];var P={slotid:m,zoneid:B,width:O,height:M,area:D};-1===E[m].indexOf(P)?(v("Pushing data...",P),E[m].push(P)):v("Skipping... Already exists...",P)}}break}}}var L=0;for(var m in E)for(var q=E[m],z=0;z<q.length;z++){var U=q[z];if(L>=w)break;if(C!=_||U.area==A[U.slotid]){for(var H={slotid:m,zoneid:U.zoneid},W=!1,Q=0;Q<a.placements.length;Q++)a.placements[Q].slotid===H.slotid&&a.placements[Q].zoneid===H.zoneid&&(W=!0);for(var V=0;V<S.placements.length;V++)S.placements[V].slotid===H.slotid&&S.placements[V].zoneid===H.zoneid&&(W=!0);if(W||(v("Placement does not yet exist.  Adding to collection.",H),a.placements.push(H)),L++,C==b)break}}a.placements.length>0?window.googletag.cmd.push(function(){window.Criteo.events.push(i)}):n()}function i(e,t){v("Setting DFP KeyValue Targeting...");try{window.googletag.cmd.push(function(){window.Criteo.SetDFPKeyValueTargeting()})}catch(e){y(e)}t()}function a(e,t){function n(){v("Setting LineItem Ranges..."),window.Criteo.SetLineItemRanges("0..3:0.01;3..8:0.05;8..20:0.50;20..30:1.00"),v("Requesting Bids...",S),o.addMetric({type:"vendor",id:"Criteo",data:E}),window.Criteo.RequestBids(S,a,1200)}var a=i.bind(null,e,t);window.Criteo.events.push(n)}function r(){v("Registering Module..."),o=window.AdFuel.registerModule("criteo",{postQueueCallback:n,preDispatchCallback:i,preRefreshCallback:a})||{addMetric:function(){}}}window.Criteo=window.Criteo||{},window.Criteo.events=window.Criteo.events||[];var o,s=Object.prototype,l=s.toString,d=!1,c=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,u=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,p=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,f=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),h=function(e,t){return e.test(t)},m=function(e){var t=e||navigator.userAgent,n=t.split("[FBAN");if(void 0!==n[1]&&(t=n[0]),n=t.split("Twitter"),void 0!==n[1]&&(t=n[0]),this.apple={phone:h(/iPhone/i,t),ipod:h(/iPod/i,t),tablet:!h(/iPhone/i,t)&&h(/iPad/i,t),device:h(/iPhone/i,t)||h(/iPod/i,t)||h(/iPad/i,t)},this.amazon={phone:h(u,t),tablet:!h(u,t)&&h(p,t),device:h(u,t)||h(p,t)},this.android={phone:h(u,t)||h(c,t),tablet:!h(u,t)&&!h(c,t)&&(h(p,t)||h(/Android/i,t)),device:h(u,t)||h(p,t)||h(c,t)||h(/Android/i,t)},this.windows={phone:h(/Windows Phone/i,t),tablet:h(/(?=.*\bWindows\b)(?=.*\bARM\b)/i,t),device:h(/Windows Phone/i,t)||h(/(?=.*\bWindows\b)(?=.*\bARM\b)/i,t)},this.other={blackberry:h(/BlackBerry/i,t),blackberry10:h(/BB10/i,t),opera:h(/Opera Mini/i,t),firefox:h(/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,t),chrome:h(/(CriOS|Chrome)(?=.*\bMobile\b)/i,t),device:h(/BlackBerry/i,t)||h(/BB10/i,t)||h(/Opera Mini/i,t)||h(/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,t)||h(/(CriOS|Chrome)(?=.*\bMobile\b)/i,t)},this.seven_inch=h(f,t),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},g=function(){var e=new m;return e.Class=m,e}(),v=function(){},y=function(){},w=8,b="F",_="L",C=_;(C=C.toUpperCase())!=b&&C!=_&&"A"!=C&&(C=_);var E={},A={},S={placements:[]},T={CNN:{"160x600":1047134,"300x250":1047135,"300x600":1047136,"728x90":1047137,HP_970x90:1128528,HP_970x250:1128527,ROS_970x90:1047140,ROS_970x250:1047139,"320x50":1047138},NBA:{"320x50":1083217,"728x90":1083216,"970x90":1083218,"300x250":1083215},NCAA:{"160x600":1083227,"320x50":1083230,"300x250":1083228,"728x90":1083229,"970x90":1083231},PGA:{"728x90":1083239,"300x250":1083237,"970x90":1083242,"300x600":1083238,"970x250":1083241,"320x50":1083240},ELEAGUE:{"320x50":1083245,"300x250":1083243,"728x90":1083244},CNNMoney:{"728x90":1083234,"970x90":1083236,"970x250":1083235,"300x250":1083232,"300x600":1083233},AS:{"320x50":1083225,"728x90":1083224,"300x250":1083223,"970x90":1083226},"TBS/shows/conan":{"300x250":1083219,"728x90":1083220,"970x90":1083222,"970x250":1083221},MOBILE:{CNN:{"300x250":1090825,"320x50":1090883},NBA:{"300x250":1090830,"320x50":1090884},NCAA:{"300x250":1090831,"320x50":1090885},PGA:{"300x250":1090832,"320x50":1090886},ELEAGUE:{"300x250":1090833,"320x50":1090887},CNNMoney:{"300x250":1090834,"320x50":1090834},AS:{"300x250":1090835,"320x50":1090888},"TBS/shows/conan":{"300x250":1090836}}};(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e})(window.console)&&function(e){return"[object Function]"===l.call(e)}(window.console.log)&&"true"==function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}("debug")&&(v=function(){var e=["[AdFuelModule - Criteo v1.2.10]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)},y=function(){var e=["[AdFuelModule - Criteo v1.2.10]"];e.push.apply(e,arguments),window.console.error.apply(window.console,e)}),function(){v("Initializing Module..."),e(),window.AdFuel&&window.AdFuel.cmd?window.AdFuel.cmd.push(r):window.AdFuel?r():document.addEventListener?document.addEventListener("AdFuelCreated",r,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",r)}()}(),!0===CNN.Features.enableRubiconFastlane&&function(){function e(){return void 0!==window.innerWidth?(viewportWidth=window.innerWidth,viewportHeight=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!=document.documentElement.clientWidth?(viewportWidth=document.documentElement.clientWidth,viewportHeight=document.documentElement.clientHeight):(viewportWidth=document.getElementsByTagName("body")[0].clientWidth,viewportHeight=document.getElementsByTagName("body")[0].clientHeight),[viewportWidth,viewportHeight]}function t(e){var t=!1,n=null;if(localStorage&&(t=!0),"undefined"==typeof value){t&&(n=localStorage.getItem(e)),t&&null!==n||(n=function(e){if(document.cookie){for(var t=document.cookie.split(";"),n=e+"=",i=0;i<t.length;i++){for(var a=t[i];" "==a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(n))return a.substring(n.length,a.length)}return null}return null}(e));try{n=JSON.parse(n)}catch(e){n=n}return n}}function n(){m("Adding Fastlane library to head of page.");var e=11078;m("Defaulting to Domesting Account ID."),m("Country Code: ",y),_.search(/^(.*)?(edition|arabic)\./)>=0?(m("Full international site.  Using International Account ID."),e=11016):_.search(/^(.*)?money\.cnn/)>=0&&"/"===C&&"edition"===w?(m("International CNN Money Homepage. Using International Account Id."),e=11016):""==y||null==y?_.search(/^(.*)?(edition|arabic|cnnespanol|cnne\-test)\./)>=0&&(m("No country code.  Using International Account ID."),e=11016):"US"!==y&&"CA"!==y&&_.search(/^(.*)?(money|cnnespanol|cnne\-test|www\.cnn)\./)>=0&&(m("International country code.  Using International Account ID."),e=11016),m("Final Account ID: "+e);var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"===document.location.protocol?"https:":"http:")+"//ads.rubiconproject.com/header/"+e+".js",document.getElementsByTagName("script")[0].parentNode.appendChild(t)}function i(e){clearTimeout(e),h.length=0}function a(t,n){if(v)m("Not building slots. Fastlane disabled."),n();else{m("Building slots for Fastlane",JSON.stringify(t)),g="";var a=setTimeout(function(){m("PreQueue Timeout Occurred."),window.AdFuel.addPageLevelTarget("fln_pqto","1"),n()},1200);window.rubicontag.cmd.push(function(){for(var r=[],o=1;o<t.length;o++){m("Checking Slot: ",t[o].rktr_slot_id);var s,l=t[o];(""==g||l.rktr_slot_id.indexOf("bnr_atf_01")>0)&&(m("Setting KW Ad Unit: ",l.rktr_ad_id),g=l.rktr_ad_id);var d={_atf_:"atf",_btf_:"btf",_mod_:"atf"},c=["160x600","300x250","300x600","320x50","728x90","970x90","970x250"],u=["_ns_","_nfs_"],p=["super-ad-zone","super_ad_zone"],f=["CNN/health","CNN/health/healthgrades","CNN/health/leaf","CNN/health/list","CNN/health/photos","CNN/health/specials","CNN/health/video","CNN/student-news"];for(var h in d)if(d.hasOwnProperty(h)&&l.rktr_slot_id&&l.rktr_slot_id.indexOf(h)>=0){var v=!0,y=!1;for(var w in u)l.rktr_slot_id.indexOf(u[w])>=0&&(m("Filtering out invalid slot type: ",u[w],l),v=!1);for(var b in p)l.rktr_ad_id.indexOf(p[b])>=0&&(m("Filtering out invalid ad unit segment: ",p[b],l),v=!1);for(var _ in f)l.rktr_ad_id==f[_]&&(m("Filtering out invalid ad unit: ",f[_],l),v=!1);for(var C=[],x=0;x<l.responsive.length;x++){var E=e(),A=l.responsive[x];!y&&A[0][0]<E[0]&&A[0][1]<E[1]&&(y=!0,C=A[1],"suppress"!=A[1][0]&&"suppress"!=C||(v=!1))}if(v&&C.length>0&&(m("Setting Sizes To Responsive Sizes: ",C),l.sizes=C),v)for(var S=0;S<l.sizes.length;S++){var T=l.sizes[S];"suppress"!==T&&(T=T.join("x")),c.indexOf(T)<0&&(m("Filtering out invalid size: ",T,l),l.sizes.splice(S,1))}if(0==l.sizes.length&&(v=!1,m("Filtering out slot with no valid sizes.",l.rktr_slot_id,l.rktr_ad_id)),v){m("Slot is a valid item for Rubicon Fastlane.");var N=d[h],k=!!document.getElementById(l.rktr_slot_id)&&document.getElementById(l.rktr_slot_id).className.indexOf("adfuel-rendered")>=0;if(m("Checking for cached Fastlane response for: ",l.rktr_slot_id),void 0!==window.rubiconSlotDictionary[l.rktr_slot_id]||k)void 0===window.rubiconSlotDictionary[l.rktr_slot_id]&&k?m("Element has already been rendered with an ad.  Skipping Fastlane auction for: ",l.rktr_slot_id):m("Using cached Fastlane response for: ",l.rktr_slot_id);else{m("Cached response not found. Defining Slot: ","/8664377/"+l.rktr_ad_id,l.sizes,l.rktr_slot_id),s=window.rubicontag.defineSlot("/8664377/"+l.rktr_ad_id,l.sizes,l.rktr_slot_id),m("Setting Position: ",N),s.setPosition(N);for(var I=l.targeting,F=0;F<I.length;F++){var R=I[F];"pos"==R[0]&&(Array.isArray(R[1])?(m("Setting POS Keyword For "+l.rktr_slot_id,R[1][0]),s.setFPI("pos",R[1][0])):(m("Setting POS Keyword For "+l.rktr_slot_id,R[1]),s.setFPI("pos",R[1])))}m("Setting Keyword For "+l.rktr_slot_id,l.rktr_ad_id),s.addKW(l.rktr_ad_id),r.push(s),window.rubiconSlotDictionary[l.rktr_slot_id]=s}}}}for(var O=g.split("/"),M=["site","section","subsection"],D=0;D<O.length&&D<3;D++)m("Setting FPI",M[D],O[D]),window.rubicontag.setFPI(M[D],O[D]);window.CNN&&window.CNN.getCapTopics&&window.rubicontag.setFPI("cap_topics",Object.getOwnPropertyNames(window.CNN.getCapTopics())),window.rubicontag.setFPI("ssl","https:"===document.location.protocol?1:0),window.rubicontag.run(function(){i(a),n()},{slots:r})})}}function r(e){m("setting fastlane targeting"),window.googletag.cmd.push(function(){var t=window.AdFuel.pageSlots;m({slots:e,gptSlots:t});for(var n={},i=0;i<e.length;i++){var a=e[i];if(m("Slot ID: ",a.rktr_slot_id),t[a.rktr_slot_id]){var r=t[a.rktr_slot_id];m("calling window.rubicontag.setTargetingForGPTSlot..."),window.rubicontag.setTargetingForGPTSlot(r),window.refreshableRubiconSlots[a.rktr_slot_id]=window.rubiconSlotDictionary[a.rktr_slot_id];for(var o=r.getTargetingKeys(),s={},l=!1,d=0;d<o.length;d++)o[d].indexOf("rpfl_")>=0&&(l||(m("removing fln_to=1 and setting fln_to=0 for "+r.getSlotElementId()),window.AdFuel.removeSlotLevelTarget(r.getSlotElementId(),"fln_to"),window.AdFuel.addSlotLevelTarget(r.getSlotElementId(),"fln_to","0"),l=!0),m("Set Fastlane Targeting...",{slot:r.getSlotElementId(),target:{key:o[d],value:r.getTargeting(o[d])}}),s[o[d]]=r.getTargeting(o[d]));n[a.rktr_slot_id]=s}}f.addMetric({type:"modules",id:"Fastlane",data:{targeting:n}})})}function o(e){m("Fastlane Creative Rendered: ",e),f.addMetric({type:"modules",id:"Fastlane",data:e})}function s(e,t){window.rubicontag.cmd.push(function(){if(window.rubicontag.addEventListener("HL_CREATIVE_RENDERED",o),!v){var n=setTimeout(function(){t()},1e3);m("preDispatch"),r(e),clearTimeout(n)}}),t()}function l(e,t){if(v)t();else{m("preRefresh");var n=[],i=[],a=window.AdFuel.pageSlots;e||(e=Object.getOwnPropertyNames(a));for(var o=0;o<e.length;o++){var s=e[o];if(m("Slot ID: ",s),a[s]){var l=a[s],d=l.getTargetingKeys();for(var c in d)if(d.hasOwnProperty(c)){var u=d[c];u.indexOf("rpfl")>=0&&window.AdFuel.removeSlotLevelTarget(s,u)}f.addMetric({type:"modules",id:"Fastlane",data:{targeting:{}}}),window.rubiconSlotDictionary[s]&&n.push(window.rubiconSlotDictionary[s]),i.push({rktr_slot_id:s})}}m("refreshing slots",{slotsToRefresh:n}),window.rubicontag.run(function(){r(i),t()},{slots:n})}}function d(){v?m("Fastlane disabled. Not registering module."):(window.AdFuel.setOptions({queueCallbackTimeoutInMilliseconds:1200,dispatchCallbackTimeoutInMilliseconds:1200,refreshCallbackTimeoutInMilliseconds:1200}),f=window.AdFuel.registerModule("Fastlane",{preQueueCallback:a,preDispatchCallback:s,preRefreshCallback:l})||{metrics:{},addMetric:p,getMetricById:p,getMetricsByType:p,getMetricTypes:p})}window.rubicontag=window.rubicontag||{},window.rubicontag.cmd=window.rubicontag.cmd||[];var c=Object.prototype,u=c.toString,p=function(){return!1},f={metrics:{},addMetric:p,getMetricById:p,getMetricsByType:p,getMetricTypes:p},h=[],m=function(){},g="",v=!1,y=(t("CG")?t("CG").substr(0,2):"")||t("countryCode"),w=t("SelectedEdition")?t("SelectedEdition"):"www",b=document.createElement("a");b.href=document.location.href;var _=b.hostname,C=b.pathname;(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e})(window.console)&&function(e){return"[object Function]"===u.call(e)}(window.console.log)&&"true"==function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}("debug")&&(m=function(){var e=["[AdFuelModule - Rubicon Fastlane v2.7.7]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)}),window.rubiconSlotDictionary={},window.refreshableRubiconSlots={},function(){n(),window.AdFuel?d():document.addEventListener?document.addEventListener("AdFuelCreated",d,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",d)}()}(),!0===CNN.Features.enableInViewRefresh&&function(){function e(e,t,n){e.addEventListener?e.addEventListener(t,n,!0):e.attachEvent&&e.attachEvent("on"+t,n)}function t(){g||(window.googletag.cmd.push(function(){window.googletag.pubads().addEventListener("impressionViewable",function(e){var t=e,n=t.slot.getSlotElementId();m[n].listenersSet?A("Refreshable In View Slot listeners have already been set for: ",n,{object:m[n]}):(A("Refreshable In View Slot listeners have not been set: ",n,{object:m[n]}),l(t))}),window.googletag.pubads().addEventListener("slotVisibilityChanged",function(e){a(e)})}),e(document,"visibilitychange",n),g=!0,A("Listeners Started!"))}function n(e){A("Visibility Change Event: ",e),A("Relaying to _focusChanged..."),v=!document.hidden,e.target=e.target||{},e.target.hidden=e.target.hidden||document.hidden,i(e)}function i(e){if(document.hidden)A("Page is hidden.  Destroying all intervals..."),s();else{A("Page is not hidden. Checking Intervals...");for(var t in m)if(m.hasOwnProperty(t)){A({index:t,slot:m[t]});var n=r(t);n?A("Interval exists...",t):(A("Creating Interval...",t),u())}}}function a(e){var t=e.inViewPercentage||0,n=e.slot.getSlotElementId();if(t>=w)if(A("Element ["+n+"] Meets In-View Percentage Requirements"),v){A("... and page has focus");var i=r(n);i||(A("... interval does not exist"),o(n))}else A("... but page does not have focus.  Not creating interval.");else{A("Element ["+n+"] Does NOT Meet In-View Percentage Requirements");var i=r(n);i&&(A("Found Interval for Element ["+n+"]... Destroying Interval."),s(n))}}function r(e){return null!=m[e].timer&&m[e].timer}function o(e){if(m.hasOwnProperty(e)){var t=m[e]
;t.inViewRefreshCounter=m[e].inViewRefreshCounter||0,A("Creating Interval for: ",e),t.timer=window.setInterval(function(){if(t.inViewRefreshCount>0){t.el=t.el||document.getElementById(e);var n=t.el.id;t.inViewRefreshCount--,t.inViewRefreshCounter++,window.AdFuel.removeSlotLevelTarget(n,"rfv"),window.AdFuel.addSlotLevelTarget(n,"rfv",m[n].inViewRefreshCounter),E.addMetric({type:"viewability",id:n,data:{refresh_count:t.inViewRefreshCounter,last_refresh:Date.now()}}),t.inViewRefreshCount>=0&&(A("Slot ["+n+"] is in view and is being refreshed."),window.AdFuel.refresh([n]),A("Slot ["+t.el.id+"] is in view, was just refreshed, and still has "+t.inViewRefreshCount+" refreshes remaining."))}else A("Slot ["+e+"] is in view but has no refreshes remaining.",t,t.inViewRefreshCount)},y)}}function s(e){if(e){A("Destroying interval for: ",e);var t=m[e];window.clearInterval(t.timer),t.timer=null,t.inView=!1}else{A("Destroying All Intervals");for(var n in m)if(m.hasOwnProperty(n)){A("Destroying interval for: ",n);var t=m[n];window.clearInterval(t.timer),t.timer=null,t.inView=!1}}}function l(e){A("Checking Element: ",{event:e});var t=e.slot.getSlotElementId(),n=document.getElementById(t);A("Creating In View Refresh Object: ",{divId:t,el:n});var i=!!e.slot&&(!!e.slot.l&&e.slot.l._empty_);if(A("Is Slot Empty: ",i),i)A("Slot is empty.");else if(A("Slot Rendered: "+t),A("Registered Slots: ",b),b.indexOf(t)>=0){A("Slot is registered with InView Refresh"),m[t].inView=!1,m[t].el=n,m[t].refreshCount=0,m[t].listenersSet=!0;parseInt(m[t].inViewRefreshCount)}else A("Slot is NOT registered with InView Refresh")}function d(e,t,n,i,a,r,o,s,l){var d=Math.max(n,o),c=Math.min(i,s),u=Math.max(e,a),p=Math.min(t,r),f=0,h=d>=n&&d<=i,m=c>=n&&c<=i,g=u>=e&&u<=t,v=p>=e&&p<=t;h&&m&&g&&v&&(f=(c-d)*(p-u));var y=(r-a)*(s-o),w=0;return y>0&&(w=f/y),A("["+l.id+"] - Ratio Area: ",w),w}function c(e){var t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,n=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,i=window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft,a=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop;t=parseInt(t),n=parseInt(n),i=parseInt(i),a=parseInt(a);var r=parseInt(e.clientWidth),o=parseInt(e.clientHeight),s=e.getBoundingClientRect(),l=s.left+document.body.scrollLeft,c=s.top+document.body.scrollTop,u=l+r,p=c+o,f=i+t,h=a+n,m=d(i,f,a,h,l,u,c,p,e);return A("["+e.id+"] - Viewable Percent: ",m),100*m}function u(){A("Detecting In View Slots."),m.length<1&&A("No registered slots have been rendered yet.");for(var e in m){A("Testing: ",e);var t=m[e],n=t.el||document.getElementById(e),i=!1;n&&(i=n&&v&&c(n)>=w&&parseInt(m[e].inViewRefreshCount)>0);var a=r(elementId);A("Test Result: ",{viewtest:i,interval:a,test:viewtest&&!a}),i&&!a&&o(e)}}function p(e,n){for(var i=!1,a=1;a<e.length;a++){var r=e[a];r.hasInViewRefresh=e[0].hasInViewRefresh?e[0].hasInViewRefresh:r.hasInViewRefresh||"false","true"==r.hasInViewRefresh&&(r.inViewRefreshCounter=0,i=!0,b.push(r.rktr_slot_id),E.addMetric({type:"viewability",id:r.rktr_slot_id,data:{is_in_view:!1,was_in_view:!1,moused_over:"0",refresh_count:"0",max_refresh:JSON.parse(JSON.stringify(r.inViewRefreshCount))}}))}return E.addMetric({type:"modules",id:"In View Refresh",data:{registeredSlots:b}}),i&&t(),n&&n(),null}function f(e,t){for(var n=0;n<e.length;n++){var i=e[n];"true"==i.hasInViewRefresh?(A("Slot is configured for in view refresh.  Creating _refreshableInViewSlots["+i.rktr_slot_id+"]..."),m[i.rktr_slot_id]=i):A("Slot is not configured for in view refresh. ["+i.rktr_slot_id+"]")}if(m.length>0){E.addMetric({type:"viewability",id:"General",data:{viewability:"active",render_listener:"Active",window_listener:"Active",mutation_observer:"Inactive",registeredSlots:Object.getOwnPropertyNames(m).length,criteria:100*r+"% in view for "+a/1e3+" seconds"}});var a=35e3,r=.5}E.addMetric({type:"modules",id:"In View Refresh",data:{registeredSlots:Object.getOwnPropertyNames(m)}}),t()}function h(){E=window.AdFuel.registerModule("In View Refresh",{preQueueCallback:p,preDispatchCallback:f})}var m={},g=!1,v=!document.hidden,y=35e3,w=50,b=[],_=Object.prototype,C=_.toString,x=function(){return!1},E={metrics:{},addMetric:x,getMetricById:x,getMetricsByType:x,getMetricTypes:x},A=function(){};(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e})(window.console)&&function(e){return"[object Function]"===C.call(e)}(window.console.log)&&"true"==function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}("debug")&&(A=function(){var e=["[AdFuelModule - In View Refresh]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)},function(){var e=["[AdFuelModule - In View Refresh ERROR]"];e.push.apply(e,arguments),window.console.error.apply(window.console,e)}),function(){A("FOCUSED: ",v),window.AdFuel?h():e(window,"AdFuelCreated",h),setInterval(function(){window.AdFuel.updateCorrelator&&window.AdFuel.updateCorrelator()},3e4)}()}(),!0===CNN.Features.enableIndexExchange&&function(){function e(e){var t=!1,n=null;if(localStorage&&(t=!0),"undefined"==typeof value){t&&(n=localStorage.getItem(e)),t&&null!==n||(n=function(e){if(document.cookie){for(var t=document.cookie.split(";"),n=e+"=",i=0;i<t.length;i++){for(var a=t[i];" "==a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(n))return a.substring(n.length,a.length)}return""}return""}(e));try{n=JSON.parse(n)}catch(e){n=n}return n}}function t(e){if(!r){console.log("[AdFuel Module - "+i+" "+a+"] Including "+i+" Library...",e),r=!0;var t=document,n=t.createElement("script"),o=t.getElementsByTagName("script")[0];n.type="text/javascript",n.async=!0,n.src=e,o.parentNode.insertBefore(n,o)}}function n(){console.log("[AdFuel Module - "+i+" "+a+"] Registering Module..."),window.AdFuel.registerModule(i,{})}var i="Index Exchange Wrapper",a="v1.01",r=!1,o=(e("CG")?e("CG").substr(0,2):"")||e("countryCode"),s={"^(.*\\.)?(www\\.)?cnn\\.com":"96070407099023","^(.*\\.)?edition\\.cnn\\.com":"129055748395673","^(.*\\.)?us\\.cnn\\.com":"96070407099023","^(.*\\.)?money\\.cnn\\.com":"144448918822171","^(.*\\.)?(cnne-test|cnnespanol)\\.cnn\\.com":"263196174718504","^(.*\\.)?arabic\\.cnn\\.com":"164240128263733"};!function(){var e=null;Object.keys(s).forEach(function(t){var n=new RegExp(t);0===window.location.hostname.search(n)&&(e="//js-sec.indexww.com/ht/p/186370-"+s[t]+".js")}),console.log("[AdFuel Module - "+i+" "+a+"] Script URL: ",e);var r="US"!==o&&"CA"!==o;console.log("[AdFuel Module - "+i+" "+a+"] Initializing Module..."),r&&null!==e?t(e):console.log("[AdFuel Module - "+i+" "+a+"] Country ["+(o||"undefined")+"] and/or Hostname ["+window.location.hostname+"] is invalid."),window.AdFuel&&window.AdFuel.cmd?window.AdFuel.cmd.push(n):window.AdFuel?n():document.addEventListener?document.addEventListener("AdFuelCreated",n,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",n)}()}(),!0===CNN.Features.enableIntegralAdScience&&function(){function e(e){d("IAS Data Handler..."),d({adSlots:e}),window.__iasPET.setTargetingForGPT()}function t(t,n){d("Building slots for IAS..."),window.__iasPET.pubId="925660",d("Asset: ",t,"Slots: ",t.length-1);for(var i=[],a=1;a<t.length;a++)d("Checking Slot: ",t[a]),t[a].rktr_ad_id.search(/^cnni\/(video|homepage|(.+\/(landing|main|video)))/)<0?(d("Pushing Slot: ",{adSlotId:t[a].rktr_slot_id,size:t[a].sizes,adUnitPath:"/8663477/"+t[a].rktr_ad_id}),i.push({adSlotId:t[a].rktr_slot_id,size:t[a].sizes,adUnitPath:"/8663477/"+t[a].rktr_ad_id})):d("Invalid Slot: ",t[a].rktr_ad_id);d("Built Ad Slots: ",i),window.__iasPET.queue.push({adSlots:i,dataHandler:e}),setTimeout(function(){n()},900)}function n(e,t){setTimeout(function(){d("Adding IAS Targeting to slots...");try{window.__iasPET.setTargetingForGPT()}catch(e){c("Could not set IAS targeting: ",e)}t()},900)}function i(){u&&(d("Registering "+l+" module with AdFuel"),window.AdFuel.setOptions({queueCallbackTimeoutInMilliseconds:1e3,dispatchCallbackTimeoutInMilliseconds:1e3}),metricApi=window.AdFuel.registerModule(l,{preQueueCallback:t,preDispatchCallback:n})||metricApi)}function a(){if(-1!==document.location.hostname.search(/^edition.*\.cnn\.com$/)||"localhost"===document.location.hostname){d("Adding IAS script to head...");var e=document.createElement("script");e.async=!0,e.src="//cdn.adsafeprotected.com/iasPET.1.js";var t=document.getElementsByTagName("head")[0];t.insertBefore(e,t.firstChild),u=!0}}var r=Object.prototype,o=r.toString,s=function(){},l="Integral Ad Science",d=s,c=s;(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e})(window.console)&&function(e){return"[object Function]"===o.call(e)}(window.console.log)&&"true"==function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}("debug")&&(d=function(){var e=["[AdFuelModule - "+l+"]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)},c=function(){var e=["[AdFuelModule - "+l+"]"];e.push.apply(e,arguments),window.console.warn.apply(window.console,e)},function(){var e=["[AdFuelModule - "+l+" ERROR]"];e.push.apply(e,arguments),window.console.error.apply(window.console,e)},function(){var e=["[AdFuelModule - "+l+" TIMER] "];e.push.apply(e,arguments);var t=e.join("");window.console.time(t)});var e,u=!1;window.__iasPET=window.__iasPET||{},window.__iasPET.queue=window.__iasPET.queue||[],d("Initializing "+l+" Module..."),function(){a(),window.AdFuel&&window.AdFuel.cmd?window.AdFuel.cmd.push(i):window.AdFuel?i():document.addEventListener?document.addEventListener("AdFuelCreated",i,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",i)}()}(),!0===CNN.Features.enableKrux&&function(){function e(){new RegExp(r);if(document.location.search){var e,t=document.location.search.search(r)+1;try{e=decodeURIComponent(document.location.search).search(r)+1}catch(n){e=t}return t||e}return!1}function t(){new RegExp(r);if(document.location.hash){var e,t=document.location.hash.search(r)+1;try{e=decodeURIComponent(document.location.hash).search(r)+1}catch(n){e=t}return t||e}return!1}function n(){new RegExp(r);if(document.referrer){var e,t=document.referrer.search(r)+1;try{e=decodeURIComponent(document.location.referrer).search(r)+1}catch(n){e=t}return t||e}return!1}var i=function(){return!1},a={addMetric:i,getMetricById:i,getMetricsByType:i,getMetricTypes:i},r=/(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})/i;window.Krux||((window.Krux=function(){window.Krux.q.push(arguments)}).q=[]),function(){function e(e){var t="kx"+e,n=function(){try{return window.localStorage}catch(e){return null}}();if(n)return n[t]||"";if(navigator.cookieEnabled){var i=document.cookie.match(t+"=([^;]*)");return i&&unescape(i[1])||""}return""}window.Krux.user=e("user"),window.Krux.segments=e("segs")?e("segs").split(","):[]}(),window.krux_getDESegments=function(){var e="&kxid=";return window.Krux.user&&(e+=window.Krux.user),e+="&kxseg="+window.kvs.join(",")},window.krux_getFWSegments=function(){return"kxseg="+window.kvs.join(",kxseg=")},window.krux_getUser=function(){return window.Krux.user},window.krux_getFWKeyValues=function(e,t){for(var n=e||"_fwu:386123:",i=t||35,a={},r=0;r<window.Krux.segments.length;r++)r<i&&(a[n+window.Krux.segments[r]]=1);return a},window.Krux.setControlTag=function(i){function r(){function e(){var e=window.Krux.user,t=window.Krux.segments.filter(function(e,t){return t<35});l("setting krux targeting",{kuid:e,ksg:t}),a=window.AdFuel.registerModule("Krux",{}),window.AdFuel.addPageLevelTarget("kuid",e),window.AdFuel.addPageLevelTarget("ksg",t),a.addMetric({type:"modules",id:"Krux",data:{targeting:{kuid:e,ksg:t}}})}window.AdFuel?e():document.addEventListener?document.addEventListener("AdFuelCreated",e,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",e)}var o=Object.prototype,s=o.toString,l=function(){};(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e})(window.console)&&function(e){return"[object Function]"===s.call(e)}(window.console.log)&&"true"==function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}("debug")&&(l=function(){var e=["[AdFuelModule - Krux v1.2.1]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)});var d=document,c=d.createElement("script"),u=d.getElementsByTagName("script")[0],p=/^(complete|loaded)$/,f=!1;c.type="text/javascript",c.async=!0;var h,m=(h=d.location.href.match(/\bkxsrc=([^&]+)/))&&decodeURIComponent(h[1]);c.src=/^https?:\/\/([^\/]+\.)?krxd\.net(:\d{1,5})?\//i.test(m)?m:"disable"===m?"":("https:"===d.location.protocol?"https:":"http:")+"//cdn.krxd.net/controltag?confid="+i,c.onload=c.onreadystatechange=function(){f||"readyState"in c&&p.test(c.readyState)||(c.onload=c.onreadystatechange=null,f=!0,r())},t()||e()||n()||u.parentNode.insertBefore(c,u)};var o=window.location.hostname.toLowerCase().match(/^edition\.cnn\.com/)?"ITb_9Zup":"ITb_4eqO";window.Krux.setControlTag(o)}(),!0===CNN.Features.enablePiiAdFilter&&function(){function e(){new RegExp(a);if(document.location.search){var e,t=document.location.search.search(a)+1;try{e=decodeURIComponent(document.location.search).search(a)+1}catch(n){e=t}return t||e}return!1}function t(){new RegExp(a);if(document.location.hash){var e,t=document.location.hash.search(a)+1;try{e=decodeURIComponent(document.location.hash).search(a)+1}catch(n){e=t}return t||e}return!1}function n(){new RegExp(a);if(document.referrer){var e,t=document.referrer.search(a)+1;try{e=decodeURIComponent(document.location.referrer).search(a)+1}catch(n){e=t}return t||e}return!1}function i(){if(e()||t()||n()){console.log("[AdFuelModule - PII Filter] Filtering DFP Request due to PII in query string.");for(var i=Object.getOwnPropertyNames(window.AdFuel),a=0;a<i.length;a++)window.AdFuel[i[a]]=function(){};window.googletag=null}}var a=/(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})/i;!function(){window.AdFuel?i():document.addEventListener?document.addEventListener("AdFuelCreated",i,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",i)}()}(),!0===CNN.Features.enableProximic&&function(){function e(e){f="",window.proximicData=[],window.AdFuel.removePageLevelTarget("pconid");var n=e||document.location.href;window.location.hostname.toLowerCase().match(/^train\.next\.cnn\.com/)&&n.replace("train.next.","www"),p="//segment-data-us-east.zqtk.net/turner-47fcf6?url="+encodeURIComponent(n),document.getElementById("proximic-script"),g=!1,t(),l=0,a()}function t(){if(!g){var e=document.createElement("script");e.id="proximic-script",e.type="text/javascript",e.async=!0,e.src=("https:"===document.location.protocol?"https:":"http:")+p;document.getElementsByTagName("script")[0].parentNode.appendChild(e),v("Added Proximic script to head of page.",p),g=!0}}function n(e,t){""!==e&&void 0!==e&&(v("Setting data for DFP",e),window.AdFuel.addPageLevelTarget("pconid",e),window.AdFuel.removePageLevelTarget("prx_to","1"),window.AdFuel.addPageLevelTarget("prx_to","0"),s.addMetric({type:"modules",id:"Proximic",data:{targeting:{pconid:e}}}),t&&t())}function i(e,n){var i,r,o=!0,s=!1;try{for(document.location.hostname.indexOf("money")>=0&&(!window.CNNMONEY||!window.CNNMONEY.adTargets||!window.CNNMONEY.adTargets.c_type||["article","video","gallery"].indexOf(window.CNNMONEY.adTargets.c_type)<0)&&(o=!1),r=1;r<e.length;r++){if(i=e[r].rktr_ad_id.toLowerCase(),s=document.location.hostname.indexOf("explorepartsunknown.com")>=0&&i.search(/(leaf)/)>0,v("Is this page for ExplorePartsUnknown: ",s),v("Should Proximic Be Included: ",i.search(/^cnn\/(homepage|(.+\/landing))/)<0&&i.search(/^cnni\/(homepage|(.+\/(landing|main)))/)<0&&o||s),i.search(/^cnn\/(homepage|(.+\/landing))/)<0&&i.search(/^cnni\/(homepage|(.+\/(landing|main)))/)<0&&o||s){v("Adding Proximic based on ad unit specifications: ",i),t(),a(n);break}v("Filtering Proximic based on ad unit specifications: ",i)}}catch(e){v("Error parsing Proximic data: ",e.message||"Unknown")}}function a(e){v("Waiting for data..."),setTimeout(function(){l++,v("SegmentData: ",f),""!==f&&void 0!==f?(v("Proximic Data found!"),n(f,e)):l*d<c?a(e):(v("Proximic Timeout Occurred!"),window.AdFuel.addPageLevelTarget("prx_to","1"),e&&e())},d)}function r(){s=window.AdFuel.registerModule("Proximic",{postQueueCallback:i})||s,window.AdFuel.addPageLevelTarget("prx_to","1"),document.location.hostname.indexOf("explorepartsunknown.com")>=0&&"/watch/"===document.location.pathname&&(v("On https://explorepartsunknown.com/watch..."),t(),a())}var o=function(){return!1},s={addMetric:o,getMetricById:o,getMetricsByType:o,getMetricTypes:o},l=0,d=50,c=2e3,u=document.location.href;window.location.hostname.toLowerCase().match(/^train\.next\.cnn\.com/)&&u.replace(/^http[s]?:\/\/(train|stage|sweet)(\.next)?\.cnn\.com/,"$1www");var p="//segment-data-us-east.zqtk.net/turner-47fcf6?url="+encodeURIComponent(u),f="",h=Object.prototype,m=h.toString,g=!1;window.proximicData=[];var v=function(){};(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e})(window.console)&&function(e){return"[object Function]"===m.call(e)}(window.console.log)&&"true"==function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}("debug")&&(v=function(){var e=["[AdFuelModule - Proximic/comScore]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)}),window.gotSegmentData=function(e){e.data&&(v("Segment Data: ",e.data),f=e.data,window.proximicData=e.data)},window.recallProximic=e,function(){window.AdFuel?r():document.addEventListener?document.addEventListener("AdFuelCreated",r,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",r)}()}()),function(){if(!window.Aspen){var VERSION="1.8.0",debug=-1!==[window.location.search,window.location.hash].join().search(/\bdmtdebug\b/),Class=function(){var e=!1,t=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,n=function(){};return n.extend=function(n){function i(){!e&&this.init&&this.init.apply(this,arguments)}var a=this.prototype;e=!0;var r=new this;e=!1;for(var o in n)r[o]="function"==typeof n[o]&&"function"==typeof a[o]&&t.test(n[o])?function(e,t){return function(){var n=this._super;this._super=a[e];var i=t.apply(this,arguments);return this._super=n,i}}(o,n[o]):n[o];return i.prototype=r,i.constructor=i,i.extend=arguments.callee,i},n}();!function(e,t,n){function i(){var e=p;return e.loader={load:a,i:0},e}function a(e,t,n){var i="c"==t?S:A;return y=0,t=t||"j",k(e)?r(i,e,t,this.i++,f,n):(v.splice(this.i++,0,e),1==v.length&&o()),this}function r(e,n,i,a,r,s){function l(){!f&&c(u.readyState)&&(g.r=f=1,!y&&d(),u.onload=u.onreadystatechange=null,h(function(){_.removeChild(u)},0))}var u=t.createElement(e),f=0,g={t:i,s:n,e:s};u.src=u.data=n,!b&&(u.style.display="none"),u.width=u.height="0","object"!=e&&(u.type=i),u.onload=u.onreadystatechange=l,"img"==e?u.onerror=l:"script"==e&&(u.onerror=function(){g.e=g.r=1,o()}),v.splice(a,0,g),_.insertBefore(u,b?null:m),h(function(){f||(_.removeChild(u),g.r=g.e=f=1,d())},p.errorTimeout)}function o(){var e=v.shift();y=1,e?e.t?h(function(){"c"==e.t?s(e):l(e)},0):(e(),d()):y=0}function s(e){var n,i=t.createElement("link");if(i.href=e.s,i.rel="stylesheet",i.type="text/css",e.e||!x&&!w)i.onload=function(){n||(n=1,h(function(){d()},0))},e.e&&i.onload();else{var a=function(e){h(function(){if(!n)try{e.sheet.cssRules.length?(n=1,d()):a(e)}catch(t){1e3==t.code||"security"==t.message||"denied"==t.message?(n=1,h(function(){d()},0)):a(e)}},0)};a(i)}h(function(){n||(n=1,d())},p.errorTimeout),!e.e&&m.parentNode.insertBefore(i,m)}function l(e){var n,i=t.createElement("script");i.src=e.s,i.onreadystatechange=i.onload=function(){!n&&c(i.readyState)&&(n=1,d(),i.onload=i.onreadystatechange=null)},h(function(){n||(n=1,d())},p.errorTimeout),e.e?i.onload():m.parentNode.insertBefore(i,m)}function d(){for(var e=1,t=-1;v.length-++t&&(!v[t].s||(e=v[t].r)););e&&o()}function c(e){return!e||"loaded"==e||"complete"==e}var u,p,f=t.documentElement,h=e.setTimeout,m=t.getElementsByTagName("script")[0],g={}.toString,v=[],y=0,w="MozAppearance"in f.style,b=w&&!!t.createRange().compareNode,_=b?f:m.parentNode,C=e.opera&&"[object Opera]"==g.call(e.opera),x="webkitAppearance"in f.style,E=x&&"async"in t.createElement("script"),A=w?"object":C||E?"img":"script",S=x?"img":A,T=Array.isArray||function(e){return"[object Array]"==g.call(e)},N=function(e){return Object(e)===e},k=function(e){return"string"==typeof e},I=function(e){return"[object Function]"==g.call(e)},F=[],R={};p=function(e){function t(e,t){function n(e){if(k(e))a(e,l,t,0,r);else if(N(e))for(i in e)e.hasOwnProperty(i)&&a(e[i],l,t,i,r)}var i,r=!!e.test,o=r?e.yep:e.nope,s=e.load||e.both,l=e.callback;n(o),n(s),e.complete&&t.load(e.complete)}function a(e,t,a,o,s){var l=r(e),d=l.autoCallback;if(!l.bypass){if(t&&(t=I(t)?t:t[e]||t[o]||t[e.split("/").pop().split("?")[0]]),l.instead)return l.instead(e,t,a,o,s);a.load(l.url,l.forceCSS||!l.forceJS&&/css$/.test(l.url)?"c":n,l.noexec),(I(t)||I(d))&&a.load(function(){i(),t&&t(l.origUrl,s,o),d&&d(l.origUrl,s,o)})}}function r(e){var t,n,i=e.split("!"),a=F.length,r=i.pop(),o=i.length,s={url:r,origUrl:r,prefixes:i};for(n=0;n<o;n++)(t=R[i[n]])&&(s=t(s));for(n=0;n<a;n++)s=F[n](s);return s}var o,s,l=this.yepnope.loader;if(k(e))a(e,0,l,0);else if(T(e))for(o=0;o<e.length;o++)s=e[o],k(s)?a(s,0,l,0):T(s)?p(s):N(s)&&t(s,l);else N(e)&&t(e,l)},p.addPrefix=function(e,t){R[e]=t},p.addFilter=function(e){F.push(e)},p.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",u=function(){t.removeEventListener("DOMContentLoaded",u,0),t.readyState="complete"},0)),e.yepnope=i()}(this,this.document);var Ajax={requestMap:{},jsonpRegistry:{},_counter:0,request:function(e){e=Utils.extend({timeout:5e3,maxRetries:0},e||{}),e.tries=0,this._sendRequest(e)},_sendRequest:function(e){var t=this,n=this._createCallback(e),i=this._createScript(n);if(!i)return Utils.log("JSONP - unable to create script for request ",e.url),!1;i.src=e.url,e.timeout&&setTimeout(function(){t._onError(n,e)},e.timeout)},_onSuccess:function(id,obj,data){this.requestMap[id]&&(this._destroyRequest(id,obj),Utils.isString(data)&&(data=eval("("+data+")")),obj.success&&obj.success(data))},_onError:function(e,t){if(this.requestMap[e]){if(this._destroyRequest(e,t),t.tries++,t.maxRetries&&t.tries<t.maxRetries)return Utils.log("Request failed - resending"),void this._sendRequest(t);t.error&&t.error(t.url)}},_destroyRequest:function(e,t){if(t.jsonpCallback){if(!this._removeNameFromRegistry(t.jsonpCallback))try{delete window[t.jsonpCallback]}catch(e){window[t.jsonpCallback]=void 0}}delete this.requestMap[e];var n=document.getElementById(this._getScriptName(e));n&&(n.parentNode.removeChild(n),n=null)},_createScript:function(e){var t=document.getElementsByTagName("head")[0];if(!t)return!1;var n=document.createElement("script");return n.type="text/javascript",e&&(n.id=this._getScriptName(e)),t.appendChild(n),n},_getScriptName:function(e){return"aspen_jsonp_"+e},_createCallback:function(e){var t=this;if(Utils.empty(e.jsonpCallback))return null;this._counter++;var n="request_"+this._counter;this.requestMap[n]=function(i){t._onSuccess(n,e,i)};this._addNameToRegistry(e.jsonpCallback);return window[e.jsonpCallback]=function(e){t.requestMap[n](e)},n},_addNameToRegistry:function(e){var t=this.jsonpRegistry;return t[e]?t[e]+=1:t[e]=1,t[e]},_removeNameFromRegistry:function(e){var t=this.jsonpRegistry;return t[e]&&(t[e]-=1,0===t[e]&&delete t[e]),t[e]}},BatchService=Class.extend({init:function(e){this._enabled=!1,this._queue=[],this._config=e,this._timer,this._firstPostTimer},start:function(e){if(this._config=e,this._enabled=!0,_analyticsConfig.batchMode==BATCH_MODE_TIMER){Utils.log("[aspen]","start timer");var t=this;this._timer=setTimeout(function(){t._postTimerEvent()},1e3*Number(_analyticsConfig.batchModeAmount));var n=Math.ceil(Math.random()*Number(_analyticsConfig.batchModeAmount));n==Number(_analyticsConfig.batchModeAmount)&&--n<=0&&(n=.5),Utils.log("[aspen]","random time: "+n),this._firstPostTimer=setTimeout(function(){t._firstPostTimerEvent()},1e3*n)}},add:function(e){if(this._addToQueue(e),!this._enabled)return void Utils.log("[aspen]","Batch service not enabled. Queuing message.");_analyticsConfig.enabled&&!this._config.batchThrottled?(_analyticsConfig.batchMode==BATCH_MODE_TOTAL?this._queue.length==_analyticsConfig.batchModeAmount&&this.post():_analyticsConfig.batchMode==BATCH_MODE_NONE?this.post():_analyticsConfig.batchMode!=BATCH_MODE_TIMER&&this.post(),this._queue.length>0&&("error"==e.eventType&&void 0!==_analyticsConfig.highPriorityErrors?this.flushByError(e.eventData):"error"!=e.eventType&&void 0!==_analyticsConfig.highPriorityEvents&&this.flushByEvent(e.eventType))):(_analyticsConfig.enabled&&Utils.log("[aspen]","Aspen is diabled via analyticsConfig. Message not added."),this._config.batchThrottled&&Utils.log("[aspen]","Batching is throttled. Message not added."))},_addToQueue:function(e){Utils.log("[aspen]","Adding message to batch queue."),this._queue.push(e)},post:function(){if(this._config.postThrottled)Utils.log("[aspen]","Batch posting is throttled. Batch not posted.");else{var e={sessionId:this._config.sessionId,events:this._queue};if(Utils.log("[aspen]","send batch string"),"gzip"==_analyticsConfig.batchContentEncoding){var t="?aspenJson="+JSON.stringify(e);e=encodeURIComponent(t).replace(/%20/g,"+")}TransportManager.createRequest(_analyticsConfig.batchApi,e,this._postSuccess,this._postFailure,this),this._queue=[]}},_postTimerEvent:function(){Utils.log("[aspen]","postTimer - queue.length: "+this._queue.length),this._queue.length>0?(Utils.log("[aspen]","posting "+this._queue.length+" messages"),this.post()):Utils.log("[aspen]","no messages to post");var e=this;this._timer=setTimeout(function(){e._postTimerEvent()},1e3*Number(_analyticsConfig.batchModeAmount))},_firstPostTimerEvent:function(){Utils.log("[aspen]","firstPostTimer - queue.length: "+this._queue.length),this._queue.length>0?(Utils.log("[aspen]","posting "+this._queue.length+" messages"),this.post()):Utils.log("[aspen]","no messages to post")},_postSuccess:function(e){Utils.log("[aspen]","post success: "+e)},_postFailure:function(e){Utils.log("[aspen]","post failed: "+e)},flushByError:function(e){if(void 0!==e.errorCode){var t=e.errorCode,n=t.substring(0,2),i=t.substring(2,4),a=t.substring(4,6),r=t.substring(6),o=[];o=_analyticsConfig.highPriorityErrors.split(",");for(var s="",l="",d="",c="",u=[],p=[],f=[],h=[],m=0,g=o.length;m<g;++m)switch(m){case 0:s=String(o[m]),u=s.split("+");break;case 1:l=String(o[m]),p=l.split("+");break;case 2:d=String(o[m]),f=d.split("+");break;case 3:c=String(o[m]),h=c.split("+")}for(m=0,g=u.length;m<g;++m){var v=String(u[m]);if(n==v||"*"==v)for(var y=0,w=p.length;y<w;++y){var b=String(p[y]);if(i==b||"*"==b)for(var _=0,C=f.length;_<C;++_){var x=String(f[_]);if(a==x||"*"==x)for(var E=0,A=h.length;E<A;++E){var S=String(h[E]);r!=S&&"*"!=S||(Utils.log("[aspen","[flushByError] found match, flushing batch"),this.post())}}}}}},flushByEvent:function(e){for(var t=_analyticsConfig.highPriorityEvents.split(","),n=0,i=t.length;n<i;++n){String(t[n])==e&&(Utils.log("[aspen]","[flushBatchByEvent] found match, flushing batch"),this.post())}},setSessionId:function(e){this._config.sessionId=e},setBatchThrottled:function(e){this._config.batchThrottled=e},setPostThrottled:function(e){this._config.postThrottled=e},disableTimer:function(){_analyticsConfig.batchMode==BATCH_MODE_TIMER&&clearTimeout(this._timer)}}),LoadState={WAITING:"loadStateWaiting",LOADING:"loadStateLoading",READY:"loadStateReady",FAILED:"loadStateFailed"},Aspen=window.Aspen={init:function(e,t){var n=this;if(Utils.undef(this.initialized))if(this.initialized=!0,this.ready=!1,this.batchService,this._isThrottled=!0,this.sessionId=-1,this._messageExcludes=[],this.timeDifference=0,this._shortId="",this._retryTimer,this._retries=0,this._retryTime=0,this._savedSession={},this._timestampStr="",this.sessionToken="",this._appName="",this._transportFormats=[],this._transportFormat="",this._transportFormatIndex=0,this._messageQueue=[],this.config={},this._loadState=LoadState.WAITING,this._configUrl="",this._configLoaded=!1,this._appInitCallback=t,_params=this._options=e,this._appName=_params.appName=_params&&_params.appName,_params.appVersion=_params&&_params.appVersion,_params.site=_params&&_params.site,_params.context=_params&&_params.context,_params.configBaseUrl=_params&&_params.configBaseUrl,_params.platform=_params&&_params.platform,_params.platformVersion=_params&&_params.platformVersion,Utils.empty(_params.appName))Utils.log("[aspen]","Unable to start Aspen, no appName provided");else if(Utils.empty(_params.site))Utils.log("[aspen]","Unable to start Aspen, no site provided");else{var i={};i.batchThrottled=!0,i.postThrottled=!0,this.batchService=new BatchService(i),this._loadState=LoadState.LOADING;var a=new DependencyManager;a.add(new Dependency(Utils.bind(n._loadConfigFile,n))),a.add(new Dependency(Utils.bind(n._loadRequiredJS,n))),a.onComplete(Utils.bind(n._onDependenciesLoaded,n)),a.onFailure(Utils.bind(n._onDependenciesLoadFailure,n)),a.load()}},_loadConfigFile:function(e,t){var n=_params.configBaseUrl;Utils.isNull(n)&&(n=ANALYTICS_BASE_URL+_params.appName+"/"+_params.site+"/"),Utils.log("[aspen]","Using config base path: "+n),this._configUrl=n+ANALYTICS_FILE+"?_="+Utils.timeBucket(15),Ajax.request({jsonpCallback:"aspen_onAnalyticsConfigReceived",url:this._configUrl,success:Utils.bind(this._loadConfigSuccess,this,e),error:Utils.bind(this._loadConfigFailure,this,t)})},_loadConfigSuccess:function(e,t){Utils.log("[aspen]","Config loaded successfully"),_analyticsConfig=Utils.extend(Utils.extend({},t.default||{}),t[_params.context]||{}),this.config=_analyticsConfig,Utils.undef(_analyticsConfig.batchMode)&&(_analyticsConfig.batchMode="total"),Utils.undef(_analyticsConfig.batchModeAmount)&&(_analyticsConfig.batchModeAmount="10"),Utils.undef(_analyticsConfig.helloRetryCount)&&(_analyticsConfig.helloRetryCount="5"),Utils.undef(_analyticsConfig.helloRetryTime)&&(_analyticsConfig.helloRetryTime="10000"),Utils.undef(_analyticsConfig.batchContentEncoding)&&(_analyticsConfig.batchContentEncoding="json"),Utils.undef(_analyticsConfig.aspenUserIdEnabled)&&(_analyticsConfig.aspenUserIdEnabled=!0),Utils.undef(_analyticsConfig.aspenUserIdHash)&&(_analyticsConfig.aspenUserIdHash="392aspenUID392"),Utils.undef(_analyticsConfig.transportFormats)?this._transportFormats.push(TransportFormat.JSONP):this._transportFormats=_analyticsConfig.transportFormats.split(","),this._transportFormat=this._transportFormats[this._transportFormatIndex],Utils.undef(_analyticsConfig.messageExcludes)?this._messageExcludes=[]:this._messageExcludes=_analyticsConfig.messageExcludes.split(",");var n={};n.transportFormats=this._transportFormats,n.servicesUrl=_analyticsConfig.servicesUrl,TransportManager.init(n),Utils.log("[aspen]","batchMode: ",_analyticsConfig.batchMode),Utils.log("[aspen]","batchModeAmount: ",_analyticsConfig.batchModeAmount),Utils.log("[aspen]","helloRetryCount: ",_analyticsConfig.helloRetryCount),Utils.log("[aspen]","helloRetryTime: ",_analyticsConfig.helloRetryTime),Utils.log("[aspen]","transportFormat: ",this._transportFormat),e&&e()},_loadConfigFailure:function(e,t){Utils.log("[aspen]","Config failed to load",t),e&&e()},_loadRequiredJS:function(e,t){var n=this
;null!=window.JSON?this._loadRequiredJSSuccess(e):yepnope({load:"https://z.cdn.turner.com/xslo/cvp/easyxdm/js/json2.ugly.js",complete:function(){if(!window.JSON)return void n._loadRequiredJSFailure(t);n._loadRequiredJSSuccess(e)}})},_loadRequiredJSSuccess:function(e){Utils.log("[aspen]","External JS dependencies loaded successfully"),e&&e()},_loadRequiredJSFailure:function(e){Utils.log("[aspen]","External JS dependencies failed to load"),e&&e()},_onDependenciesLoaded:function(){this._loadState=LoadState.READY,Utils.log("[aspen]","_onDependenciesLoaded - all required dependencies successfully loaded."),Utils.undef(_analyticsConfig.enabled)||"true"!==_analyticsConfig.enabled?(Utils.log("[aspen]","analytics disabled via config"),this._initFailure()):(Utils.log("[aspen]","analytics enabled via config"),Utils.undef(_analyticsConfig.servicesUrl)||this._hello())},_onDependenciesLoadFailure:function(){this._loadState=LoadState.FAILED,Utils.log("[aspen]","_onDependenciesLoadFailure - one or more required dependencies failed to load.")},_hello:function(){Utils.log("[aspen]","hello");var e=Utils.getQueryVar("sessionToken");Utils.log("[aspen]","check querySessionToken: ",e),Utils.empty(e)||(this.sessionToken=e,this.send("authSessionReload",{}));var t={propertyName:_params.site,applicationName:_params.appName,applicationVersion:_params.appVersion,deviceType:"Javascript",deviceModel:"Javascript",deviceVersion:"Javascript",library:"Javascript",libraryVersion:"1.8.0",platformName:Utils.empty(_params.platform)?"Javascript":_params.platform,platformVersion:Utils.empty(_params.platformVersion)?"1.8.0":_params.platformVersion,aspenConfigUrl:this._configUrl,protocol:"1.0",pageUrl:document.URL};t=Utils.extend(t,this._options),_analyticsConfig.aspenUserIdEnabled&&(t.aspenUUIDToken=_analyticsConfig.aspenUserIdHash),Utils.empty(this.sessionToken)||(t.sessionToken=this.sessionToken),TransportManager.bootstrapTM(),TransportManager.createRequest(_analyticsConfig.helloApi,t,this._helloSuccess,this._helloFailure,this),this._retryTimer=setTimeout(Utils.bind(this._helloRetry,this),Number(_analyticsConfig.helloRetryTime)),this._isRetrying=!0},_helloSuccess:function(e){Utils.log("[aspen]","_helloSuccess"),clearTimeout(this._retryTimer),this._isThrottled=void 0!==e.throttled&&"no"!==e.throttled||this._isThrottled,this.sessionId=void 0!==e.sessionId?e.sessionId:this.sessionId,this._shortId=void 0!==e.shortId?e.shortId:this._shortId,this._timestampStr=void 0!==e.timestamp?e.timestamp:this.timeDifference,this.timeDifference=Number(this._timestampStr)-Utils.now(),"no"===e.throttled&&(this._isThrottled=!1),Utils.log("[aspen]","_helloSuccess"),Utils.log("[aspen]","config.throttled: "+e.throttled),Utils.log("[aspen]","throttled: "+this._isThrottled),Utils.log("[aspen]","sessionId: "+this.sessionId);var t={};t.batchThrottled=!1,t.postThrottled=!0,t.sessionId="",this.batchService.start(t),this.batchService.setSessionId(this.sessionId),this.batchService.setPostThrottled(this._isThrottled),this._initSuccess()},_helloFailure:function(e){Utils.log("[aspen]","_helloFailure url: "+e),TransportManager.fallback()&&this._hello()},_helloRetry:function(){Utils.log("[aspen]","helloRetry"),this._retries==_analyticsConfig.helloRetryCount?(Utils.log("[aspen]","retries exhasted"),clearTimeout(this._retryTimer),this._retries=0,1==TransportManager.fallback()?this._hello():(Utils.log("[aspen]","retries exhasted, fallbacks exhausted, aspen is disabled"),this._isThrottled=!0,this.batchService.setBatchThrottled(!0),this.batchService.setPostThrottled(!0),this.batchService.disableTimer())):(this._retries++,this._retryTime=this._retries*Number(_analyticsConfig.helloRetryTime),this._savedSession.retries=String(this._retries),this._savedSession.retryTime=String(this._retryTime),this._hello())},isMessageExcluded:function(e){return!!(_analyticsConfig&&_analyticsConfig.messageExcludes&&_analyticsConfig.messageExcludes.indexOf(e)>=0)},send:function(e,t,n){if(void 0===this._messageExcludes||-1===this._messageExcludes.indexOf(e)){if(void 0===t&&(t={}),!this.ready)return Utils.log("[aspen]","send - Aspen's not ready, queuing message"),void(void 0!==this._messageQueue&&this._messageQueue.push({message:t,type:e,appName:n}));if(this._isThrottled)Utils.log("[aspen]","Add message to batch is throttled! Message not added.");else{if(this.isMessageExcluded(e))return void Utils.log("[aspen]","message excluded by config, not added to batch",e);t.timestamp=Utils.now()+this.timeDifference,t.applicationName=void 0!==n?n:this._appName,delete t.session_id,delete t.sessionId,delete t.hbase_timestamp,delete t.type,Utils.log("[aspen]","appName: "+t.applicationName);var i={};i.eventType=e,i.eventData=t,Utils.log("[aspen]","add to batch json message: "+JSON.stringify(i)),this.batchService.add(i)}}},setSessionToken:function(e){this.sessionToken=e},_initSuccess:function(){this.ready=!0;for(var e=0,t=this._messageQueue.length;e<t;e++)this.send(this._messageQueue[e].type,this._messageQueue[e].message);this.send("aspenConfigDetails",_analyticsConfig);var n={};n.screenWidth=screen.width,n.screenHeight=screen.height,n.browserName=navigator.appName,n.userAgent=navigator.userAgent,n.platform=navigator.platform,this.send("systemInfo",n),this._initSuccess=function(){},this._appInitCallback&&this._appInitCallback()},_initFailure:function(){},getVersion:function(){return"1.8.0"},getSessionId:function(e){return this.sessionId},getShortId:function(e){return this._shortId},isThrottled:function(e){return this._isThrottled},getThrottled:function(e){return this._isThrottled?"yes":"no"}},DependencyManager=function(){this._dependencies=[],this._loadedCount=0,this._successHandlers=[],this._failureHandlers=[],this.add=function(e){this._dependencies.push({dependency:e,success:!1});var t=this._dependencies.length-1;e.onComplete(Utils.bind(this._onDependencyLoaded,this,t,!0)),e.onFailure(Utils.bind(this._onDependencyLoaded,this,t,!1))},this.load=function(){for(var e=0,t=this._dependencies.length;e<t;e++)this._dependencies[e].dependency.load()},this.onComplete=function(e){this._successHandlers.push(e)},this.onFailure=function(e){this._failureHandlers.push(e)},this._onDependencyLoaded=function(e,t){++this._loadedCount,this._dependencies[e].success=t,this._loadedCount===this._dependencies.length&&this._onAllDependenciesLoaded()},this._onAllDependenciesLoaded=function(){this._loadedCount=0;for(var e=!0,t=0,n=this._dependencies.length;t<n;t++)if(!this._dependencies[t].success){e=!1;break}var i=e?this._successHandlers:this._failureHandlers;for(t=0,n=i.length;t<n;t++)i[t]()}},Dependency=function(e){this._func=e,this._successHandlers=[],this._failureHandlers=[],this.load=function(){this._func(Utils.bind(this._onSuccess,this),Utils.bind(this._onFailure,this))},this.onComplete=function(e){this._successHandlers.push(e)},this.onFailure=function(e){this._failureHandlers.push(e)},this._onSuccess=function(){for(var e=0,t=this._successHandlers.length;e<t;e++)this._successHandlers[e]()},this._onFailure=function(){for(var e=0,t=this._failureHandlers.length;e<t;e++)this._failureHandlers[e]()}},AspenComm=function(){var e,t,n,i,a,r,o="https://aspen.turner.com",s=!1,l=[];return t=function(i){Utils.log("[aspen]","[easyXDM]","init",i),o=i,e=new window.CVPAux.easyXDM.Rpc({swf:"https://z.cdn.turner.com/xslo/cvp/easyxdm/swf/easyxdm.swf",remote:o+"/static/xdm_iframe.html"},{remote:{request:{}}}),Utils.log("[aspen]","[easyXDM]","init AspenComm"),s=!0,t=function(){try{throw"already init'ed - ignored"}catch(e){}},n()},i=function(e,t,n){s?r(e,t,n):a(e,t,n)},a=function(){l.push(arguments)},n=function(){for(var e=0,t=l.length;e<t;++e)r.apply(null,l[e])},r=function(t,n,i){Utils.log("[aspen]","[easyXDM]","make request",t);var a,r,o;a=Utils.extend(Utils.extend({method:"POST"},t||{})),r=function(e){var t=e.data;if("string"==typeof t&&t.charAt(0).match(/[{[]/))try{t=JSON.parse(t)}catch(e){Utils.log(e)}Utils.log("[aspen]","[easyXDM]","request success",e),n(t,e.status,e.headers)},o=function(e){var t=e.data;if("string"==typeof t&&t.charAt(0).match(/[{[]/))try{t=JSON.parse(t)}catch(e){Utils.log(e)}i(t,e.status,e.message)},e.request(a,r,o)},{init:t,request:i}}(),bootstrap=function(e){Utils.log("[aspen]","[easyXDM]","bootstrap",e),window.CVPAux=window.CVPAux||{},yepnope({test:null!=window.CVPAux.easyXDM,nope:"https://z.cdn.turner.com/xslo/cvp/easyxdm/js/easyXDM.ugly.js",complete:function(){if(window.easyXDM)window.CVPAux.easyXDM=easyXDM.noConflict("CVPAux"),yepnope({test:null!=window.JSON,nope:"https://z.cdn.turner.com/xslo/cvp/easyxdm/js/json2.ugly.js",complete:function(){if(!window.JSON)try{throw"failed to install JSON polyfill"}catch(e){}e()}});else try{throw"failed to install easyXDM"}catch(e){}}})},ANALYTICS_BASE_URL="https://z.cdn.turner.com/xslo/aspen/config/",ANALYTICS_FILE="aspenanalytics.json",BATCH_MODE_TOTAL="total",BATCH_MODE_TIMER="timer",BATCH_MODE_NONE="none",_params={},_analyticsConfig={},TransportFormat={JSON:"json",JSONP:"jsonp"},TransportManager={init:function(e){this._config=e,this._transportFormat=this._config.transportFormats[0],this._bootstrapped=!1},bootstrapTM:function(){if(Utils.log("[aspen]","TransportManager","bootstrap","_bootstrapped:",this._bootstrapped),this._transportFormat===TransportFormat.JSON&&!this._bootstrapped){var e=this._config.servicesUrl;bootstrap(function(){AspenComm.init(e)}),this._bootstrapped=!0,Utils.log("[aspen]","TransportManager","bootstrap","transportFormat",this._transportFormat)}},createRequest:function(e,t,n,i,a){if(Utils.log("[aspen]","TransportManager","createRequest"),this._transportFormat===TransportFormat.JSON)AspenComm.request({url:e+"."+this._transportFormat,data:{aspenJson:JSON.stringify(t)}},Utils.bind(n,a),Utils.bind(i,a));else if(this._transportFormat===TransportFormat.JSONP){var r=this._config.servicesUrl+e+"."+this._transportFormat;r+="?aspen_callback=parseAspenInitialization&aspenJson="+encodeURIComponent(JSON.stringify(t)).replace(/%20/g,"+"),Ajax.request({jsonpCallback:"parseAspenInitialization",url:r,error:Utils.bind(i,a),success:Utils.bind(n,a)})}},fallback:function(){return Utils.log("[aspen]","current transport format failed",this._transportFormat),this._config.transportFormats.shift(),this._config.transportFormats.length>0&&(this._transportFormat=this._config.transportFormats[0],Utils.log("trying next transport format",this._transportFormat),!0)}},Utils={undef:function(e){return void 0===e},isNull:function(e){return Utils.undef(e)||null===e},empty:function(e){return Utils.undef(e)||Utils.isNull(e)||""===e},isFunc:function(e){return"function"==typeof e},isObject:function(e){return"object"==typeof e},isString:function(e){return"string"==typeof e},extend:function(e,t){var n;e||(e={});for(n in t)e[n]=t[n];return e},log:function(){window.console&&window.console.log&&debug&&window.console.log(Utils.slice(arguments).join(" | ")),!Utils.undef(window.logJSAuth)&&Utils.isFunc(window.logJSAuth)&&debug&&window.logJSpAuth(Utils.slice(arguments).join(" | "))},now:"function"==typeof Date.now?Date.now:function(){return(new Date).getTime()},slice:function(e,t){return Array.prototype.slice.call(e,t||0)},bind:function(e,t){var n=Utils.slice(arguments,2);return function(){var i=n.concat(Utils.slice(arguments));return e.apply(t,i)}},setCookie:function(e,t,n){var i=new Date;i.setDate(i.getDate()+n);var a=escape(t)+(null==n?"":"; expires="+i.toUTCString());document.cookie=e+"="+a},getCookie:function(e){var t,n,i,a=document.cookie.split(";");for(t=0;t<a.length;t++)if(n=a[t].substr(0,a[t].indexOf("=")),i=a[t].substr(a[t].indexOf("=")+1),(n=n.replace(/^\s+|\s+$/g,""))==e)return unescape(i)},getQueryVar:function(e){for(var t=window.location.search.substring(1),n=t.split("&"),i=0;i<n.length;i++){var a=n[i].split("=");if(a[0]==e)return a[1]}},randomString:function(e){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split("");e||(e=Math.floor(Math.random()*t.length));for(var n="",i=0;i<e;i++)n+=t[Math.floor(Math.random()*t.length)];return n},timeBucket:function(e){var t=new Date,n=60*(24*t.getDate()+t.getHours())+t.getMinutes();return Math.round(n/e)}}}}.call(window),function(){!function(e){"use strict";function t(){return l&&l.call(s)||(new Date).getTime()}var n=[],i={},a={},r=function(){},o="-----";o+=o,o+=o,o+=o,o+=o;var s=window.performance,l=s&&(s.now||s.mozNow||s.msNow||s.oNow||s.webkitNow);e.log&&"function"==typeof e.log||(e.log=r),e.profile&&"function"==typeof e.profile||(e.profile=r),e.profileEnd&&"function"==typeof e.profileEnd||(e.profileEnd=r),e.timeStamp&&"function"==typeof e.timeStamp||(e.timeStamp=r),e.trace&&"function"==typeof e.trace||(e.trace=r),e.debug&&"function"==typeof e.debug||(e.debug=e.log),e.info&&"function"==typeof e.info||(e.info=e.log),e.warn&&"function"==typeof e.warn||(e.warn=e.log),e.error&&"function"==typeof e.error||(e.error=e.log),e.dir&&"function"==typeof e.dir||(e.dir=e.log),e.dirxml&&"function"==typeof e.dirxml||(e.dirxml=e.dir);!e.group&&(e.group=function(t){n.push(t),e.log(o+"\nBEGIN GROUP: "+t)}),!e.groupCollapsed&&(e.groupCollapsed=e.group),!e.groupEnd&&(e.groupEnd=function(){e.log("END GROUP: "+n.pop()+"\n"+o)}),!e.time&&(e.time=function(e){i[e]=t()}),!e.timeEnd&&(e.timeEnd=function(n){e.log(n+": "+(t()-i[n]).toFixed(3)+"ms"),delete i[n]}),!e.assert&&(e.assert=function(t,n){t||e.error("Assertion failed: "+n)}),!e.count&&(e.count=function(t){a[t]||(a[t]=0),a[t]++,e.log(t+": "+a[t])}),!e.clear&&(e.clear=function(){e.log("\n\n\n\n\n\n")})}(window.console=window.console||{}),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,window.CustomEvent=e)}(),!window.addEventListener&&function(e,t,n,i,a,r,o){e[i]=t[i]=n[i]=function(e,t){var n=this;o.unshift([n,e,t,function(e){e.currentTarget=n,e.preventDefault=function(){e.returnValue=!1},e.stopPropagation=function(){e.cancelBubble=!0},e.target=e.srcElement||n,t.call(n,e)}]),this.attachEvent("on"+e,o[0][3])},e[a]=t[a]=n[a]=function(e,t){for(var n,i=0;n=o[i];++i)if(n[0]==this&&n[1]==e&&n[2]==t)return this.detachEvent("on"+e,o.splice(i,1)[0][3])},e[r]=t[r]=n[r]=function(e){return this.fireEvent("on"+e.type,e)}}(window.prototype,document.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[]),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(null===this)throw new TypeError('"this" is null or not defined');var i=Object(this),a=i.length>>>0;if(0===a)return-1;var r=+t||0;if(Math.abs(r)===1/0&&(r=0),r>=a)return-1;for(n=Math.max(r>=0?r:a-Math.abs(r),0);a>n;){if(n in i&&i[n]===e)return n;n++}return-1}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)})}(),function(){"use strict";var e=document,t=e.createElement("script"),n=e.getElementsByTagName("script")[0],i="https:"===document.location.protocol;t.type="text/javascript",t.src=(i?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js",n.parentNode.insertBefore(t,n)}(),function(){!function(){function e(){}function t(e){return e}function n(e){return!!e}function i(e){return!e}function a(e){return function(){if(null===e)throw new Error("Callback was already called.");e.apply(this,arguments),e=null}}function r(e){return function(){null!==e&&(e.apply(this,arguments),e=null)}}function o(e){return j(e)||"number"==typeof e.length&&e.length>=0&&e.length%1==0}function s(e,t){for(var n=-1,i=e.length;++n<i;)t(e[n],n,e)}function l(e,t){for(var n=-1,i=e.length,a=Array(i);++n<i;)a[n]=t(e[n],n,e);return a}function d(e){return l(Array(e),function(e,t){return t})}function c(e,t,n){return s(e,function(e,i,a){n=t(n,e,i,a)}),n}function u(e,t){s(P(e),function(n){t(e[n],n)})}function p(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}function f(e){var t,n,i=-1;return o(e)?(t=e.length,function(){return i++,t>i?i:null}):(n=P(e),t=n.length,function(){return i++,t>i?n[i]:null})}function h(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),i=Array(n),a=0;n>a;a++)i[a]=arguments[a+t];switch(t){case 0:return e.call(this,i);case 1:return e.call(this,arguments[0],i)}}}function m(e){return function(t,n,i){return e(t,i)}}function g(t){return function(n,i,o){o=r(o||e),n=n||[];var s=f(n);if(0>=t)return o(null);var l=!1,d=0,c=!1;!function e(){if(l&&0>=d)return o(null);for(;t>d&&!c;){var r=s();if(null===r)return l=!0,void(0>=d&&o(null));d+=1,i(n[r],r,a(function(t){d-=1,t?(o(t),c=!0):e()}))}}()}}function v(e){return function(t,n,i){return e(O.eachOf,t,n,i)}}function y(e){return function(t,n,i,a){return e(g(n),t,i,a)}}function w(e){return function(t,n,i){return e(O.eachOfSeries,t,n,i)}}function b(t,n,i,a){a=r(a||e),n=n||[];var s=o(n)?[]:{};t(n,function(e,t,n){i(e,function(e,i){s[t]=i,n(e)})},function(e){a(e,s)})}function _(e,t,n,i){var a=[];e(t,function(e,t,i){n(e,function(n){n&&a.push({index:t,value:e}),i()})},function(){i(l(a.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})}function C(e,t,n,i){_(e,t,function(e,t){n(e,function(e){t(!e)})},i)}function x(e,t,n){return function(i,a,r,o){function s(){o&&o(n(!1,void 0))}function l(e,i,a){return o?void r(e,function(i){o&&t(i)&&(o(n(!0,e)),o=r=!1),a()}):a()}arguments.length>3?e(i,a,l,s):(o=r,r=a,e(i,l,s))}}function E(e,t){return t}function A(t,n,i){i=i||e;var a=o(n)?[]:{};t(n,function(e,t,n){e(h(function(e,i){i.length<=1&&(i=i[0]),a[t]=i,n(e)}))},function(e){i(e,a)})}function S(e,t,n,i){var a=[];e(t,function(e,t,i){n(e,function(e,t){a=a.concat(t||[]),i(e)})},function(e){i(e,a)})}function T(t,n,i){function r(t,n,i,a){if(null!=a&&"function"!=typeof a)throw new Error("task callback must be a function");return t.started=!0,j(n)||(n=[n]),0===n.length&&t.idle()?O.setImmediate(function(){t.drain()}):(s(n,function(n){var r={data:n,callback:a||e};i?t.tasks.unshift(r):t.tasks.push(r),t.tasks.length===t.concurrency&&t.saturated()}),void O.setImmediate(t.process))}function o(e,t){return function(){d-=1;var n=!1,i=arguments;s(t,function(e){s(c,function(t,i){t!==e||n||(c.splice(i,1),n=!0)}),e.callback.apply(e,i)}),e.tasks.length+d===0&&e.drain(),e.process()}}if(null==n)n=1;else if(0===n)throw new Error("Concurrency must not be zero");var d=0,c=[],u={tasks:[],concurrency:n,payload:i,saturated:e,empty:e,drain:e,started:!1,paused:!1,push:function(e,t){r(u,e,!1,t)},kill:function(){u.drain=e,u.tasks=[]},unshift:function(e,t){r(u,e,!0,t)},process:function(){if(!u.paused&&d<u.concurrency&&u.tasks.length)for(;d<u.concurrency&&u.tasks.length;){var e=u.payload?u.tasks.splice(0,u.payload):u.tasks.splice(0,u.tasks.length),n=l(e,function(e){return e.data});0===u.tasks.length&&u.empty(),d+=1,c.push(e[0]);var i=a(o(u,e));t(n,i)}},length:function(){return u.tasks.length},running:function(){return d},workersList:function(){return c},idle:function(){return u.tasks.length+d===0},pause:function(){u.paused=!0},resume:function(){if(!1!==u.paused){u.paused=!1;for(var e=Math.min(u.concurrency,u.tasks.length),t=1;e>=t;t++)O.setImmediate(u.process)}}};return u}function N(e){return h(function(t,n){t.apply(null,n.concat([h(function(t,n){"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&s(n,function(t){console[e](t)}))})]))})}function k(e){return function(t,n,i){e(d(t),n,i)}}function I(e){return h(function(t,n){var i=h(function(n){var i=this,a=n.pop();return e(t,function(e,t,a){e.apply(i,n.concat([a]))},a)});return n.length?i.apply(this,n):i})}function F(e){return h(function(t){var n=t.pop();t.push(function(){var e=arguments;i?O.setImmediate(function(){n.apply(null,e)}):n.apply(null,e)});var i=!0;e.apply(this,t),i=!1})}var R,O={},M="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this;null!=M&&(R=M.async),O.noConflict=function(){return M.async=R,O};var D=Object.prototype.toString,j=Array.isArray||function(e){return"[object Array]"===D.call(e)},B=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},P=Object.keys||function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},L="function"==typeof setImmediate&&setImmediate,q=L?function(e){L(e)}:function(e){setTimeout(e,0)};"object"==typeof process&&"function"==typeof process.nextTick?O.nextTick=process.nextTick:O.nextTick=q,O.setImmediate=L?q:O.nextTick,O.forEach=O.each=function(e,t,n){return O.eachOf(e,m(t),n)},O.forEachSeries=O.eachSeries=function(e,t,n){return O.eachOfSeries(e,m(t),n)},O.forEachLimit=O.eachLimit=function(e,t,n,i){return g(t)(e,m(n),i)},O.forEachOf=O.eachOf=function(t,n,i){function o(e){d--,e?i(e):null===s&&0>=d&&i(null)}i=r(i||e),t=t||[];for(var s,l=f(t),d=0;null!=(s=l());)d+=1,n(t[s],s,a(o));0===d&&i(null)},O.forEachOfSeries=O.eachOfSeries=function(t,n,i){function o(){var e=!0;return null===l?i(null):(n(t[l],l,a(function(t){if(t)i(t);else{if(null===(l=s()))return i(null);e?O.setImmediate(o):o()}})),void(e=!1))}i=r(i||e),t=t||[];var s=f(t),l=s();o()},O.forEachOfLimit=O.eachOfLimit=function(e,t,n,i){g(t)(e,n,i)},O.map=v(b),O.mapSeries=w(b),O.mapLimit=y(b),O.inject=O.foldl=O.reduce=function(e,t,n,i){O.eachOfSeries(e,function(e,i,a){n(t,e,function(e,n){t=n,a(e)})},function(e){i(e,t)})},O.foldr=O.reduceRight=function(e,n,i,a){var r=l(e,t).reverse();O.reduce(r,n,i,a)},O.transform=function(e,t,n,i){3===arguments.length&&(i=n,n=t,t=j(e)?[]:{}),O.eachOf(e,function(e,i,a){n(t,e,i,a)},function(e){i(e,t)})},O.select=O.filter=v(_),O.selectLimit=O.filterLimit=y(_),O.selectSeries=O.filterSeries=w(_),O.reject=v(C),O.rejectLimit=y(C),O.rejectSeries=w(C),O.any=O.some=x(O.eachOf,n,t),O.someLimit=x(O.eachOfLimit,n,t),O.all=O.every=x(O.eachOf,i,i),O.everyLimit=x(O.eachOfLimit,i,i),O.detect=x(O.eachOf,t,E),O.detectSeries=x(O.eachOfSeries,t,E),O.detectLimit=x(O.eachOfLimit,t,E),O.sortBy=function(e,t,n){function i(e,t){var n=e.criteria,i=t.criteria;return i>n?-1:n>i?1:0}O.map(e,function(e,n){t(e,function(t,i){t?n(t):n(null,{value:e,criteria:i})})},function(e,t){return e?n(e):void n(null,l(t.sort(i),function(e){return e.value}))})},O.auto=function(t,n,i){function a(e){v.unshift(e)}function o(e){var t=p(v,e);t>=0&&v.splice(t,1)}function l(){f--,s(v.slice(0),function(e){e()})}i||(i=n,n=null),i=r(i||e);var d=P(t),f=d.length;if(!f)return i(null);n||(n=f);var m={},g=0,v=[];a(function(){f||i(null,m)}),s(d,function(e){function r(){return n>g&&c(y,function(e,t){return e&&m.hasOwnProperty(t)},!0)&&!m.hasOwnProperty(e)}function s(){r()&&(g++,o(s),f[f.length-1](v,m))}for(var d,f=j(t[e])?t[e]:[t[e]],v=h(function(t,n){if(g--,n.length<=1&&(n=n[0]),t){var a={};u(m,function(e,t){a[t]=e}),a[e]=n,i(t,a)}else m[e]=n,O.setImmediate(l)}),y=f.slice(0,f.length-1),w=y.length;w--;){if(!(d=t[y[w]]))throw new Error("Has inexistant dependency");if(j(d)&&p(d,e)>=0)throw new Error("Has cyclic dependencies")}r()?(g++,f[f.length-1](v,m)):a(s)})},O.retry=function(e,t,n){function i(e,t){for(;s.times;){var n=!(s.times-=1);o.push(function(e,n){return function(i){e(function(e,t){i(!e||n,{err:e,result:t})},t)}}(s.task,n)),!n&&s.interval>0&&o.push(function(e){return function(t){setTimeout(function(){t(null)},e)}}(s.interval))}O.series(o,function(t,n){n=n[n.length-1],(e||s.callback)(n.err,n.result)})}var a=5,r=0,o=[],s={times:a,interval:r},l=arguments.length;if(1>l||l>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return 2>=l&&"function"==typeof e&&(n=t,t=e),"function"!=typeof e&&function(e,t){if("number"==typeof t)e.times=parseInt(t,10)||a;else{if("object"!=typeof t)throw new Error("Unsupported argument type for 'times': "+typeof t);e.times=parseInt(t.times,10)||a,e.interval=parseInt(t.interval,10)||r}}(s,e),s.callback=n,s.task=t,s.callback?i():i},O.waterfall=function(t,n){function i(e){return h(function(t,a){if(t)n.apply(null,[t].concat(a));else{var r=e.next();r?a.push(i(r)):a.push(n),F(e).apply(null,a)}})}if(n=r(n||e),!j(t)){var a=new Error("First argument to waterfall must be an array of functions");return n(a)}return t.length?void i(O.iterator(t))():n()},O.parallel=function(e,t){A(O.eachOf,e,t)},O.parallelLimit=function(e,t,n){A(g(t),e,n)},O.series=function(e,t){A(O.eachOfSeries,e,t)},O.iterator=function(e){function t(n){function i(){return e.length&&e[n].apply(null,arguments),i.next()}return i.next=function(){return n<e.length-1?t(n+1):null},i}return t(0)},O.apply=h(function(e,t){return h(function(n){return e.apply(null,t.concat(n))})}),O.concat=v(S),O.concatSeries=w(S),O.whilst=function(t,n,i){if(i=i||e,t()){var a=h(function(e,r){e?i(e):t.apply(this,r)?n(a):i(null)});n(a)}else i(null)},O.doWhilst=function(e,t,n){var i=0;return O.whilst(function(){return++i<=1||t.apply(this,arguments)},e,n)},O.until=function(e,t,n){return O.whilst(function(){return!e.apply(this,arguments)},t,n)},O.doUntil=function(e,t,n){return O.doWhilst(e,function(){return!t.apply(this,arguments)},n)},O.during=function(t,n,i){i=i||e;var a=h(function(e,n){e?i(e):(n.push(r),t.apply(this,n))}),r=function(e,t){e?i(e):t?n(a):i(null)};t(r)},O.doDuring=function(e,t,n){var i=0;O.during(function(e){i++<1?e(null,!0):t.apply(this,arguments)},e,n)},O.queue=function(e,t){return T(function(t,n){e(t[0],n)},t,1)},O.priorityQueue=function(t,n){function i(e,t){return e.priority-t.priority}function a(e,t,n){for(var i=-1,a=e.length-1;a>i;){var r=i+(a-i+1>>>1);n(t,e[r])>=0?i=r:a=r-1}return i}function r(t,n,r,o){if(null!=o&&"function"!=typeof o)throw new Error("task callback must be a function");return t.started=!0,j(n)||(n=[n]),0===n.length?O.setImmediate(function(){t.drain()}):void s(n,function(n){var s={data:n,priority:r,callback:"function"==typeof o?o:e};t.tasks.splice(a(t.tasks,s,i)+1,0,s),t.tasks.length===t.concurrency&&t.saturated(),O.setImmediate(t.process)})}var o=O.queue(t,n);return o.push=function(e,t,n){r(o,e,t,n)},delete o.unshift,o},O.cargo=function(e,t){return T(e,1,t)},O.log=N("log"),O.dir=N("dir"),O.memoize=function(e,n){var i={},a={};n=n||t;var r=h(function(t){var r=t.pop(),o=n.apply(null,t);o in i?O.setImmediate(function(){r.apply(null,i[o])}):o in a?a[o].push(r):(a[o]=[r],e.apply(null,t.concat([h(function(e){i[o]=e;var t=a[o];delete a[o];for(var n=0,r=t.length;r>n;n++)t[n].apply(null,e)})])))});return r.memo=i,r.unmemoized=e,r},O.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},O.times=k(O.map),O.timesSeries=k(O.mapSeries),O.timesLimit=function(e,t,n,i){return O.mapLimit(d(e),t,n,i)},O.seq=function(){var t=arguments;return h(function(n){var i=this,a=n[n.length-1];"function"==typeof a?n.pop():a=e,O.reduce(t,n,function(e,t,n){t.apply(i,e.concat([h(function(e,t){n(e,t)})]))},function(e,t){a.apply(i,[e].concat(t))})})},O.compose=function(){return O.seq.apply(null,Array.prototype.reverse.call(arguments))},O.applyEach=I(O.eachOf),O.applyEachSeries=I(O.eachOfSeries),O.forever=function(t,n){function i(e){return e?r(e):void o(i)}var r=a(n||e),o=F(t);i()},O.ensureAsync=F,O.constant=h(function(e){var t=[null].concat(e);return function(e){return e.apply(this,t)}}),O.wrapSync=O.asyncify=function(e){return h(function(t){var n,i=t.pop();try{n=e.apply(this,t)}catch(e){return i(e)}B(n)&&"function"==typeof n.then?n.then(function(e){i(null,e)}).catch(function(e){i(e.message?e:new Error(e))}):i(null,n)})},"object"==typeof module&&module.exports?module.exports=O:"function"==typeof define&&define.amd?define([],function(){return O}):M.async=O}(),window.async.parallelWithTimeout=function(e,t,n,i){var a=n.map(function(t){return function(n){t.callback(function(i,a){var r=AdFuel.getMetricById("modules",t.name)[e+"Callback"],o=(new Date).getTime(),s=o-r.start+"ms";AdFuel.addMetric({type:"modules",id:t.name,data:{callback:e,end:o,elapsed:s}}),AdFuel.addMetric({type:"timeline",id:t.name+"_"+e,data:{end:o,elapsed:s}}),t.isCompleted=!0,n(i,a)})}}),r=setTimeout(function(){r=null;var a=[];i("callback timed out out after "+t+"ms.",null);for(var o=0;o<n.length;o++)if(0==n[o].isCompleted){_dbgLog({task:n[o]});var s=(new Date).getTime();a.push(n[o].name+" "+n[o].event),AdFuel.addMetric({type:"modules",id:n[o].name,data:{callback:e,timeout:s}}),AdFuel.addMetric({type:"timeline",id:n[o].name+"_"+e,data:{timeout:s}})}},t);async.parallel(a,function(e,t){r&&(clearTimeout(r),i(e,t))})}}();var AdFuel=function(){function e(e){return"function"==typeof e}function t(t,n){if(!e(t))throw new TypeError("Bind must be called on a function");var i=he.call(arguments,2);return function(){return t.apply(n,i.concat(he.call(arguments)))}}function n(){window.console.log.apply(window.console,arguments)}function i(e,t,n){return e.addEventListener?e.addEventListener(t,n,!0):e.attachEvent?e.attachEvent("on"+t,n):void 0}function a(){for(var e="",t=0;t<9;t++)e+=Math.floor(16*Math.random()).toString(16);return e}function r(e){var t="";if(document.location.search){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n="[\\?&]"+e+"=([^&#]*)",i=new RegExp(n),a=i.exec(document.location.search);a&&(t=a[1])}return t}function o(e){if(document.cookie){for(var t=document.cookie.split(";"),n=e+"=",i=0;i<t.length;i++){for(var a=t[i];" "==a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(n))return a.substring(n.length,a.length)}return null}return null}function s(e){if(null==e||"object"!=typeof e)return e;if(e instanceof Date){var t=new Date;return t.setTime(e.getTime()),t}if(e instanceof Array){for(var n=[],i=0,a=e.length;i<a;i++)n[i]=s(e[i]);return n}if(e instanceof Object){var r={};for(var o in e)e.hasOwnProperty(o)&&(r[o]=s(e[o]));return r}throw new Error("Unable to copy obj! Its type isn't supported.")}function l(e,t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}function d(){function e(){n||(n=!0,Ne(Se()+" DOMContentLoaded"),Te("AdFuel DOM Ready Detection"),ve=!0,U({type:"timeline",id:"domContentLoaded",data:{id:1,timestamp:Date.now()}}),M())}function t(){if(!n)try{document.documentElement.doScroll("left"),e()}catch(e){setTimeout(t,10)}}var n=!1;if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1);else if(document.attachEvent){var i=!1;try{i=null!==window.frameElement}catch(e){}document.documentElement.doScroll&&!i&&t(),document.attachEvent("onreadystatechange",function(){"complete"!==document.readyState&&"loaded"!==document.readyState&&"interactive"!==document.readyState||e()})}if(window.addEventListener)window.addEventListener("load",e,!0);else if(window.attachEvent)window.attachEvent("onload",e);else{var a=window.onload;window.onload=function(){a&&a(),e()}}"complete"!==document.readyState&&"loaded"!==document.readyState&&"interactive"!==document.readyState||e()}function c(){try{var e=r("adsqa");if(e){var t=e.split("%3D");pe=t[0],fe=t[1],xe.pageTargets[pe]=fe}}catch(e){ke("checkForAdsQA",e)}}function u(e){for(var t=0;t<e.length;t++){for(var n=e[t],i=xe.pageTargets[n[0]]||[],a=0;a<n[1].length;a++){var r=n[1][a];i.indexOf(r)<0&&i.push(r)}xe.pageTargets[n[0]]=i}}function p(e){if(window[e]){if(window[e].adTargets)for(var t in window[e].adTargets)window[e].adTargets.hasOwnProperty(t)&&(xe.pageTargets[t]=window[e].adTargets[t]);if(window[e].slotTargets)for(var n in window[e].slotTargets)if(window[e].slotTargets.hasOwnProperty(n)){var i=window[e].slotTargets[n];xe.slotTargets[n]||(xe.slotTargets[n]={});for(var t in i)i.hasOwnProperty(t)&&(xe.slotTargets[n][t]=i[t])}}}function f(e){var t=s(e.targeting);Array.isArray(t)||(t=[t]);var n=xe.slotTargets;if(n[e.rktr_slot_id])for(var i in n[e.rktr_slot_id])n[e.rktr_slot_id].hasOwnProperty(i)&&t.push([i,n[e.rktr_slot_id][i]]);return t}function h(){i(document,"GPTRenderComplete",function(e){Te("GPT Render Complete",{renderEvent:e});var t=document.getElementById(e.detail.divId);t&&t.className.indexOf("adfuel-rendered")<0&&(t.className+=" adfuel-rendered")})}function m(e){e&&(Array.isArray(e)||(e=[e]),0==e.length&&(e=Object.getOwnPropertyNames(Fe)));for(var t=0;t<e.length;t++){var n=e[t],i=document.getElementById(n)
;i&&i.className.indexOf("adfuel-rendered")>0&&(i.className=i.className.replace("adfuel-rendered",""))}}function g(e){e&&(Array.isArray(e)||(e=[e]),0==e.length&&(e=Object.getOwnPropertyNames(Fe)));for(var t=0;t<e.length;t++){var n=e[t];Fe[n]&&delete Fe[n]}}function v(e){e&&(Array.isArray(e)||(e=[e]),0==e.length&&(Te({pageSlots:Fe}),e=Object.getOwnPropertyNames(Fe))),Te("Removing Rocketeer Slots: ",e);for(var t=0;t<Re.length;t++){var n=Re[t].rktr_slot_id;Te({slotId:n}),(e.indexOf(n)>=0||0==e.length)&&(Te("Removing "+n),Re.splice(t,1))}}function y(){window.googletag.setAdIframeTitle(Ce.iframeTitle)}function w(e,t){if(e&&t){var n=AdFuel.dynamicTargeting.pageTargets[e]||[];Array.isArray(n)||(n=[n]),Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++)n.indexOf(t[i])<0&&n.push(t[i]);xe.pageTargets[e]=n,Te("Setting Page-Level Targeting",e,n),qe.executeWhenAvailable("adding page-level targeting",function(){var t={};t[e]=AdFuel.dynamicTargeting.pageTargets[e],AdFuel.addMetric({type:"page",id:"dynamic_targeting",data:t}),qe.setTargeting(e,AdFuel.dynamicTargeting.pageTargets[e])})}}function b(e,t){qe.executeWhenAvailable("removing page-level targeting",function(){var n=xe.pageTargets[e];if(t&&(n.indexOf(t)>=0&&n.splice(n.indexOf(t),1),xe.pageTargets[e]=n),!t)return qe.clearTargeting(e),delete xe.pageTargets[e],void(AdFuel.dynamicTargeting=xe);e&&0==n.length?delete xe.pageTargets[e]:e&&0==!n.length?(xe.pageTargets[e]=n,qe.setTargeting(e,n)):(xe.pageTargets={},pe&&w(pe,fe))})}function _(e,t,n){var i=xe.slotTargets[e]||{},a=i[t]||[];if(Array.isArray(a))if(Array.isArray(n))for(var r=0;r<n.length;r++)a.push(n[r]);else a.push(n);xe.slotTargets[e]=xe.slotTargets[e]||{},xe.slotTargets[e][t]=a,qe.executeWhenAvailable("adding slot-level targeting",function(){var n=Fe[e];n&&qe.setSlotTargeting(n,t,a)})}function C(e,t,n){qe.executeWhenAvailable("removing slot-level targeting",function(){var i=Fe[e];if(i){var a={},r=i.getTargetingKeys();for(var o in r){var s=r[o];"function"!=typeof s&&(a[s]=i.getTargeting(s)||"")}var l={pos:a.pos};t?n?a[t].splice(a[t].indexOf(n),1):delete a[t]:a={pos:a.pos},qe.clearSlotTargeting(i);for(var d in a)0==a[d].length&&(a[d][0]=""),qe.setSlotTargeting(i,d,a[d])}xe.slotTargets[e]&&(t?n?xe.slotTargets[e][t].splice(xe.slotTargets[e][t].indexOf(n),1):delete xe.slotTargets[e][t]:(xe.slotTargets[e].length=0,xe.slotTargets[e]=l))})}function x(){U({type:"timeline",id:"building_page_level_GPT_object",data:{id:0,start:Date.now()}});var e=o("gptgeo");if(e){var t=e.split("%2C"),n=parseFloat(t[0]),i=parseFloat(t[1]);qe.executeWhenAvailable("setting location",function(){U({type:"configuration",id:"spoofed_user_location",data:{location_spoofed:!0,latitude:n,longitude:i}}),qe.setLocation(n,i)})}else Te("Unable to retrieve location cookie",e),U({type:"configuration",id:"spoofed_user_location",data:{location_spoofed:!1}});void 0!==ce&&(Te("Setting Child Directed Treat Tag : ",ce),qe.executeWhenAvailable("setting child_directed_treatment tag",function(){U({type:"configuration",id:"child_directed_treatment",data:{active:1==ce?"true":"false"}}),qe.setChildDirectedTreatmentTag(ce)})),void 0!==ue&&(Te("Setting SafeFrame Config Tag : ",ue),qe.executeWhenAvailable("setting safeframe_config",function(){U({type:"configuration",id:"safeframe_config",data:{active:ue}}),qe.setSafeFrameConfig(ue)}));for(var a=s(ge),r=0;r<a.length;r++){var l=a[r];U({type:"page",id:"static_targeting",data:{key:l[0],value:l[1]}})}var d=xe.pageTargets;for(var c in d)d.hasOwnProperty(c)&&a.push([c,d[c]]);Te("Page Level Targeting",JSON.stringify(a));for(var u=0;u<a.length;u++){var p=a[u][1];if(p&&!Array.isArray(p)&&(p=p.indexOf(",")>=0?p.split(","):[p]),"exclusions"==a[u][0])for(var f=0;f<p.length;f++){var h=a[u][1][f];qe.executeWhenAvailable("setting category exclusion",function(){qe.setCategoryExclusion(h)})}else{w(a[u][0],p)}}U({type:"timeline",id:"building_page_level_GPT_object",data:{id:0,end:Date.now()}})}function E(e){var t=document.querySelectorAll("div#"+e.rktr_slot_id);if(0!=t.length)for(var n=0;n<t.length;n++){var i=t[n];if(!(i.className.indexOf("adfuel-rendered")>=0)){if(1==t.length&&Fe[e.rktr_slot_id]){var a=I(e,!0);return T(a.rktr_slot_id),a}return I(e)}Te("Found rendered slot...",e.rktr_slot_id)}return Te("Not building slot... Can't Find Unrendered Slot On Page",e.rktr_slot_id),null}function A(e){var t=Ce.networkId;e.inherit&&de&&(e.rktr_ad_id=de),Te("Building Slot",e),U({type:"timeline",id:"building_gpt_slot_"+e.rktr_slot_id,data:{id:1,start:Date.now()}}),U({type:"slots",id:e.rktr_slot_id,data:{build_start:Date.now()}});var n,i="/"+t+"/"+e.rktr_ad_id,a=e.rktr_slot_id,r=e.rktr_slot_id.indexOf("_oop")>=1,o=r?"Defining OOP Slot":"Defining Standard Slot";void 0!==e.safeframe_config&&(n=e.safeframe_config),qe.executeWhenAvailable(o,function(){Fe[a]=r?qe.defineOutOfPageSlot(i,a):qe.defineSlot(i,e.sizes,a),n&&qe.setSlotSafeFrameConfig(Fe[a],n),U({type:"counts",id:"slots",data:"+"}),Te("Slot: ",e)}),Te("Slots",Fe),qe.executeWhenAvailable("Defining slot targeting",function(){var t=f(e);for(var n in t)if(t.hasOwnProperty(n)){var i;if(i=t[n]&&t[n][1]?JSON.stringify(t[n][1]):""){i=JSON.parse(i);var r=Fe[a];if("exclusions"==t[n][0])if(Array.isArray(t[n][1]))for(var o in t[n][1])t[n][1].hasOwnProperty(o)&&(i=t[n][1][o],qe.setSlotCategoryExclusion(r,i));else qe.setSlotCategoryExclusion(r,i);else{var s=t[n][0];qe.setSlotTargeting(r,s,i)}}}}),Te("Checking Responsive Mapping For Slot",e.responsive,e.responsive.length),e.responsive=e.responsive||[],e.responsive.length>0&&k(e.rktr_slot_id,e.responsive);var s=z("slots",e.rktr_slot_id),l=Date.now(),d=l-s.build_start+"ms";U({type:"slots",id:e.rktr_slot_id,data:{build_end:l,build_elapsed:d}});for(var c=[],u=0;u<e.sizes.length;u++){var p=e.sizes[u];c.push(p.join("x"))}U({type:"slots",id:e.rktr_slot_id,data:{allowed_sizes:c}}),U({type:"timeline",id:"building_gpt_slot_"+e.rktr_slot_id,data:{id:1,end:Date.now()}})}function S(e,t){function n(e){var t=Re.indexOf(e);t>=0&&Re.splice(t,1)}var i=[];U({type:"timeline",id:"building_gpt_slots",data:{id:z("timeline","building_gpt_slots").length||1,start:Date.now()}});for(var a=0;a<e.length;a++){var r=e[a],o=t&&t.ignoreCheck,s=!0;o||E(r)||(n(r),s=!1),s&&(A(r),i.push(r),n(r))}return U({type:"timeline",id:"building_gpt_slots",data:{id:1,slots:i.length,end:Date.now()}}),i}function T(e){e=e||[],Array.isArray(e)||(e=[e]),Te("Clearing Slots",{slotDivIds:e}),qe.executeWhenAvailable("clearing slots",function(){var t=[];e.length>0&&(t=e.filter(function(e){return!!Fe[e]}).map(function(e){return Fe[e]}),0==t.length)||qe.clearSlots(t)})}function N(e){e=e||[],Array.isArray(e)||(e=[e]),Te("Destroying Slots",{slotDivIds:e}),qe.executeWhenAvailable("destroying slots",function(){var t=[];e.length>0&&(t=e.filter(function(e){return!!Fe[e]}).map(function(e){return Fe[e]}),0==t.length)||(m(e),qe.destroySlots(t),g(e),v(e))})}function k(e,t){for(var n=0;n<t.length;n++){for(var i=JSON.parse(JSON.stringify(t[n])),a=0;a<i.length;a++)if(Array.isArray(i[a]))for(var r=0;r<i[a].length;r++)if(Array.isArray(i[a][r]))for(var o=0;o<i[a][r].length;o++)i[a][r][o]=parseInt(i[a][r][o]);else parseInt(i[a][r])>=0?i[a][r]=parseInt(i[a][r]):i[a]=[];else i[a]=[];t[n]=i}qe.executeWhenAvailable("setting slot mappings",function(){qe.defineSlotSizeMapping(Fe[e],t)})}function I(e,t){Te("Checking to see if slot div id needs updated.",{slot:e});var n=e.rktr_slot_id,i=n,r=n.split("_"),o=r[r.length-1],s=document.querySelectorAll("div#"+n);if(s.length>1||1==s.length&&t){for(Te("updating slot div id.",{slot:e});Fe[i];)3==r.length?o=a():(o=parseInt(o)+1,o=o<10?"0"+String(o):String(o)),r[r.length-1]=o,i=r.join("_");F(e,i,n),R(n,i)}return e}function F(e,t,n){e.rktr_slot_id=t;try{var i=new CustomEvent("SlotIdChange",{detail:{asset:e,originalId:n,newId:t}});document.dispatchEvent(i)}catch(e){ke("error dispatching custom Event: SlotIdChange",{error:e})}}function R(e,t){var n=document.querySelectorAll("div#"+e);if(n.length>0)for(var i=0;i<n.length;i++){var a=n[i];(a.className.indexOf("adfuel-rendered")<0&&n.length>1||1==n.length)&&(a.id=t)}}function O(){return Ee&&ve&&0==ye&&0==we}function M(){if(O())if(Oe.length>0||Me.length>0){Te("Processing delayed dispatch queues");var e;for(e=0;e<Oe.length;e++)Oe[e]();for(Te("User-Dispatched Queues: ",Me),e=0;e<Me.length;e++)Me[e]();Oe.length=0,Me.length=0}else Ce.autoDispatch&&(Te("Processing all queues"),AdFuel.dispatchQueue())}function D(e){if(!O())return Te("Delaying Queue Dispatch"),void Oe.push(function(){D(e)});var t=z("timeline","dispatch_queue");if(U({type:"timeline",id:"dispatch_queue_called",data:{id:t.length?t.length+1:1,timestamp:Date.now(),slots:Re.length}}),e=e||{},Te("Registry",AdFuel.registry),Te("SlotQueue: ",Re),Te("Dispatch Options: ",e),e.slots&&e.slots.length>0)for(var n=0;n<e.slots.length;n++)je.indexOf(e.slots[n])>=0&&je.splice(je.indexOf(e.slots[n]),1);if(Re.length>0){var i=Re.filter(function(t){var n=!e.slots||0==e.slots.length||e.slots.indexOf(t.rktr_slot_id)>=0,i=!e.exclude||0==e.exclude.length||e.exclude.indexOf(t.rktr_slot_id)<0,a=e.slots&&e.slots.length>0||je.indexOf(t.rktr_slot_id)<0;return n&&i&&a});if(e.slots&&e.slots.length>0&&je.length>0)for(var a=0;a<e.slots.length;a++){var r=je.indexOf(e.slots[a]);r>=0&&je.splice(r,1)}var o=S(i,e);if(o.length>0){var l=parseInt(z("counts","requests").length||0)+1,d=Date.now();U({type:"counts",id:"requests",data:"+"}),U({type:"requests",id:l,data:{start:d,options:e,queue:[]}}),x();var c=s(o),u=z("counts","requests");u.length>0&&u.length-1;for(var p=[],f=0;f<c.length;f++){var h=c[f];p.push(h.rktr_slot_id)}U({type:"requests",id:l,data:{queue:p}});Object.getOwnPropertyNames(e).length>0&&U({type:"requests",id:l,data:{options:e}});var m=De.filter(function(e){return!!e.callbacks.preDispatchCallback}).map(function(e){return be(e.name,function(t){e.callbacks.preDispatchCallback(c,t)},"preDispatch")});e&&e.preDispatchCallback&&m.push(be("dispatchOptions",function(t){e.preDispatchCallback(c,t)},"preDispatch"));for(var g=Date.now(),v=0;v<m.length;v++)U({type:"modules",id:m[v].name,data:{callback:"preDispatch",start:g}}),U({type:"timeline",id:m[v].name+"_preDispatch",data:{start:g}});async.parallelWithTimeout("preDispatch",Ce.dispatchCallbackTimeoutInMilliseconds,m,function(t){t&&Te("Error calling preDispatchCallbacks for registered modules",{error:t});try{var n=new CustomEvent("PreDispatchComplete",{detail:{slots:Re.length}});document.dispatchEvent(n)}catch(e){ke("error dispatching custom Event: PreDispatchComplete",{error:e})}var i=z("timeline","dispatch_queue"),a=i.length?i.length+1:1;U({type:"timeline",id:"dispatch_queue",data:{id:a,start:Date.now(),slots:Re.length}});for(var r=H(o,e),d=s(r),c=De.filter(function(e){return!!e.callbacks.postDispatchCallback}).map(function(e){return be(e.name,function(t){e.callbacks.postDispatchCallback(d,t)},"postDispatch")}),u=0;u<d.length;u++);e&&e.postDispatchCallback&&c.push(be("dispatchOptions",function(t){e.postDispatchCallback(d,t)},"postDispatch"));var p=Date.now();Ne(Se()+" Starting postDispatch Callbacks");for(var u=0;u<c.length;u++)U({type:"modules",id:c[u].name,data:{callback:"postDispatch",start:p}}),U({type:"timeline",id:c[u].name+"_postDispatch",data:{start:p}});async.parallelWithTimeout("postDispatch",Ce.dispatchCallbackTimeoutInMilliseconds,c,function(e){e&&Te("error calling postDispatchCallbacks for registered modules",{error:e});try{var t=new CustomEvent("PostDispatchComplete",{detail:{slots:d.length}});document.dispatchEvent(t)}catch(e){ke("error dispatching custom Event: PostDispatchComplete",{error:e})}Ne(Se()+" End postDispatch Callbacks"),Te("Slot Queue After Dispatch:",Re)}),Ne(Se()+" End Dispatch of Queue: "+r.length+" slots");var f=Date.now();U({type:"timeline",id:"dispatch_queue",data:{id:a,end:f,slots:d.length}});var h=z("requests",l)[0],m=f-h.start+"ms";U({type:"requests",id:l,data:{end:f,elapsed:m}})})}}}function j(e,t){function n(e){var t=document,n=t.createElement("script"),a=t.getElementsByTagName("script")[0],r=/^(complete|loaded)$/,o=!1;n.type="text/javascript",n.src=e,n.onload=n.onreadystatechange=function(){o||"readyState"in n&&r.test(n.readyState)||(n.onload=n.onreadystatechange=null,o=!0,i())},a.parentNode.insertBefore(n,a)}function i(){t.dispatch&&AdFuel.dispatchQueue(t),U({type:"timeline",id:"Queueing registry via Script",data:{timestamp:Date.now()}})}function a(e,t){var n=[];if(n.push(e[0]),t&&t.length>0)for(var i=1;i<e.length;i++)t.indexOf(e[i].rktr_slot_id)>=0&&n.push(e[i]);else n=e;return n}function r(i){1==i.error?(Te("Using Script Tag Method..."),n(e)):(U({type:"timeline",id:"Queueing registry via JSON",data:{timestamp:Date.now()}}),i.response=a(i.response,t.slots),console.log({queueOptions:t}),window.AdFuel.registry.push(i.response,t),Ne(Se()+" End Queuing of Registry: "+e))}if(Te("Queueing Registry: ",e,t),Ne(Se()+" Start Queuing of Registry: "+e),t=t||{dispatch:Ce.autoDispatch},console.log({queueOptions:t}),t.exclude&&t.exclude.length>0)for(var o=0;o<t.exclude.length;o++){var s=t.exclude[o];je.indexOf(s)<0&&je.push(s)}Te("Trying JSON Request First..."),Be(e,r)}function B(e,t,n){function i(){if(r++==t){n()&&B(e,t,n)}else{var s=Date.now()-o-r*a;window.setTimeout(i,a-s)}}t=t||10;var a=e/t,r=0,o=Date.now();window.setTimeout(i,a)}function P(e,t){function n(e){Te("starting refresh interval: "+e,t),B(1e3*e,5,function(){if(!t.interval||0==parseInt(t.interval))return Te("stopping refresh interval: "+e,t),!1;var i=parseInt(t.interval);return e!=i?(Te("changing refresh interval: "+e,t),n(i),!1):(r(),!0)})}!e||Array.isArray(e)||t?t=t||{}:(t=e,e=[]),e||(e=[]),Ne(Se()+" Begin Slot Refresh: "+e.length+" slots");var i=z("timeline","refresh"),a=i.length||1;U({type:"timeline",id:"refresh",data:{id:a,slots:e,options:t,start:Date.now()}}),t.pageload=void 0==t.pageload||t.pageload,t.maintainCorrelator=void 0==t.maintainCorrelator||t.maintainCorrelator,Te("Refresh Options",t);var r=function(){if(Te("Testing Refresh: ",{focused:Ae,refreshOnFocusOnly:Ce.refreshOnFocusOnly,test:Ae||!Ce.refreshOnFocusOnly}),Ae||!Ce.refreshOnFocusOnly){var n=[],i=[],r=[];if(0==e.length)for(var o in Fe)Fe.hasOwnProperty(o)&&r.push(o);else r=e;for(var s=0;s<r.length;s++){var o=r[s];if(document.getElementById(o)){U({type:"slots",id:o,data:{refresh_start:Date.now()}});var l=Fe[o];l&&(n.push(l),i.push(o))}else Te("Cannot find element on page to refresh: "+o)}if(e.length>0&&0==i.length)return;var d=De.filter(function(e){return!!e.callbacks.preRefreshCallback}).map(function(e){return be(e.name,function(t){e.callbacks.preRefreshCallback(i,t)},"preRefresh")});t.preRefreshCallback&&d.push(be("refreshOptions",function(e){t.preRefreshCallback(i,e)},"preRefresh"));var c=Date.now();Ne(Se()+" Begin preRefreshCallbacks");for(var u=0;u<d.length;u++)U({type:"modules",id:d[u].name,data:{callback:"preRefresh",start:c}}),U({type:"timeline",id:d[u].name+"_preRefresh",data:{start:c}});async.parallelWithTimeout("preRefresh",Ce.refreshCallbackTimeoutInMilliseconds,d,function(r){r&&Te("error calling preRefreshCallbacks for all registered modules",{error:r});try{var o=new CustomEvent("PreRefreshComplete",{detail:{slots:i}});document.dispatchEvent(o)}catch(e){ke("error dispatching custom Event: PreRefreshComplete",{error:e})}Ne(Se()+" End preRefreshCallbacks"),T(i),t.pageload?qe.setTargeting("pageload","ref"):qe.clearTargeting("pageload"),qe.refreshSlots(n,t);for(var s=i,l=(new Date,0);l<i.length;l++){var d=i[l],c=z("slots",d),u=Date.now();U({type:"slots",id:d,data:{refresh_end:u,refresh_elapsed:u-c.refresh_start+"ms"}}),U({type:"counts",id:d+"_refreshes",data:"+"})}var p=De.filter(function(e){return!!e.callbacks.postRefreshCallback}).map(function(e){return be(e.name,function(t){e.callbacks.postRefreshCallback(s,t)},"postRefresh")});t.postRefreshCallback&&p.push(be("refreshOptions",function(e){t.postRefreshCallback(s,e)},"postRefresh"));for(var f=Date.now(),l=0;l<p.length;l++)U({type:"modules",id:p[l].name,data:{callback:"postRefresh",start:f}}),U({type:"timeline",id:p[l].name+"_postRefresh",data:{start:f}});async.parallelWithTimeout("postRefresh",Ce.refreshCallbackTimeoutInMilliseconds,p,function(e){e&&Te("error calling postRefreshCallbacks for all registered modules",{error:e});try{var t=new CustomEvent("PostRefreshComplete",{detail:{slots:i}});document.dispatchEvent(t)}catch(e){ke("error dispatching custom Event: PostRefreshComplete",{error:e})}Ne(Se()+" End postRefreshCallbacks")}),Ne(Se()+" End Slot Refresh: "+e.length+" slots"),U({type:"timeline",id:"refresh",data:{id:a,slots:e,options:t,end:Date.now()}})})}};if(t.interval&&parseInt(t.interval)>0){n(parseInt(t.interval))}else r()}function L(){return Object.getOwnPropertyNames(Pe)}function q(e){return Pe[e]||{}}function z(e,t){return"counts"!=e||Pe[e][t]?"timeline"!=e||"request_to_dfp"!=t||Pe[e][t]?Pe[e][t]||{}:[]:0}function U(e){Te("Adding Metric: ",JSON.parse(JSON.stringify(e)));var t,n=!1;Pe[e.type]||(Pe[e.type]={}),Pe[e.type][e.id]||(Pe[e.type][e.id]=[],n=!0);Pe[e.type];switch(t=n?[]:z(e.type,e.id),e.type){case"counts":0==t.length&&(t=0);var i=parseInt(t);if("+"==e.data)i+=1;else{if("-"!=e.data)return Te("Metric data contains no operator for counting metrics.",e),!1;i-=1}Pe[e.type][e.id]=i,Te("Metrics updated with: ",e,Pe);break;case"modules":if(e.data.callback){var a=De.filter(function(t){return t.name==e.id});Array.isArray(a)&&(a=a[0]),0==t.length&&(t={});var r=Object.getOwnPropertyNames(a.callbacks),o=e.data.callback+"Callback";if(r.indexOf(o)>=0)for(var s=0;s<r.length;s++)t[r[s]]||(t[r[s]]={}),delete e.data.callback,t[r[s]]=l(t[r[s]],e.data);Pe[e.type][e.id]=t}else{var d=l(t,e.data);Pe[e.type][e.id]=d,Te("Metrics updated with: ",e,Pe)}break;case"requests":case"timeline":var c=e.data.id||1,d={};t.length>0&&(d=t[c-1]),d=l(d,e.data),Pe[e.type][e.id][c-1]=d,Te("Metrics updated with: ",e,Pe);break;case"slots":default:var d=l(t,e.data);Pe[e.type][e.id]=d,Te("Metrics updated with: ",e,Pe)}for(var u=De.filter(function(e){return!!e.callbacks.metricUpdateCallback}).map(function(t){return be(t.name,function(n){t.callbacks.metricUpdateCallback(e,n)},"metricUpdate")}),p=0;p<u.length;p++){u[p].callback()}return!0}function H(e,t){var n=z("timeline","request_to_dfp").length+1;n||(n=1),U({type:"timeline",id:"request_to_dfp",data:{id:n,slots:e,options:t,start:Date.now()}}),t=t||{sync:!1,syncSlots:[],maintainCorrelator:!1};var i=[];qe.configurePubAds();for(var a=0;a<e.length;a++){var r=e[a].rktr_slot_id;document.getElementById(r)?(!function(e){qe.executeWhenAvailable("displaying slot",function(){Te("Displaying Slot: "+e),qe.displaySlotById(e)})}(r),i.push(e[a])):(Te("Can't Find Slot On Page",r),Pe.slots&&Pe.slots[r]&&delete Pe.slots[r])}var o=i.map(function(e){return U({type:"slots",id:e.rktr_slot_id,data:{render_start:Date.now()}}),e.rktr_slot_id});qe.executeWhenAvailable("refreshing slots",function(){var e=[];for(var n in Fe)Fe.hasOwnProperty(n)&&(Te("Checking Slot for Sync: "+n),(t.sync&&(!t.syncSlots||0==t.syncSlots.length||t.syncSlots.indexOf(n)>=0)||o.indexOf(n)>=0)&&(Te("Syncing Slot With Request: "+n),e.push(Fe[n])));Te("Slots To Refresh: ",e.map(function(e){return e.getSlotElementId()})),qe.refreshSlots(e)}),t.maintainCorrelator=t.maintainCorrelator||!1,Te({maintainCorrelator:t.maintainCorrelator}),0==t.maintainCorrelator&&qe.executeWhenAvailable("updating correlator",qe.updateCorrelator);try{var s=new CustomEvent("AdFuelRequestComplete",{detail:{slots:JSON.parse(JSON.stringify(i)),options:t}});document.dispatchEvent(s)}catch(e){ke("error dispatching custom Event: AdFuelRequestComplete",{error:e})}return U({type:"timeline",id:"request_to_dfp",data:{id:n,slots:e,options:t,end:Date.now()}}),i}function W(e){if(e)for(var t in e)if(e.hasOwnProperty(t))if("slotTargets"==t){for(var n in e[t])if(e[t].hasOwnProperty(n)){var i=e[t][n];for(var a in i)i.hasOwnProperty(a)&&AdFuel.addSlotLevelTarget(n,a,e[t][n][a])}}else if("adTargets"==t)for(var n in e[t])e[t].hasOwnProperty(n)&&AdFuel.addPageLevelTarget(n,e[t][n]);else AdFuel.addPageLevelTarget(t,e[t])}function Q(e){if(e&&e.indexOf("/")>=0){var t=e.split("/")[0];if(parseInt(t)>0){var n=e.split("/");n.splice(0,1),e=n.join("/")}}return e}function V(e,t){Ie("AdFuel.logit is DEPRECATED and will be removed in the next version of AdFuel."),Te(t,e)}function $(e){Ie("AdFuel.queueSingleton is DEPRECATED and will be removed in the next version of AdFuel."),Te("Queuing Singleton",e),e.size=e.size||[[88,31]],e.targets=e.targets||[],e.responsive=e.responsive||[];var t=e.divId;e.adunit=Q(e.adunit);var n={singleton:!0,rktr_id:"singleton_"+t,gpt_id:Ce.networkId,root:e.adunit.split("/")[0].toUpperCase(),responsive:[],rktr_slot_id:"page"};if(ge&&e.targets.length>0){for(var i=[],a=[],r=0;r<e.targets.length;r++){for(var o=e.targets[r],s=!1,l=0;l<ge.length;l++)if(ge[l][0]==o[0])for(var d=0;d<o[1].length;d++)ge[l][1].indexOf(o[1][d])>=0&&(s=!0,a=ge[l],Te("Found duplicate page-level target. Removing from singleton.",{singleton:o,pageLevel:a}));s||i.push(o)}e.targets=i}n.targeting=ge;var c={present:!0,responsive:e.responsive,rktr_slot_id:e.divId,sizes:e.size,targeting:e.targets,rktr_ad_id:e.adunit,inherit:e.inherit};if(c){var u=[n,c];AdFuel.registry.push(u),e.dispatch&&!Ce.autoDispatch&&AdFuel.dispatchQueue({slots:[c.rktr_slot_id]})}else Te("missing singleton: "+e.divId)}function K(e){Ie("AdFuel.processNewRegistry is DEPRECATED and will be removed in the next version of AdFuel."),j(e,{dispatch:!0})}function J(e,t,n){Ie("AdFuel.reloadAd is DEPRECATED and will be removed in the next version of AdFuel."),AdFuel.refresh([e],{pageload:t,interval:0,updateCorrelator:n})}function G(e,t,n,i){Ie("AdFuel.refreshAd is DEPRECATED and will be removed in the next version of AdFuel."),AdFuel.refresh([e],{pageload:n||!1,interval:t||0,updateCorrelator:i||!0})}function Y(e,t,n,i){Ie("AdFuel.refreshAds is DEPRECATED and will be removed in the next version of AdFuel."),AdFuel.refresh(e,{pageload:n||!1,interval:t||0,updateCorrelator:i||!0})}function Z(e,t,n){Ie("AdFuel.refreshAllAds is DEPRECATED and will be removed in the next version of AdFuel.");var i={pageload:t||!1,interval:e||0,updateCorrelator:n||!0};return AdFuel.refresh([],i),!0}function X(e,t,n,i,a,r,o,s){Ie("AdFuel.renderSingleSlot is DEPRECATED and will be removed in the next version of AdFuel."),e.indexOf("ad_carousel_slide")>=0&&(a="NBA/homepage"),$({divId:e,size:t,targets:n,responsive:i,adunit:a,delay:r,inherit:o,dispatch:void 0==s||s,sync:!1,syncSlots:[]})}function ee(){i(document,"AdFuelRequestComplete",function(e){Te("AdFuel Request Complete",{requestEvent:e})}),i(document,"GPTRenderComplete",function(e){Te("GPT Render Complete",{renderEvent:e})}),i(document,"GPTSlotBuildComplete",function(e){Te("GPT Slot Build Complete",{renderEvent:e})}),i(document,"SlotIdChange",function(e){Te("Slot ID Change",{idChangeEvent:e})}),i(document,"SlotVisibilityChanged",function(e){Te("Slot Visibility Changed",{visibilityChangedEvent:e})}),i(document,"SlotViewable",function(e){Te("Slot Viewable",{viewableEvent:e})}),i(document,"GPTSlotLoaded",function(e){Te("Slot Loaded",{slotOnLoadEvent:e})}),i(document,"PreQueueComplete",function(e){Te("PreQueueComplete",{preQueueCompleteEvent:e})}),i(document,"PostQueueComplete",function(e){Te("PostQueueComplete",{postQueueCompleteEvent:e})}),i(document,"PreDispatchComplete",function(e){Te("PreDispatchComplete",{preDispatchCompleteEvent:e})}),i(document,"PostDispatchComplete",function(e){Te("PostDispatchComplete",{postDispatchCompleteEvent:e})}),i(document,"PreRefreshComplete",function(e){Te("PreRefreshComplete",{preRefreshCompleteEvent:e})}),i(document,"PostRefreshComplete",function(e){Te("PostRefreshComplete",{postRefreshCompleteEvent:e})})}function te(){if(!Ee){Ee=!0;var e=Ce.exclude.join(",")||"No Exclusions";U({type:"timeline",id:"adfuel_initialized",data:{id:1,timestamp:Date.now()}}),U({type:"configuration",id:"adfuel_initialization_options",data:{refreshOnFocusOnly:Ce.refreshOnFocusOnly,networkId:Ce.networkId,autoDispatch:Ce.autoDispatch,exclude:e,iFrameTitle:Ce.iframeTitle}}),U({type:"configuration",id:"callback_timeout_length",data:{queueCallbackTimeout:Ce.queueCallbackTimeoutInMilliseconds+"ms",dispatchCallbackTimeout:Ce.dispatchCallbackTimeoutInMilliseconds+"ms",refreshCallbackTimeout:Ce.refreshCallbackTimeoutInMilliseconds+"ms"}}),h(),c(),ee(),d(),qe.executeWhenAvailable("set ad iframe title",y),M();try{var t=new CustomEvent("AdFuelCreated",{detail:{AdFuel:window.AdFuel}});document.dispatchEvent(t)}catch(e){ke("error dispatching custom Event: AdFuelCreated",{error:e})}i(document,"PostQueueComplete",function(){setTimeout(M,300)})}}function ne(){return s(Re)}function ie(e){for(var t,n=0;n<AdFuel.registry.length;n++)for(var i=AdFuel.registry[n],a=1;a<i.length;a++){var r=i[a];r.rktr_slot_id==e&&(t=s(r))}var o,l={},d=Fe[e];if(d){o=d.getAdUnitPath();var c=d.getTargetingKeys();for(var u in c){var p=c[u];l[p]=d.getTargeting(p)}}return{adUnit:o,slot:t,slotTargeting:l}}function ae(e,t){Te("registering module: "+e);for(var n=-1,i=0;i<De.length;i++)De[i].name==e&&(n=i);n>=0?De[n].callbacks=t:De.push({name:e,callbacks:t}),Pe.modules=Pe.modules||{},Pe.modules[e]=Pe.modules[e]||{};for(var a in t)t.hasOwnProperty(a)&&(Pe.modules[e][a]={});return U({type:"counts",id:"modules",data:"+"}),Le}function re(e){for(var t=-1,n=0;n<De.length;n++)De[n].name==e&&(t=n);t>=0&&De.splice(t,1),U({type:"counts",id:"modules",data:"-"})}function oe(e){var t=arguments.callee,n="window/console";try{n=t.caller.toString()}catch(e){n="window/console"}return function(){if(!Ee)return ke("ERROR: AdFuel must be initialized first!"),void Te("------------------FUNCTION --------------------",e,"--------------- END FUNCTION ------------------","called by: "+n);e.apply(this,arguments)}}function se(e){if(e){if(e.exclude&&e.exclude.length>0)for(var t=0;t<e.exclude.length;t++){var n=e.exclude[t];je.indexOf(n)<0&&je.push(n)}for(var i in e)e.hasOwnProperty(i)&&(Ce[i]=e[i]);var a=Ce.exclude.length>0?Ce.exclude.join(","):"No Exclusions";U({type:"configuration",id:"adfuel_initialization_options",data:{refreshOnFocusOnly:Ce.refreshOnFocusOnly,networkId:Ce.networkId,autoDispatch:Ce.autoDispatch,exclude:a,iFrameTitle:Ce.iframeTitle}}),U({type:"configuration",id:"callback_timeout_length",data:{queueCallbackTimeout:Ce.queueCallbackTimeoutInMilliseconds+"ms",dispatchCallbackTimeout:Ce.dispatchCallbackTimeoutInMilliseconds+"ms",refreshCallbackTimeout:Ce.refreshCallbackTimeoutInMilliseconds+"ms"}})}}function le(){return qe.updateCorrelator()}var de,ce,ue,pe,fe,he=Array.prototype.slice,me=function(){},ge=[],ve=!1,ye=!1,we=!1,be=function(e,t,n){return{name:e,callback:t,event:n,data:{}}},_e=function(){var e=[];return e.push=function(t,n){if(ye=!0,n&&n.slotMap)for(var i=1;i<t.length;i++)n.slotMap[t[i].rktr_slot_id]&&(t[i].rktr_slot_id=n.slotMap[t[i].rktr_slot_id]);Array.prototype.push.call(e,t);var a=s(t);n=n||{dispatch:!0};for(var r=De.filter(function(e){return!!e.callbacks.preQueueCallback}).map(function(e){return be(e.name,function(t){e.callbacks.preQueueCallback(a,t)},"preQueue")}),o=0;o<r.length;o++){var l=(new Date).getTime();AdFuel.addMetric({type:"modules",id:r[o].name,data:{callback:"preQueue",start:l}}),AdFuel.addMetric({type:"timeline",id:r[o].name+"_preQueue",data:{start:l}})}async.parallelWithTimeout("preQueue",Ce.queueCallbackTimeoutInMilliseconds,r,function(e){e&&Te("error calling preQueueCallbacks for registered modules",{error:e});try{var i=new CustomEvent("PreQueueComplete",{detail:{asset:t}});document.dispatchEvent(i)}catch(e){ke("error dispatching custom Event: PreQueueComplete",{error:e})}ye=!1;var a=(new Date).getTime();AdFuel.addMetric({type:"timeline",id:"queueing_registry:_"+t[0].rktr_id,data:{id:0,start:a}});var r=t[0].rktr_id;U({type:"counts",id:"registries",data:"+"}),U({type:"registries",id:r,data:{deployed:t[0].rktr_deployed_date,slotCount:t.length-1}}),void 0!==t[0].child_directed_treatment&&(ce="true"==t[0].child_directed_treatment?1:0),void 0!==t[0].safeframe_config&&(ue=t[0].safeframe_config),t[0].singleton||(u(t[0].targeting),de=Q(t[1].rktr_ad_id)),p(t[0].root?t[0].root.toUpperCase():t[0].site.toUpperCase());for(var r=t[0].rktr_id,o=!1,l=1;l<t.length;l++){var d=t[l];if(d.parentRegistry=r,!d.queued){AdFuel.addMetric({type:"slots",id:d.rktr_slot_id,data:{queued:(new Date).getTime()}});1==(t[0].hasInViewRefresh?t[0].hasInViewRefresh:d.hasInViewRefresh)&&(AdFuel.addMetric({type:"slots",id:d.rktr_slot_id,data:{"In-View Refresh Registration":(new Date).getTime()}}),o=!0),Re.push(d)}}o&&_startInViewListeners();for(var c=s(Re),f=De.filter(function(e){return!!e.callbacks.postQueueCallback}).map(function(e){return be(e.name,function(t){e.callbacks.postQueueCallback(c,t)},"postQueue")}),l=0;l<f.length;l++){var a=(new Date).getTime();AdFuel.addMetric({type:"modules",id:f[l].name,data:{callback:"postQueue",start:a}}),AdFuel.addMetric({type:"timeline",id:f[l].name+"_postQueue",data:{start:a}})}we=!0,async.parallelWithTimeout("postQueue",Ce.queueCallbackTimeoutInMilliseconds,f,function(e){e&&Te("error calling postQueueCallbacks for registered modules",{error:e});try{var i=new CustomEvent("PostQueueComplete",{detail:{asset:t}});document.dispatchEvent(i)}catch(e){ke("error dispatching custom Event: PostQueueComplete",{error:e})}Ne(Se()+" End postQueue Callbacks"),we=!1;var a=(new Date).getTime();AdFuel.addMetric({type:"timeline",id:"queueing_registry:_"+t[0].rktr_id,data:{id:0,end:a}}),(Ce.autoDispatch||1==n.dispatch)&&AdFuel.dispatchQueue(n)})})},e},Ce={refreshOnFocusOnly:!1,networkId:"8663477",autoDispatch:!0,exclude:[],iframeTitle:"advertisement",queueCallbackTimeoutInMilliseconds:500,dispatchCallbackTimeoutInMilliseconds:500,refreshCallbackTimeoutInMilliseconds:500},xe={pageTargets:{},slotTargets:{}},Ee=!1,Ae=!0,Se=function(){var e=new Date,t=e.toISOString(),n=t.split("T");n[0];return n[1].replace("Z","")},Te="true"==r("debug")?t(n,null,"[AdFuel - DEBUG]"):me,Ne="true"==r("timers")?t(n,null,"[AdFuel- TIMER]"):me,ke=(t(n,null,"[AdFuel - WARNING]"),t(n,null,"[AdFuel - ERROR]")),Ie=t(n,null,"[AdFuel - DEPRECATION NOTICE]"),Fe={},Re=[],Oe=[],Me=[],De=[],je=[],Be=function(e,t){var n=document.createElement("a");n.href=e;var i=n.protocol+"//ssl.cdn.turner.com"+n.pathname.replace(/(.js)$/,".json"),a=new XMLHttpRequest;a.onload=function(){var e=this.response;try{e=JSON.parse(e),Te("JSON Data Parsed:",e),t({response:e.registry,error:!1})}catch(n){Te("JSON Request Failed: ",n),e={response:this.response,error:!0},t(e)}};try{Te("Requesting JSON: ",i),a.open("GET",i,!0),a.setRequestHeader("Accept","application/json"),a.send()}catch(e){Te("JSON Request Failed: ",e),data={response:this.response,error:!0},t(data)}},Pe={},Le={metrics:Pe,getMetricTypes:L,getMetricsByType:q,getMetricById:z,addMetric:U},qe=function(){function e(e,t){return C||!(C=window.googletag.apiReady&&window.googletag.pubads)&&e&&ke("GPT is unavailable - "+e,t),C}function t(e,t){window.googletag.cmd.push(t)}function n(){_||(_=!0,AdFuel.requestScriptText+="googletag.pubads().collapseEmptyDivs(true);\n",AdFuel.requestScriptText+="googletag.pubads().enableAsyncRendering();\n",AdFuel.requestScriptText+="googletag.pubads().enableSingleRequest();\n",AdFuel.requestScriptText+="googletag.pubads().disableInitialLoad();\n",AdFuel.requestScriptText+="googletag.enableServices();\n",t("Sending Request",function(){window.googletag.pubads().addEventListener("impressionViewable",function(e){var t=e,n=new CustomEvent("SlotViewable",{detail:t});document.dispatchEvent(n)}),window.googletag.pubads().addEventListener("slotVisibilityChanged",function(e){var t=e,n=new CustomEvent("SlotVisibilityChanged",{detail:t});document.dispatchEvent(n)}),window.googletag.pubads().addEventListener("slotRenderEnded",function(e){try{var t={};e.slot&&(t.asset=e.slot),e.slot.getTargeting("pos")&&(t.pos=e.slot.getTargeting("pos")),e.isEmpty?t.empty=!0:t.empty=!1,e.size&&(t.renderedSize=e.size),e.creativeId&&(t.creativeId=e.creativeId),e.lineItemId&&(t.lineItemId=e.lineItemId),e.serviceName&&(t.serviceName=e.serviceName),e.slot.getSlotElementId()&&(t.divId=e.slot.getSlotElementId(),
document.getElementById(t.divId));var n=z("slots",t.divId),i=!1;for(var a in n)0==a&&(i=!0);var r=Date.now(),o=z("slots",t.divId),s=r-o.render_start+"ms";i||U({type:"timeline",id:t.divId+"_rendered",data:{id:1,start:o.render_start,end:r,elapsed:s}}),U({type:"slots",id:t.divId,data:{render_end:r,render_elapsed:s,advertiserId:t.advertiserId,campaignId:t.campaignId,creativeId:e.creativeId,lineItemId:e.lineItemId}});try{U({type:"slots",id:t.divId,data:{inventory_url:"https://www.google.com/dfp/inventory?hl=en-US#inventory/q="+e.slot.getAdUnitPath(),responsive_map:e.slot.getResponsiveMap()}})}catch(e){}try{U({type:"slots",id:t.divId,data:{targeting_map:e.slot.getTargetingMap()}})}catch(e){}t.empty||U({type:"slots",id:t.divId,data:{rendered_size:e.size.join("x")}}),U({type:"slots",id:t.divId,data:{empty:t.empty}}),Te("GPTRenderComplete Details: ",t);var l=new CustomEvent("GPTRenderComplete",{detail:t});document.dispatchEvent(l)}catch(e){ke("error dispatching custom Event: GPTRenderComplete",{error:e})}}),window.googletag.pubads().addEventListener("slotOnload",function(e){var t=e,n=new CustomEvent("GPTSlotLoaded",{detail:t});document.dispatchEvent(n)}),window.googletag.pubads().collapseEmptyDivs(!0),window.googletag.pubads().enableAsyncRendering(),window.googletag.pubads().enableSingleRequest(),window.googletag.pubads().disableInitialLoad(),window.googletag.enableServices()}))}function i(t){var n=!1;return e("clearing target",{key:t||"all"})&&(t?window.googletag.pubads().clearTargeting(t):window.googletag.pubads().clearTargeting(),n=!0),n}function a(t,n){var i=!1;return e("setting target",{key:t,value:n})&&(AdFuel.requestScriptText+="googletag.pubads().setTargeting('"+t+"', '"+n+"');\n",window.googletag.pubads().setTargeting(t,n),i=!0),i}function r(t,n){var i=!1;return e("setting location",{latitude:t,logitude:n})&&(window.googletag.pubads().setLocation(t,n),i=!0),i}function o(t){var n=!1;return e("setting child directed treatment tag: "+t)&&(window.googletag.pubads().clearTagForChildDirectedTreatment(),window.googletag.pubads().setTagForChildDirectedTreatment(t),n=!0),n}function s(t){var n=!1;return t.sandbox=1==t.sandbox||"true"==t.sandbox,t.allowOverlayExpansion=1==t.allowOverlayExpansion||"true"==t.allowOverlayExpansion,t.allowPushExpansion=1==t.allowPushExpansion||"true"==t.allowPushExpansion,1!=t.sandbox&&(Te("Removing invalid sandbox value"),delete t.sandbox),e("setting SafeFrame config tag: "+t)&&(window.googletag.pubads().setSafeFrameConfig(t),n=!0),n}function l(t){var n=!1;return e("setting category exclusion: "+t)&&(AdFuel.requestScriptText+="googletag.pubads().setCategoryExclusion('"+t+"');\n",window.googletag.pubads().setCategoryExclusion(t),n=!0),n}function d(){var t=!1;return e("updating correlator")&&(AdFuel.requestScriptText+="googletag.pubads().updateCorrelator();\n",window.googletag.pubads().updateCorrelator(),t=!0),t}function c(t,n){var i;return e("defining out of page slot",{adPath:t,slotId:n})&&(Te("Building OOP Slot Object",{adPath:t,slotId:n}),AdFuel.requestScriptText+="\n_pageSlots['"+n+"'] = googletag.defineOutOfPageSlot('"+t+"', '"+n+"').addService(googletag.pubads());\n",i=window.googletag.defineOutOfPageSlot(t,n).addService(window.googletag.pubads())),i}function u(t,n,i){var a;return e("defining standard slot",{adPath:t,sizes:n,slotId:i})&&(Te("Building Standard Slot Object",{adPath:t,sizes:n,slotId:i}),AdFuel.requestScriptText+="\n_pageSlots['"+i+"'] = googletag.defineSlot('"+t+"', "+JSON.stringify(n)+", '"+i+"').addService(googletag.pubads());\n",a=window.googletag.defineSlot(t,n,i).addService(window.googletag.pubads())),a}function p(e,t){var n=e.getSlotElementId();Te("Setting Slot Category Exclusion",{slotId:n,value:t}),AdFuel.requestScriptText+="_pageSlots['"+n+"'].setCategoryExclusion('"+t+"');\n",e.setCategoryExclusion(t)}function f(e,t,n){var i=e.getSlotElementId();Te("Setting Slot Targeting",{slotId:i,key:t,value:n}),AdFuel.requestScriptText+="_pageSlots['"+i+"'].setTargeting('"+t+"', '"+n+"');\n",e.setTargeting(t,n)}function h(e,t){var n=e.getSlotElementId();Te("Setting Slot SafeFrame config",{slotId:n,value:t}),AdFuel.requestScriptText+="_pageSlots['"+n+"'].setSafeFrameConfig("+t+");\n",e.setSafeFrameConfig(t)}function m(e,t){var n=e.getSlotElementId();Te("Setting Slot size mapping",{slotId:n,responsiveMap:t}),AdFuel.requestScriptText+="_pageSlots['"+n+"'].defineSizeMapping('"+JSON.stringify(t)+"');\n",e.defineSizeMapping(t)}function g(e){AdFuel.requestScriptText+='googletag.display("'+e+'");\n',window.googletag.display(e),U({type:"slots",id:e,data:{display:Date.now()}})}function v(e){var t=e.getSlotElementId();Te("Clearing targeting for Slot: "+t),AdFuel.requestScriptText+="_pageSlots['"+t+"'].clearTargeting();\n",e.clearTargeting()}function y(e){var t=0==e.length?"all":e.map(function(e){return e.getSlotElementId()}).join(",");AdFuel.requestScriptText+="googletag.pubads().clear("+t+");\n",e.length>0?window.googletag.pubads().clear(e):window.googletag.pubads().clear()}function w(e){var t=0==e.length?"all":e.map(function(e){return e.getSlotElementId()}).join(",");AdFuel.requestScriptText+="googletag.pubads().destroySlots("+t+");\n",e.length>0?window.googletag.destroySlots(e):window.googletag.destroySlots()}function b(e,t){t=t||{maintainCorrelator:!0};var n=0==e.length?"all":e.map(function(e){return e.getSlotElementId()}).join(",");AdFuel.requestScriptText+="googletag.pubads().refresh("+n+");\n",e.length>0?window.googletag.pubads().refresh(e,{changeCorrelator:!t.maintainCorrelator}):window.googletag.pubads().refresh(null,{changeCorrelator:!t.maintainCorrelator})}window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[];var _=!1,C=!1;return{executeWhenAvailable:t,isAvailable:e,configurePubAds:n,clearTargeting:i,setTargeting:a,setLocation:r,setChildDirectedTreatmentTag:o,setSafeFrameConfig:s,setSlotSafeFrameConfig:h,setCategoryExclusion:l,updateCorrelator:d,defineOutOfPageSlot:c,defineSlot:u,setSlotCategoryExclusion:p,setSlotTargeting:f,displaySlotById:g,defineSlotSizeMapping:m,refreshSlots:b,clearSlots:y,clearSlotTargeting:v,destroySlots:w}}();return i(window,"load",function(e){U({type:"timeline",id:"navigation_start",data:{id:1,timestamp:window.performance.timing.navigationStart}}),U({type:"timeline",id:"fetch_start",data:{id:1,timestamp:window.performance.timing.fetchStart}}),U({type:"timeline",id:"domain_lookup_start",data:{id:1,timestamp:window.performance.timing.domainLookupStart}}),U({type:"timeline",id:"connection_start",data:{id:1,timestamp:window.performance.timing.connectStart}}),U({type:"timeline",id:"document_request_start",data:{id:1,timestamp:window.performance.timing.requestStart}}),setTimeout(function(){U({type:"timeline",id:"window_load",data:{id:1,timestamp:window.performance.timing.loadEventEnd}})},1e3)}),{init:te,logit:V,addEvent:i,setOptions:se,clearSlot:oe(T),clearSlots:oe(T),clearAllSlots:oe(T),queueSingleton:$,processNewRegistry:K,reloadAd:oe(J),refreshAd:oe(G),refreshAds:oe(Y),refreshAllAds:oe(Z),renderSingleSlot:X,requestAndRenderAds:D,pageSlots:Fe,pageSlotsObj:Fe,dynamicTargeting:xe,setBulkTargeting:W,dispatchQueue:D,queueRegistry:j,getQueuedSlots:ne,getSlotDetails:ie,refresh:oe(P),destroySlots:oe(N),removePageLevelTarget:oe(b),removeSlotLevelTarget:oe(C),addPageLevelTarget:oe(w),addSlotLevelTarget:oe(_),generateSingletonId:a,registry:new _e,requestScriptText:"",updateCorrelator:le,readCookie:o,registerModule:ae,unregisterModule:re,registeredModules:De,timestamp:Se,metrics:Pe,addMetric:U,getMetricTypes:L,getMetricsByType:q,getMetricById:z,rocketeerSlots:Re}}();window.AMPTManager={};for(var exposedMethods=Object.getOwnPropertyNames(window.AdFuel),x=0;x<exposedMethods.length;x++){var methodName=exposedMethods[x];"function"==typeof window.AdFuel[methodName]?window.AMPTManager[methodName]=sendDeprecationNotification(methodName):window.AMPTManager[methodName]=window.AdFuel[methodName]}window.AdFuel.init(),function(e){var t=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return void 0===e},toStr:function(e){return t.isUndefined(e)||null===e?"":e+""},bind:e.proxy,each:function(t,n){function i(e,t){return n(t,e)}e.each(t,i)},map:e.map,filter:e.grep,every:function(t,n){var i=!0;return t?(e.each(t,function(e,a){if(!(i=n.call(null,a,e,t)))return!1}),!!i):i},some:function(t,n){var i=!1;return t?(e.each(t,function(e,a){if(i=n.call(null,a,e,t))return!1}),!!i):i},mixin:e.extend,getUniqueId:function(){var e=0;return function(){return e++}}(),templatify:function(t){function n(){return String(t)}return e.isFunction(t)?t:n},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var i,a;return function(){var r,o,s=this,l=arguments;return r=function(){i=null,n||(a=e.apply(s,l))},o=n&&!i,clearTimeout(i),i=setTimeout(r,t),o&&(a=e.apply(s,l)),a}},throttle:function(e,t){var n,i,a,r,o,s;return o=0,s=function(){o=new Date,a=null,r=e.apply(n,i)},function(){var l=new Date,d=t-(l-o);return n=this,i=arguments,d<=0?(clearTimeout(a),a=null,o=l,r=e.apply(n,i)):a||(a=setTimeout(s,d)),r}},noop:function(){}}}(),n="0.10.5",i=function(){"use strict";function e(e){return e=t.toStr(e),e?e.split(/\s+/):[]}function n(e){return e=t.toStr(e),e?e.split(/\W+/):[]}function i(e){return function(){var n=[].slice.call(arguments,0);return function(i){var a=[];return t.each(n,function(n){a=a.concat(e(t.toStr(i[n])))}),a}}}return{nonword:n,whitespace:e,obj:{nonword:i(n),whitespace:i(e)}}}(),a=function(){"use strict";function n(n){this.maxSize=t.isNumber(n)?n:100,this.reset(),this.maxSize<=0&&(this.set=this.get=e.noop)}function i(){this.head=this.tail=null}function a(e,t){this.key=e,this.val=t,this.prev=this.next=null}return t.mixin(n.prototype,{set:function(e,t){var n,i=this.list.tail;this.size>=this.maxSize&&(this.list.remove(i),delete this.hash[i.key]),(n=this.hash[e])?(n.val=t,this.list.moveToFront(n)):(n=new a(e,t),this.list.add(n),this.hash[e]=n,this.size++)},get:function(e){var t=this.hash[e];if(t)return this.list.moveToFront(t),t.val},reset:function(){this.size=0,this.hash={},this.list=new i}}),t.mixin(i.prototype,{add:function(e){this.head&&(e.next=this.head,this.head.prev=e),this.head=e,this.tail=this.tail||e},remove:function(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev},moveToFront:function(e){this.remove(e),this.add(e)}}),n}(),r=function(){"use strict";function e(e){this.prefix=["__",e,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+t.escapeRegExChars(this.prefix))}function n(){return(new Date).getTime()}function i(e){return JSON.stringify(t.isUndefined(e)?null:e)}function a(e){return JSON.parse(e)}var r,o;try{r=window.localStorage,r.setItem("~~~","!"),r.removeItem("~~~")}catch(e){r=null}return o=r&&window.JSON?{_prefix:function(e){return this.prefix+e},_ttlKey:function(e){return this._prefix(e)+this.ttlKey},get:function(e){return this.isExpired(e)&&this.remove(e),a(r.getItem(this._prefix(e)))},set:function(e,a,o){return t.isNumber(o)?r.setItem(this._ttlKey(e),i(n()+o)):r.removeItem(this._ttlKey(e)),r.setItem(this._prefix(e),i(a))},remove:function(e){return r.removeItem(this._ttlKey(e)),r.removeItem(this._prefix(e)),this},clear:function(){var e,t,n=[],i=r.length;for(e=0;e<i;e++)(t=r.key(e)).match(this.keyMatcher)&&n.push(t.replace(this.keyMatcher,""));for(e=n.length;e--;)this.remove(n[e]);return this},isExpired:function(e){var i=a(r.getItem(this._ttlKey(e)));return!!(t.isNumber(i)&&n()>i)}}:{get:t.noop,set:t.noop,remove:t.noop,clear:t.noop,isExpired:t.noop},t.mixin(e.prototype,o),e}(),o=function(){"use strict";function n(t){t=t||{},this.cancelled=!1,this.lastUrl=null,this._send=t.transport?i(t.transport):e.ajax,this._get=t.rateLimiter?t.rateLimiter(this._get):this._get,this._cache=!1===t.cache?new a(0):l}function i(n){return function(i,a){function r(e){t.defer(function(){s.resolve(e)})}function o(e){t.defer(function(){s.reject(e)})}var s=e.Deferred();return n(i,a,r,o),s}}var r=0,o={},s=6,l=new a(10);return n.setMaxPendingRequests=function(e){s=e},n.resetCache=function(){l.reset()},t.mixin(n.prototype,{_get:function(e,t,n){function i(t){n&&n(null,t),c._cache.set(e,t)}function a(){n&&n(!0)}function l(){r--,delete o[e],c.onDeckRequestArgs&&(c._get.apply(c,c.onDeckRequestArgs),c.onDeckRequestArgs=null)}var d,c=this;this.cancelled||e!==this.lastUrl||((d=o[e])?d.done(i).fail(a):r<s?(r++,o[e]=this._send(e,t).done(i).fail(a).always(l)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(e,n,i){var a;return t.isFunction(n)&&(i=n,n={}),this.cancelled=!1,this.lastUrl=e,(a=this._cache.get(e))?t.defer(function(){i&&i(null,a)}):this._get(e,n,i),!!a},cancel:function(){this.cancelled=!0}}),n}(),s=function(){"use strict";function n(t){t=t||{},t.datumTokenizer&&t.queryTokenizer||e.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=t.datumTokenizer,this.queryTokenizer=t.queryTokenizer,this.reset()}function i(e){return e=t.filter(e,function(e){return!!e}),e=t.map(e,function(e){return e.toLowerCase()})}function a(){return{ids:[],children:{}}}function r(e){for(var t={},n=[],i=0,a=e.length;i<a;i++)t[e[i]]||(t[e[i]]=!0,n.push(e[i]));return n}function o(e,t){function n(e,t){return e-t}var i=0,a=0,r=[];e=e.sort(n),t=t.sort(n);for(var o=e.length,s=t.length;i<o&&a<s;)e[i]<t[a]?i++:e[i]>t[a]?a++:(r.push(e[i]),i++,a++);return r}return t.mixin(n.prototype,{bootstrap:function(e){this.datums=e.datums,this.trie=e.trie},add:function(e){var n=this;e=t.isArray(e)?e:[e],t.each(e,function(e){var r,o;r=n.datums.push(e)-1,o=i(n.datumTokenizer(e)),t.each(o,function(e){var t,i,o;for(t=n.trie,i=e.split("");o=i.shift();)t=t.children[o]||(t.children[o]=a()),t.ids.push(r)})})},get:function(e){var n,a,s=this;return n=i(this.queryTokenizer(e)),t.each(n,function(e){var t,n,i,r;if(a&&0===a.length)return!1;for(t=s.trie,n=e.split("");t&&(i=n.shift());)t=t.children[i];if(!t||0!==n.length)return a=[],!1;r=t.ids.slice(0),a=a?o(a,r):r}),a?t.map(r(a),function(e){return s.datums[e]}):[]},reset:function(){this.datums=[],this.trie=a()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),n}(),l=function(){"use strict";function i(e){return e.local||null}function a(i){var a,r;return r={url:null,thumbprint:"",ttl:864e5,filter:null,ajax:{}},(a=i.prefetch||null)&&(a=t.isString(a)?{url:a}:a,a=t.mixin(r,a),a.thumbprint=n+a.thumbprint,a.ajax.type=a.ajax.type||"GET",a.ajax.dataType=a.ajax.dataType||"json",!a.url&&e.error("prefetch requires url to be set")),a}function r(n){var i,a;return a={url:null,cache:!0,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}},(i=n.remote||null)&&(i=t.isString(i)?{url:i}:i,i=t.mixin(a,i),i.rateLimiter=/^throttle$/i.test(i.rateLimitBy)?function(e){return function(n){return t.throttle(n,e)}}(i.rateLimitWait):function(e){return function(n){return t.debounce(n,e)}}(i.rateLimitWait),i.ajax.type=i.ajax.type||"GET",i.ajax.dataType=i.ajax.dataType||"json",delete i.rateLimitBy,delete i.rateLimitWait,!i.url&&e.error("remote requires url to be set")),i}return{local:i,prefetch:a,remote:r}}();!function(n){"use strict";function a(t){t&&(t.local||t.prefetch||t.remote)||e.error("one of local, prefetch, or remote is required"),this.limit=t.limit||5,this.sorter=d(t.sorter),this.dupDetector=t.dupDetector||c,this.local=l.local(t),this.prefetch=l.prefetch(t),this.remote=l.remote(t),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new s({datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),this.storage=this.cacheKey?new r(this.cacheKey):null}function d(e){function n(t){return t.sort(e)}function i(e){return e}return t.isFunction(e)?n:i}function c(){return!1}var u,p;u=n.Bloodhound,p={data:"data",protocol:"protocol",thumbprint:"thumbprint"},n.Bloodhound=a,a.noConflict=function(){return n.Bloodhound=u,a},a.tokenizers=i,t.mixin(a.prototype,{_loadPrefetch:function(t){function n(e){r.clear(),r.add(t.filter?t.filter(e):e),r._saveToStorage(r.index.serialize(),t.thumbprint,t.ttl)}var i,a,r=this;return(i=this._readFromStorage(t.thumbprint))?(this.index.bootstrap(i),a=e.Deferred().resolve()):a=e.ajax(t.url,t.ajax).done(n),a},_getFromRemote:function(e,t){function n(e,n){t(e?[]:r.remote.filter?r.remote.filter(n):n)}var i,a,r=this;if(this.transport)return e=e||"",a=encodeURIComponent(e),i=this.remote.replace?this.remote.replace(this.remote.url,e):this.remote.url.replace(this.remote.wildcard,a),this.transport.get(i,this.remote.ajax,n)},_cancelLastRemoteRequest:function(){this.transport&&this.transport.cancel()},_saveToStorage:function(e,t,n){this.storage&&(this.storage.set(p.data,e,n),this.storage.set(p.protocol,location.protocol,n),this.storage.set(p.thumbprint,t,n))},_readFromStorage:function(e){var t,n={};return this.storage&&(n.data=this.storage.get(p.data),n.protocol=this.storage.get(p.protocol),n.thumbprint=this.storage.get(p.thumbprint)),t=n.thumbprint!==e||n.protocol!==location.protocol,n.data&&!t?n.data:null},_initialize:function(){function n(){a.add(t.isFunction(r)?r():r)}var i,a=this,r=this.local;return i=this.prefetch?this._loadPrefetch(this.prefetch):e.Deferred().resolve(),r&&i.done(n),this.transport=this.remote?new o(this.remote):null,this.initPromise=i.promise()},initialize:function(e){return!this.initPromise||e?this._initialize():this.initPromise},add:function(e){this.index.add(e)},get:function(e,n){function i(e){var i=r.slice(0);t.each(e,function(e){var n;return n=t.some(i,function(t){return a.dupDetector(e,t)}),!n&&i.push(e),i.length<a.limit}),n&&n(a.sorter(i))}var a=this,r=[],o=!1;r=this.index.get(e),r=this.sorter(r).slice(0,this.limit),r.length<this.limit?o=this._getFromRemote(e,i):this._cancelLastRemoteRequest(),o||(r.length>0||!this.transport)&&n&&n(r)},clear:function(){this.index.reset()},clearPrefetchCache:function(){this.storage&&this.storage.clear()},clearRemoteCache:function(){this.transport&&o.resetCache()},ttAdapter:function(){return t.bind(this.get,this)}})}(this);var d=function(){return{wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion"></div>'}}(),c=function(){"use strict";var e={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return t.isMsie()&&t.mixin(e.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t.isMsie()&&t.isMsie()<=7&&t.mixin(e.input,{marginTop:"-1px"}),e}(),u=function(){"use strict";function n(t){t&&t.el||e.error("EventBus initialized without el"),this.$el=e(t.el)}return t.mixin(n.prototype,{trigger:function(e){var t=[].slice.call(arguments,1);this.$el.trigger("typeahead:"+e,t)}}),n}(),p=function(){"use strict";function e(e,t,n,i){var a;if(!n)return this;for(t=t.split(s),n=i?o(n,i):n,this._callbacks=this._callbacks||{};a=t.shift();)this._callbacks[a]=this._callbacks[a]||{sync:[],async:[]},this._callbacks[a][e].push(n);return this}function t(t,n,i){return e.call(this,"async",t,n,i)}function n(t,n,i){return e.call(this,"sync",t,n,i)}function i(e){var t;if(!this._callbacks)return this;for(e=e.split(s);t=e.shift();)delete this._callbacks[t];return this}function a(e){var t,n,i,a,o;if(!this._callbacks)return this;for(e=e.split(s),i=[].slice.call(arguments,1);(t=e.shift())&&(n=this._callbacks[t]);)a=r(n.sync,this,[t].concat(i)),o=r(n.async,this,[t].concat(i)),a()&&l(o);return this}function r(e,t,n){function i(){for(var i,a=0,r=e.length;!i&&a<r;a+=1)i=!1===e[a].apply(t,n);return!i}return i}function o(e,t){return e.bind?e.bind(t):function(){e.apply(t,[].slice.call(arguments,0))}}var s=/\s+/,l=function(){return window.setImmediate?function(e){setImmediate(function(){e()})}:function(e){setTimeout(function(){e()},0)}}();return{onSync:n,onAsync:t,off:i,trigger:a}}(),f=function(e){"use strict";function n(e,n,i){for(var a,r=[],o=0,s=e.length;o<s;o++)r.push(t.escapeRegExChars(e[o]));return a=i?"\\b("+r.join("|")+")\\b":"("+r.join("|")+")",n?new RegExp(a):new RegExp(a,"i")}var i={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(a){function r(t){var n,i,r;return(n=s.exec(t.data))&&(r=e.createElement(a.tagName),a.className&&(r.className=a.className),i=t.splitText(n.index),i.splitText(n[0].length),r.appendChild(i.cloneNode(!0)),t.parentNode.replaceChild(r,i)),!!n}function o(e,t){for(var n,i=0;i<e.childNodes.length;i++)n=e.childNodes[i],3===n.nodeType?i+=t(n)?1:0:o(n,t)}var s;a=t.mixin({},i,a),a.node&&a.pattern&&(a.pattern=t.isArray(a.pattern)?a.pattern:[a.pattern],s=n(a.pattern,a.caseSensitive,a.wordsOnly),o(a.node,r))}}(window.document),h=function(){"use strict";function n(n){var a,r,s,l,d=this;n=n||{},n.input||e.error("input is missing"),a=t.bind(this._onBlur,this),r=t.bind(this._onFocus,this),s=t.bind(this._onKeydown,this),l=t.bind(this._onInput,this),this.$hint=e(n.hint),this.$input=e(n.input).on("blur.tt",a).on("focus.tt",r).on("keydown.tt",s),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=t.noop),t.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(e){o[e.which||e.keyCode]||t.defer(t.bind(d._onInput,d,e))}):this.$input.on("input.tt",l),this.query=this.$input.val(),this.$overflowHelper=i(this.$input)}function i(t){return e('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function a(e,t){return n.normalizeQuery(e)===n.normalizeQuery(t)}function r(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}var o;return o={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},n.normalizeQuery=function(e){return(e||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},t.mixin(n.prototype,p,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(e){var t=o[e.which||e.keyCode];this._managePreventDefault(t,e),t&&this._shouldTrigger(t,e)&&this.trigger(t+"Keyed",e)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(e,t){var n,i,a;switch(e){case"tab":i=this.getHint(),a=this.getInputValue(),n=i&&i!==a&&!r(t);break;case"up":case"down":n=!r(t);break;default:n=!1}n&&t.preventDefault()},_shouldTrigger:function(e,t){var n;switch(e){case"tab":n=!r(t);break;default:n=!0}return n},_checkInputValue:function(){var e,t,n;e=this.getInputValue(),t=a(e,this.query),n=!!t&&this.query.length!==e.length,this.query=e,t?n&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(e){this.query=e},getInputValue:function(){return this.$input.val()},setInputValue:function(e,t){this.$input.val(e),t?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(e){this.$hint.val(e)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var e,t,n,i;e=this.getInputValue(),t=this.getHint(),n=e!==t&&0===t.indexOf(e),!(i=""!==e&&n&&!this.hasOverflow())&&this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var e=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=e},isCursorAtEnd:function(){var e,n,i;return e=this.$input.val().length,n=this.$input[0].selectionStart,t.isNumber(n)?n===e:!document.selection||(i=document.selection.createRange(),i.moveStart("character",-e),e===i.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null}}),n}(),m=function(){"use strict";function n(n){n=n||{},n.templates=n.templates||{},n.source||e.error("missing source"),n.name&&!r(n.name)&&e.error("invalid dataset name: "+n.name),this.query=null,this.highlight=!!n.highlight,this.name=n.name||t.getUniqueId(),this.source=n.source,this.displayFn=i(n.display||n.displayKey),this.templates=a(n.templates,this.displayFn),this.$el=e(d.dataset.replace("%CLASS%",this.name))}function i(e){function n(t){return t[e]}return e=e||"value",t.isFunction(e)?e:n}function a(e,n){function i(e){return"<p>"+n(e)+"</p>"}return{empty:e.empty&&t.templatify(e.empty),header:e.header&&t.templatify(e.header),footer:e.footer&&t.templatify(e.footer),suggestion:e.suggestion||i}}function r(e){return/^[_a-zA-Z0-9-]+$/.test(e)}var o="ttDataset",s="ttValue",l="ttDatum";return n.extractDatasetName=function(t){return e(t).data(o)},n.extractValue=function(t){return e(t).data(s)},n.extractDatum=function(t){return e(t).data(l)},t.mixin(n.prototype,p,{_render:function(n,i){function a(){return p.templates.header({query:n,isEmpty:!u})}function r(){return p.templates.footer({query:n,isEmpty:!u})}if(this.$el){var u,p=this;this.$el.empty(),u=i&&i.length,!u&&this.templates.empty?this.$el.html(function(){return p.templates.empty({query:n,isEmpty:!0})}()).prepend(p.templates.header?a():null).append(p.templates.footer?r():null):u&&this.$el.html(function(){function a(t){var n;return n=e(d.suggestion).append(p.templates.suggestion(t)).data(o,p.name).data(s,p.displayFn(t)).data(l,t),n.children().each(function(){e(this).css(c.suggestionChild)}),n}var r,u;return r=e(d.suggestions).css(c.suggestions),u=t.map(i,a),r.append.apply(r,u),p.highlight&&f({className:"tt-highlight",node:r[0],pattern:n}),r}()).prepend(p.templates.header?a():null).append(p.templates.footer?r():null),this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(e){function t(t){n.canceled||e!==n.query||n._render(e,t)}var n=this;this.query=e,this.canceled=!1,this.source(e,t)},cancel:function(){this.canceled=!0},clear:function(){this.cancel(),this.$el.empty(),this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}}),n}(),g=function(){"use strict";function n(n){var a,r,o,s=this;n=n||{},n.menu||e.error("menu is required"),this.isOpen=!1,this.isEmpty=!0,this.datasets=t.map(n.datasets,i),a=t.bind(this._onSuggestionClick,this),r=t.bind(this._onSuggestionMouseEnter,this),o=t.bind(this._onSuggestionMouseLeave,this),this.$menu=e(n.menu).on("click.tt",".tt-suggestion",a).on("mouseenter.tt",".tt-suggestion",r).on("mouseleave.tt",".tt-suggestion",o),t.each(this.datasets,function(e){s.$menu.append(e.getRoot()),e.onSync("rendered",s._onRendered,s)})}function i(e){return new m(e)}return t.mixin(n.prototype,p,{_onSuggestionClick:function(t){this.trigger("suggestionClicked",e(t.currentTarget))},_onSuggestionMouseEnter:function(t){this._removeCursor(),this._setCursor(e(t.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){function e(e){return e.isEmpty()}this.isEmpty=t.every(this.datasets,e),this.isEmpty?this._hide():this.isOpen&&this._show(),this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function(e,t){e.first().addClass("tt-cursor"),!t&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(e){var t,n,i,a;if(this.isOpen){if(n=this._getCursor(),t=this._getSuggestions(),this._removeCursor(),i=t.index(n)+e,-1===(i=(i+1)%(t.length+1)-1))return void this.trigger("cursorRemoved");i<-1&&(i=t.length-1),this._setCursor(a=t.eq(i)),this._ensureVisible(a)}},_ensureVisible:function(e){var t,n,i,a;t=e.position().top,n=t+e.outerHeight(!0),i=this.$menu.scrollTop(),a=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),t<0?this.$menu.scrollTop(i+t):a<n&&this.$menu.scrollTop(i+(n-a))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(e){this.$menu.css("ltr"===e?c.ltr:c.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(e){var t=null;return e.length&&(t={raw:m.extractDatum(e),value:m.extractValue(e),datasetName:m.extractDatasetName(e)}),t},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(e){function n(t){t.update(e)}t.each(this.datasets,n)},empty:function(){function e(e){e.clear()}t.each(this.datasets,e),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){function e(e){e.destroy()}this.$menu.off(".tt"),this.$menu=null,t.each(this.datasets,e)}}),n}(),v=function(){"use strict";function n(n){var a,r,o;n=n||{},n.input||e.error("missing input"),this.isActivated=!1,this.autoselect=!!n.autoselect,this.minLength=t.isNumber(n.minLength)?n.minLength:1,this.$node=i(n.input,n.withHint),a=this.$node.find(".tt-dropdown-menu"),r=this.$node.find(".tt-input"),o=this.$node.find(".tt-hint"),r.on("blur.tt",function(e){var n,i,o;n=document.activeElement,i=a.is(n),o=a.has(n).length>0,t.isMsie()&&(i||o)&&(e.preventDefault(),e.stopImmediatePropagation(),t.defer(function(){r.focus()}))}),a.on("mousedown.tt",function(e){e.preventDefault()}),this.eventBus=n.eventBus||new u({el:r}),this.dropdown=new g({menu:a,datasets:n.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new h({input:r,hint:o}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._setLanguageDirection()}function i(t,n){var i,r,s,l;i=e(t),r=e(d.wrapper).css(c.wrapper),s=e(d.dropdown).css(c.dropdown),l=i.clone().css(c.hint).css(a(i)),l.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder required").prop("readonly",!0).attr({autocomplete:"off",spellcheck:"false",
tabindex:-1}),i.data(o,{dir:i.attr("dir"),autocomplete:i.attr("autocomplete"),spellcheck:i.attr("spellcheck"),style:i.attr("style")}),i.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(n?c.input:c.inputWithNoHint);try{!i.attr("dir")&&i.attr("dir","auto")}catch(e){}return i.wrap(r).parent().prepend(n?l:null).append(s)}function a(e){return{backgroundAttachment:e.css("background-attachment"),backgroundClip:e.css("background-clip"),backgroundColor:e.css("background-color"),backgroundImage:e.css("background-image"),backgroundOrigin:e.css("background-origin"),backgroundPosition:e.css("background-position"),backgroundRepeat:e.css("background-repeat"),backgroundSize:e.css("background-size")}}function r(e){var n=e.find(".tt-input");t.each(n.data(o),function(e,i){t.isUndefined(e)?n.removeAttr(i):n.attr(i,e)}),n.detach().removeData(o).removeClass("tt-input").insertAfter(e),e.remove()}var o="ttAttrs";return t.mixin(n.prototype,{_onSuggestionClicked:function(e,t){var n;(n=this.dropdown.getDatumForSuggestion(t))&&this._select(n)},_onCursorMoved:function(){var e=this.dropdown.getDatumForCursor();this.input.setInputValue(e.value,!0),this.eventBus.trigger("cursorchanged",e.raw,e.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint(),this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint(),this.eventBus.trigger("closed")},_onFocused:function(){this.isActivated=!0,this.dropdown.open()},_onBlurred:function(){this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()},_onEnterKeyed:function(e,t){var n,i;n=this.dropdown.getDatumForCursor(),i=this.dropdown.getDatumForTopSuggestion(),n?(this._select(n),t.preventDefault()):this.autoselect&&i&&(this._select(i),t.preventDefault())},_onTabKeyed:function(e,t){var n;(n=this.dropdown.getDatumForCursor())?(this._select(n),t.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var e=this.input.getQuery();this.dropdown.isEmpty&&e.length>=this.minLength?this.dropdown.update(e):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var e=this.input.getQuery();this.dropdown.isEmpty&&e.length>=this.minLength?this.dropdown.update(e):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(e,t){this.input.clearHintIfInvalid(),t.length>=this.minLength?this.dropdown.update(t):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var e;this.dir!==(e=this.input.getLanguageDirection())&&(this.dir=e,this.$node.css("direction",e),this.dropdown.setLanguageDirection(e))},_updateHint:function(){var e,n,i,a,r,o;e=this.dropdown.getDatumForTopSuggestion(),e&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(n=this.input.getInputValue(),i=h.normalizeQuery(n),a=t.escapeRegExChars(i),r=new RegExp("^(?:"+a+")(.+$)","i"),o=r.exec(e.value),o?this.input.setHint(n+o[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(e){var t,n,i,a;t=this.input.getHint(),n=this.input.getQuery(),i=e||this.input.isCursorAtEnd(),t&&n!==t&&i&&(a=this.dropdown.getDatumForTopSuggestion(),a&&this.input.setInputValue(a.value),this.eventBus.trigger("autocompleted",a.raw,a.datasetName))},_select:function(e){this.input.setQuery(e.value),this.input.setInputValue(e.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",e.raw,e.datasetName),this.dropdown.close(),t.defer(t.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(e){e=t.toStr(e),this.isActivated?this.input.setInputValue(e):(this.input.setQuery(e),this.input.setInputValue(e,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy(),r(this.$node),this.$node=null}}),n}();!function(){"use strict";var n,i,a;n=e.fn.typeahead,i="ttTypeahead",a={initialize:function(n,a){function r(){var r,o=e(this);t.each(a,function(e){e.highlight=!!n.highlight}),r=new v({input:o,eventBus:new u({el:o}),withHint:!!t.isUndefined(n.hint)||!!n.hint,minLength:n.minLength,autoselect:n.autoselect,datasets:a}),o.data(i,r)}return a=t.isArray(a)?a:[].slice.call(arguments,1),n=n||{},this.each(r)},open:function(){function t(){var t,n=e(this);(t=n.data(i))&&t.open()}return this.each(t)},close:function(){function t(){var t,n=e(this);(t=n.data(i))&&t.close()}return this.each(t)},val:function(t){function n(){var n,a=e(this);(n=a.data(i))&&n.setVal(t)}return arguments.length?this.each(n):function(e){var t,n;return(t=e.data(i))&&(n=t.getVal()),n}(this.first())},destroy:function(){function t(){var t,n=e(this);(t=n.data(i))&&(t.destroy(),n.removeData(i))}return this.each(t)}},e.fn.typeahead=function(t){var n;return a[t]&&"initialize"!==t?(n=this.filter(function(){return!!e(this).data(i)}),a[t].apply(n,[].slice.call(arguments,1))):a.initialize.apply(this,arguments)},e.fn.typeahead.noConflict=function(){return e.fn.typeahead=n,this}}()}(window.jQuery),jQuery(document).onZonesAndDomReady(function(){"use strict";fastdom.measure(function(){function e(e,t,n){fastdom.mutate(function(){jQuery(e).off(t).on(t,n)})}function t(){CNN.CurrentSize.getClientWidth()>CNN.minWidthForExpandElements?(e(".js__image--expandable","click",function(){var e=jQuery(this);fastdom.mutate(function(){var t=e.parents(".el__embedded");t.find(".el__image__close--expandable").show(),e.stop().animate({width:"100%","margin-top":A,"margin-right":0},w,function(){fastdom.mutate(function(){CNN.ResponsiveImages.processChildrenImages(this),t.addClass("el__embedded--open").height(e.outerHeight())}.bind(this))}).show().addClass("el__image--expandfull").removeClass("el__image--expandable")})}),e(".js__image__close--expandable","click",function(e){var t=jQuery(this),n=t.parents(".el__embedded");fastdom.mutate(function(){n.removeClass("el__embedded--open").css("height","auto"),t.hide(),n.find(".js__image--expandable").stop().animate({width:v,"margin-top":"10px","margin-right":"30px"},w,function(){fastdom.mutate(function(){CNN.ResponsiveImages.processChildrenImages(this)}.bind(this))}).show().addClass("el__image--expandable").removeClass("el__image--expandfull")}),e.stopPropagation()}),fastdom.mutate(function(){jQuery(".el__image--expandable .el__image__expand--expandable").show(),jQuery(".el__image--expandfull .el__image__close--expandable").show()})):fastdom.mutate(function(){jQuery(".el__image__close--expandable").hide(),jQuery(".el__image__expand--expandable").hide(),jQuery(".js__image--expandable").off()})}function n(e,t,n,i){var a,r,o,s,l=!!n;!0!==l&&!0!==i||(r=t.find(".media__video--responsive"),a=r.attr("id"),"fave"===CNN.VideoPlayer.getLibraryName(a)&&(s=FAVE.player.getInstance(a),s.resume())),o=function(){var n,o=t.parents(".el__embedded"),d=t.find(".media__video--thumbnail"),c=t.find(".el__storyelements--close"),u=o.find(".video-red-spinner"),p=r||t.find(".media__video--responsive"),f=p.find("object").get(0),h=p.find("video").get(0),m=a||p.attr("id"),v=navigator.userAgent.toLowerCase();void 0===g&&(g=t.width()),!1===l&&!0!==i&&"fave"===CNN.VideoPlayer.getLibraryName(m)&&(s=FAVE.player.getInstance(m),s.resume()),n=function(){d.css("position",""),t.stop().animate({width:"100%","margin-top":A,"margin-right":0},w,function(){fastdom.mutate(function(){"videoLoader"===CNN.VideoPlayer.getLibraryName(m)&&(_?(u.show(),-1===v.indexOf("msie")&&-1===v.indexOf("trident")||void 0===f||f.replayContent()):void 0!==h&&h.play(),t.find(".el__video__play-button").triggerHandler("click")),o.addClass("el__embedded--open")})}),t.show().addClass("el__video--expandfull").removeClass(e),p.show(),window.innerWidth>CNN.minWidthForExpandElements?(c.show(),c.css("display","block")):(c.hide(),c.css("display","none")),FAVE.settings.enabled&&jQuery(window).on("orientationchange",function(){fastdom.mutate(function(){window.innerWidth>CNN.minWidthForExpandElements?(c.show(),c.css("display","block")):(c.hide(),c.css("display","none"))})})},!0===i?n():fastdom.mutate(n)},!0===i?o():fastdom.measure(o)}function i(e,t,n){fastdom.measure(function(){var n,i,a=t.parents(".el__embedded"),r=a.find(".media__video--thumbnail"),o=a.find(".media__video--responsive"),s=a.find(".video-red-spinner"),l=o.find("object").get(0),d=o.find("video").get(0),c=o.attr("id"),u=navigator.userAgent.toLowerCase();t=t.parent(),fastdom.mutate(function(){a.removeClass("el__embedded--open"),t.stop().animate({width:g,"margin-top":"10px","margin-right":"30px"},w,function(){fastdom.mutate(function(){t.css("width","")})}),t.find(".el__video__close--expandable").hide(),t.addClass(e).removeClass("el__video--expandfull"),o.hide(),r.show(),r.css("position","relative"),"fave"===CNN.VideoPlayer.getLibraryName(c)?(i=FAVE.player.getInstance(c),i.pause()):_?(s.hide(),-1===u.indexOf("msie")&&-1===u.indexOf("trident")||void 0===l||l.stopContent()):void 0!==d&&d.pause()}),n=a.find(".js-media__video .js-video__end-slate").eq(0),fastdom.mutate(function(){n.removeClass("video__end-slate--active").addClass("video__end-slate--inactive"),a.find(".js-video-demand").show()})}),n.stopPropagation()}function a(){fastdom.measure(function(){e(".js__video--standard .media__video--thumbnail","click",function(e){n("el__video--standard",jQuery(this).parents(".js__video--standard"),e)}),e(".js__video--expandable .media__video--thumbnail","click",function(e){n("el__video--expandable",jQuery(this).parents(".js__video--expandable"),e)}),e(".js__video__close--standard","click",function(e){i("el__video--standard",jQuery(this),e)}),e(".js__video__close--expandable","click",function(e){i("el__video--expandable",jQuery(this),e)}),fastdom.mutate(function(){jQuery(".el__video--expandfull .el__video__close--standard").show(),jQuery(".el__video--expandfull .el__video__close--expandable").show(),jQuery(".el__video--expandable .el__video__expand--expandable").show(),jQuery(".el__video--standard .el__video__expand--standard").show(),jQuery(".js-video-demand").show()}),E=!1}.bind(this))}function r(){fastdom.measure(function(){CNN.CurrentSize.getClientWidth()>CNN.minWidthForExpandElements?(e(".js__video--standard","click",function(e){n("el__video--standard",jQuery(this),e)}),e(".js__video--expandable","click",function(e){n("el__video--expandable",jQuery(this),e)}),e(".js__video__close--standard","click",function(e){i("el__video--standard",jQuery(this),e)}),e(".js__video__close--expandable","click",function(e){i("el__video--expandable",jQuery(this),e)}),fastdom.mutate(function(){jQuery(".el__video--expandfull .el__video__close--standard").show(),jQuery(".el__video--expandfull .el__video__close--expandable").show(),jQuery(".el__video--expandable .el__video__expand--expandable").show(),jQuery(".el__video--standard .el__video__expand--standard").show(),jQuery(".js-video-demand").show()})):fastdom.mutate(function(){jQuery(".el__video__close--standard").hide(),jQuery(".el__video__expand--standard").hide(),jQuery(".el__video__close--expandable").hide(),jQuery(".el__video__expand--expandable").hide(),!0===CNN.orientationLandscape?jQuery(".js-video-demand").show():jQuery(".js-video-demand").hide()}),!1===E&&!0===CNN.orientationLandscape&&(jQuery(".js__video--standard").each(function(){var e,t=jQuery(this),i=t.find(".js-video-demand");0===t.find(".js-el__video__play-button").size()?(e=t.find(".el__video__expand--standard"),fastdom.mutate(function(e,t){e.hide(),!0===CNN.orientationLandscape&&n("el__video--standard",t,null,!0)}.bind(this,i,e))):fastdom.mutate(function(e){e.show()}.bind(this,i))}),jQuery(".js__video--expandable").each(function(){var e,t=jQuery(this),i=t.find(".js-video-demand");0===t.find(".js-el__video__play-button").size()?(e=t.find(".el__video__expand--expandable"),fastdom.mutate(function(e,t){e.hide(),!0===CNN.orientationLandscape&&n("el__video--expandable",t,null,!0)}.bind(this,i,e))):fastdom.mutate(function(e){e.show()}.bind(this,i))})),E=!1}.bind(this))}function o(){FAVE.settings.enabled?a():r()}function s(e,t,n){t.is(".el__gallery--expandfull")||(void 0===m&&(m=t.width()),CNN.CurrentSize.getClientWidth()>CNN.minWidthForExpandElements?fastdom.measure(function(){var n,i,a=t.parents(".el__embedded"),r=t,o=t.find(".el__gallery--teaseimage"),s=t.find(".el-carousel__wrapper"),l=s.find(".js-owl-carousel"),d=s.find(".js-owl-filmstrip"),c=!!s.attr("data-initialized");i=function(e){e.css({opacity:"1",position:"relative","z-index":"0"}),s.attr("data-initialized","true")},fastdom.mutate(function(){s.css({display:"block",visibility:"visible",opacity:"0"}),r.stop().animate({width:a.width()+"px","margin-top":A,"margin-right":0},w,function(){fastdom.mutate(function(){r.css("width","100%"),n=9*a.width()/16/2-b,l.siblings(".ad-slide").find(".ad-slide__prev, .ad-slide__next").css("top",n+"px"),a.addClass("el__embedded--open"),a.css("overflow","hidden"),r.css({"min-height":o.height()+"px","max-height":o.height()+"px"}),setTimeout(function(e,t){fastdom.mutate(function(){e.css({"max-height":1.5*t.height()+"px"}),CNN.Carousel.refreshCarousels()})},100,r,l),!1===c||l.data("owl.carousel").width()!==r.width()?(l.on("resized.owl.carousel",{$wrapper:s},function(e){fastdom.mutate(function(){i(e.data.$wrapper),jQuery(this).off("resized.owl.carousel")}.bind(this))}),d.on("resized.owl.carousel",function(e){fastdom.mutate(function(){CNN.Carousel.owl().setNumberOfItems(e),e.relatedTarget.to(0),jQuery(this).off("resized.owl.carousel")}.bind(this))}),l.data("owl.carousel").onResize(),d.data("owl.carousel").onResize()):i(s),r.addClass("el__gallery--expandfull").removeClass(e),void 0!==s.attr("isExtended")&&"false"!==s.attr("isExtended")||(setTimeout(function(){fastdom.mutate(function(){p(jQuery(s.find(".owl-wrapper-outer")),!0,!0)})},2e3),s.attr("isExtended","true"))}.bind(this))})}.bind(this))}):n.stopPropagation())}function l(e,t,n){fastdom.measure(function(){var n=t.parents(".el__embedded"),i=n.find(".el-carousel__wrapper"),a=i.find(".owl-wrapper-outer"),r=a.find(".el__gallery-caption"),o=t.parents(".el__gallery--expandfull");fastdom.mutate(function(){n.css({"max-height":"",overflow:""}),i.css({position:"absolute",opacity:0}),n.removeClass("el__embedded--open"),o.css({"min-height":"","max-height":""}),o.stop().animate({width:m,"margin-top":"10px","margin-right":"30px"},w,function(){fastdom.mutate(function(){jQuery(this).addClass(e).removeClass("el__gallery--expandfull")}.bind(this))}),i.attr("isExtended","false"),o.addClass(e).removeClass("el__gallery--expandfull"),r.hasClass("el__gallery-caption--closed")&&(r.toggleClass("el__gallery-caption--closed"),r.text(o.hasClass("el__gallery-caption--closed")?"Show Caption":"Hide Caption"))}.bind(this))}.bind(this)),n.stopPropagation()}function d(){window.innerWidth>CNN.minWidthForExpandElements?(e(".js__gallery--standard","click",function(e){s("el__gallery--standard",jQuery(this),e)}),e(".js__gallery--expandable","click",function(e){s("el__gallery--expandable",jQuery(this),e)}),e(".js__gallery__close--standard","click",function(e){l("el__gallery--standard",jQuery(this),e)}),e(".js__gallery__close--expandable","click",function(e){l("el__gallery--expandable",jQuery(this),e)}),jQuery(".js__gallery__close--standard, .js__gallery__close--expandable").trigger("click"),fastdom.mutate(function(){jQuery(".el-carousel__wrapper").not(jQuery(".zn-large-media .el-carousel__wrapper, .el__embedded--fullstandardwidth .el-carousel__wrapper,.pg-special-article__head .el-carousel__wrapper")).css({opacity:"0",position:"","z-index":""})})):fastdom.mutate(function(){jQuery(".el-carousel__wrapper").css({opacity:"1",position:"relative","z-index":"0"})}),!1===y&&window.innerWidth<=CNN.showGalleryCaptionWidth&&c()}function c(){fastdom.measure(function(){jQuery(".js__leafmedia--gallery").each(function(e,t){fastdom.mutate(function(e,t){e.hide(),t.addClass("el__gallery-caption--closed").text("Show Caption")}.bind(this,jQuery(".el__gallery_image-title",t),jQuery(".el__gallery-caption",t)))})})}function u(e,t){var n=jQuery(e),i=n.closest(".owl-stage"),a=i.find(".el__gallery_image-title"),r=i.find(".el__gallery-caption");fastdom.mutate(function(){CNN.CurrentSize.getClientWidth()>CNN.minWidthForExpandElements?r.hasClass("el__gallery-caption--closed")?(r.removeClass("el__gallery-caption--closed"),a.show()):(r.addClass("el__gallery-caption--closed"),a.hide()):(r.toggleClass("el__gallery-caption--closed"),a.toggle()),CNN.Carousel.refreshCarousels(),r.text(r.hasClass("el__gallery-caption--closed")?"Show Caption":"Hide Caption")})}function p(e,t,n){var i=0,a=0,r=jQuery(".owl-item",e).each(function(){a=jQuery(this).height(),t&&jQuery(this).attr("owlItemHeight",a),a>i&&(i=a)});t&&jQuery(e).attr("max",i),r.each(function(){var i=jQuery(this),a=jQuery(".el__gallery-showhide",i);t||n?a.css("bottom",i.attr("owlItemHeight")-jQuery(e).attr("max")+"px"):a.css("bottom","0px")})}function f(e){e&&fastdom.mutate(function(){var t,n;for(t=0,n=e.length;t<n;t++)p(e[t],!0,!0)})}function h(){t(),o(),d()}var m,g,v=jQuery(".js__image--expandable").width(),y=!1,w=700,b=30,_=!(!Modernizr||Modernizr.phone||Modernizr.mobile||Modernizr.tablet),C=0!==jQuery("html.mobile").length,x=jQuery(window),E=!0,A="36px",S=CNN.Utils.exists;CNN.contentModel=CNN.contentModel||{},CNN.CurrentSize=CNN.CurrentSize||{},CNN.CurrentSize.getClientWidth=CNN.CurrentSize.getClientWidth||jQuery.noop,CNN.minWidthForExpandElements=480,CNN.showGalleryCaptionWidth=640,CNN.orientationLandscape=!1,CNN.adLockingDisableWidth=960,CNN.adLockEnable=!!(S(CNN.AdsConfig)&&!0===CNN.AdsConfig.enableAdLock&&CNN.CurrentSize.getClientWidth()>=CNN.adLockingDisableWidth&&0!==jQuery(".pg-rail.pg-rail-tall__rail").length&&0!==jQuery(".pg-rail-tall__head").length),h(),C?x.on("orientationchange",function(){"function"==typeof CNN.Carousel.resetOnResize&&CNN.Carousel.resetOnResize()}):jQuery(window).resize(function(){y=!0,h(),setTimeout(function(){f(jQuery(".owl-wrapper-outer"))},2e3)}),function(){function e(e,t){function n(){a.addClass(t)}function i(){a.removeClass(t)}var a=jQuery(e).children().last(),r=CNN.eventListenerWithOptions&&CNN.eventListenerWithOptions.addListener;r(e,"touchstart",n,{passive:!0}),r(e,"touchcancel",i,{passive:!0}),r(e,"touchend",i,{passive:!0})}function t(t,a){e(a,i[n].className)}var n=0,i=[];for(i=[{selector:".js__image--expandable",className:"el__image--touchhover"},{selector:".js__video--standard",className:"el__video--touchhover"},{selector:".js__video--expandable",className:"el__video--touchhover"},{selector:".js__gallery--standard",className:"el__gallery--touchhover"},{selector:".js__gallery--expandable",className:"el__gallery--touchhover"}],n=0;n<i.length;n++)jQuery(i[n].selector).each(t)}(),jQuery(".js-el__gallery-caption").on("click",function(){fastdom.measure(function(){u(this)}.bind(this))})})}),function(e){"use strict";var t=e.getElementsByTagName("html")[0];t&&t.dataset&&Modernizr&&(Modernizr.phone||Modernizr.mobile?t.dataset.formfactor="mobile":t.dataset.formfactor=Modernizr.tablet?"tablet":"desktop")}(document);var nativo={},$staggeredZone,$staggeredColumn,$nativeContainer,layoutSize,$staggeredNativo,$authorDetails,$twitterImage,$nativeEmbedVideo,$bigPicture,isGalleryRendered=!1,$nativeHubCarousel,isEpicRendered=!1;!function(){"use strict";function e(e,t){var n=jQuery(e).closest(document.getElementById("bigPicture")),i=n.find(".media__caption"),a=n.find(".el__gallery-caption");CNN.CurrentSize=CNN.CurrentSize||{},CNN.CurrentSize.getClientWidth=CNN.CurrentSize.getClientWidth||jQuery.noop,CNN.CurrentSize.getClientWidth()>CNN.minWidthForExpandElements?a.hasClass("el__gallery-caption--closed")?a.removeClass("el__gallery-caption--closed"):a.addClass("el__gallery-caption--closed"):a.toggleClass("el__gallery-caption--closed"),i.toggle(t),a.text(a.hasClass("el__gallery-caption--closed")?"Show Caption":"Hide Caption")}function t(e){var t=jQuery(".js-pg-sponsor .owl-stage-outer .owl-stage .owl-item.synced"),i=t.next(),a=t.prev();"prev"===e?void 0!==a&&a.length>0&&n(a):void 0!==i&&i.length>0&&n(i)}function n(e){var t=jQuery(".js-pg-sponsor"),n=t.find(".cnngo-bigPicture"),i=n.find("img"),a=e.find(".link").attr("data-img-full");i.attr("src",a),e.parent().find(".owl-item").removeClass("synced"),e.addClass("synced"),n.find(".js-active-count").html(e.closest(".owl-item").index()+1),n.find(".image__caption").html(e.find(".link").attr("data-value"))}nativo={fbFeed:"",twFeed:"",social_hub:{icons:{twitter:"",facebook:"",linkedin:"",google:"",pinterest:"",instagram:""},fb_like:"",tw_follow:""}},nativo.renderAuthor=function(){"string"==typeof nativo.authorName&&nativo.authorName.length>0&&($authorDetails=jQuery(".js-sponsor-article-author"),$authorDetails.find(".js-author_name").text(nativo.authorName+","),$authorDetails.show())},nativo.renderEpic=function(){var e="international"===CNN.contentModel.edition?"cnni":"cnn";"string"==typeof nativo.epicAdName&&nativo.epicAdName.length>0&&!isEpicRendered&&(window.AdFuel.processNewRegistry(CNN.epicAdRegistry+"/"+e+"_native_"+nativo.epicAdName+".js"),jQuery(".js-epicAd_Render").show(),isEpicRendered=!0)},nativo.renderFacebook=function(){var e,t;"string"==typeof nativo.fbFeed&&nativo.fbFeed.length>0&&(e=encodeURIComponent(nativo.fbFeed),t=document.getElementById("fb-likebox"),t.innerHTML='<iframe src="//www.facebook.com/plugins/likebox.php?href='+e+'&amp;width=300&amp;height=590&amp;show_faces=true&amp;colorscheme=light&amp;stream=true&amp;show_border=true&amp;header=true&amp;appId=70673860847" scrolling="no" frameborder="0" class="sponsor-content-fb" allowTransparency="true"></iframe>')},nativo.renderTwitter=function(){var e,t;"string"==typeof nativo.twFeed&&nativo.twFeed.length>0&&(jQuery(document.getElementById("tw-feedbox")).html(nativo.twFeed),jQuery(".js-right-rail-tw").show()),t=document.getElementsByTagName("script")[0],document.getElementById("twitter-wjs")||(e=document.createElement("script"),e.id="twitter-wjs",e.src="//platform.twitter.com/widgets.js",t.parentNode.insertBefore(e,t)),"string"==typeof nativo.twitterImage&&nativo.twitterImage.length>0&&($twitterImage=jQuery(".js-twitterImage"),$twitterImage.find("img").attr("src",nativo.twitterImage),$twitterImage.show())},nativo.renderGallery=function(){setTimeout(function(){var n,i,a,r,o,s,l,d,c;jQuery(".js-pg-sponsor .owl-carousel").owlCarousel({slideSpeed:300,pagination:!0,paginationSpeed:400,items:9,nav:!0,navText:["",""],dots:!1,lazyLoad:!0,loop:!1,autoWidth:!0,autoHeight:!1}),n=jQuery(".js-pg-sponsor"),i=n.find(".cnngo-bigPicture"),a=i.find("img"),r=n.find(".owl-carousel").find(".link"),o=r.first().attr("data-img-full"),s=r.first().attr("data-value"),l=i.attr("data-title"),d=n.find(".owl-stage-outer .owl-stage"),c=d.find(".owl-item").length,0===i.find("img").length&&i.append("<img/>"),a.attr("src",o),i.append(n.find(".js-galleryCaption")),i.append(n.find(".js-owl-nav")),c>=1&&(i.find(".js-active-count").html(1),i.find(".js-total-count").html(c),i.find(".js-gallery-title").html(l),i.find(".el__storyelement__gray").html(" "+c+" Photos"),d.find(".owl-item").first().addClass("synced"),i.find(".image__caption").html(s)),r.on("click",function(e){var t=jQuery(this);a.attr("src",t.data("imgFull")),t.parent().parent().find(".owl-item").removeClass("synced"),t.parent().addClass("synced"),i.find(".js-active-count").html(t.closest(".owl-item").index()+1),i.find(".image__caption").html(t.attr("data-value"))}),i.find(".js-el__gallery-caption").click(function(){e(this,"slow")}),i.find(".js-owl-prev").click(function(){t("prev")}),i.find(".js-owl-next").click(function(){t("next")}),changeOwlCarousalWidth()},800)},jQuery(window).resize(function(){setTimeout(function(){changeOwlCarousalWidth()},300)})}(),function(){"use strict";var e;try{CNN.INJECTOR.createDeferredForFeature("header1"),CNN.INJECTOR.createDeferredForFeature("header2"),CNN.INJECTOR.createDeferredForFeature("footer"),CNN.INJECTOR.createDeferredForFeature("videodemanddust"),e=["onZonesAndDomReady","onZoneRendered"],CNN.INJECTOR.registerEvents(e),CNN.INJECTOR.scriptComplete("header1"),CNN.INJECTOR.scriptComplete("header2")}catch(e){console.log(e)}}();